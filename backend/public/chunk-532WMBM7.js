import{a as k}from"./chunk-THO6SEWK.js";import{a as T}from"./chunk-AFZTW5RE.js";import{a as E}from"./chunk-QKFIFL5Q.js";import"./chunk-6R7SEWBP.js";import"./chunk-UVGQBODX.js";import"./chunk-LKPJNKVD.js";import"./chunk-6CSLPSMF.js";import"./chunk-4CKO2N7V.js";import{$a as l,Bb as r,Cb as i,Db as x,Hb as u,Hc as y,Ic as S,Kb as _,Lb as d,Oc as w,Rc as I,Wa as a,Wb as c,Xb as P,Yb as C,gb as h,hc as M,jc as b,lb as p,sb as s,ta as m,ua as g,va as v,wa as O}from"./chunk-AFGHNMPW.js";function V(t,e){t&1&&(r(0,"div",6),x(1,"div",7),r(2,"p"),c(3,"Carregando ofertas..."),i()())}function N(t,e){if(t&1){let n=u();r(0,"div",8)(1,"div",9)(2,"h2"),c(3,"Ops! Algo deu errado"),i(),r(4,"p"),c(5),i(),r(6,"button",10),_("click",function(){m(n);let f=d();return g(f.loadOffers())}),c(7," Tentar Novamente "),i()()()}if(t&2){let n=d();a(5),P(n.error)}}function j(t,e){if(t&1&&(r(0,"div",17),c(1),i()),t&2){let n=d().$implicit,o=d(2);a(),C(" -",o.getDiscountPercentage(n),"% ")}}function F(t,e){if(t&1&&(r(0,"div",18)(1,"div",19),c(2),M(3,"number"),i()()),t&2){let n=d().$implicit,o=d(2);a(2),C(" Economize R$ ",b(3,1,o.getDiscountAmount(n),"1.2-2")," ")}}function A(t,e){if(t&1){let n=u();r(0,"div",13),p(1,j,2,1,"div",14),r(2,"app-product-card",15),_("addToCart",function(f){m(n);let D=d(2);return g(D.addToCart(f))}),i(),p(3,F,4,4,"div",16),i()}if(t&2){let n=e.$implicit,o=d(2);a(),s("ngIf",o.hasOffer(n)),a(),s("product",n),a(),s("ngIf",o.hasOffer(n))}}function $(t,e){if(t&1&&(r(0,"div",11),p(1,A,4,3,"div",12),i()),t&2){let n=d();a(),s("ngForOf",n.offers)}}function L(t,e){t&1&&(r(0,"div",20)(1,"div",21),v(),r(2,"svg",22),x(3,"path",23),i(),O(),r(4,"h2"),c(5,"Nenhuma oferta dispon\xEDvel"),i(),r(6,"p"),c(7,"No momento n\xE3o temos ofertas especiais. Volte em breve!"),i()()())}var z=class t{constructor(e,n){this.productService=e;this.cartService=n}offers=[];loading=!1;error=null;ngOnInit(){this.loadOffers()}loadOffers(){this.loading=!0,this.error=null,this.productService.getOffers().subscribe({next:e=>{this.offers=e,this.loading=!1},error:e=>{this.error="Erro ao carregar ofertas. Tente novamente.",this.loading=!1,console.error("Erro ao carregar ofertas:",e)}})}addToCart(e){this.cartService.addItem(e,1)}getImageUrl(e){return this.productService.getImageUrl(e)}hasOffer(e){return this.productService.hasDiscount(e)}getOriginalPrice(e){return e.original_price||e.price}getDiscountPercentage(e){return this.productService.getDiscountPercentage(e)}getDiscountAmount(e){return this.hasOffer(e)?(e.original_price||0)-e.price:0}getLowStock(e){return this.productService.getLowStock(e)}static \u0275fac=function(n){return new(n||t)(l(T),l(E))};static \u0275cmp=h({type:t,selectors:[["app-offers"]],decls:10,vars:4,consts:[[1,"offers-container"],[1,"offers-header"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","offers-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"offers-grid"],["class","offer-card",4,"ngFor","ngForOf"],[1,"offer-card"],["class","discount-badge",4,"ngIf"],[3,"addToCart","product"],["class","discount-info",4,"ngIf"],[1,"discount-badge"],[1,"discount-info"],[1,"discount-amount"],[1,"empty-state"],[1,"empty-content"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"empty-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),c(3,"Ofertas Especiais"),i(),r(4,"p"),c(5,"Encontre os melhores pre\xE7os e promo\xE7\xF5es"),i()(),p(6,V,4,0,"div",2)(7,N,8,1,"div",3)(8,$,2,1,"div",4)(9,L,8,0,"div",5),i()),n&2&&(a(6),s("ngIf",o.loading),a(),s("ngIf",o.error),a(),s("ngIf",!o.loading&&!o.error),a(),s("ngIf",!o.loading&&!o.error&&o.offers.length===0))},dependencies:[I,y,S,w,k],styles:[".offers-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;min-height:80vh}.offers-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;padding:40px 0;background:linear-gradient(135deg,#fc0,#e6b800);border-radius:16px;color:#fff;box-shadow:0 8px 32px #ffcc004d}.offers-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;font-weight:800;margin:0 0 16px;text-shadow:0 2px 4px rgba(0,0,0,.1)}.offers-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:0;opacity:.9;font-weight:500}.offers-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:24px;margin-bottom:40px}.offer-card[_ngcontent-%COMP%]{position:relative;transition:transform .3s ease}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.discount-badge[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;padding:6px 12px;border-radius:20px;font-size:14px;font-weight:700;z-index:10;box-shadow:0 2px 8px #e74c3c4d;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.discount-info[_ngcontent-%COMP%]{margin-top:8px;text-align:center}.discount-amount[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:600;display:inline-block;box-shadow:0 2px 8px #2ecc714d}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid var(--primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:60px 20px}.error-message[_ngcontent-%COMP%]{text-align:center;background:#fff5f5;border:1px solid #fed7d7;border-radius:12px;padding:40px;max-width:400px}.error-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e53e3e;margin:0 0 16px;font-size:1.5rem}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;margin:0 0 24px}.retry-button[_ngcontent-%COMP%]{background:var(--primary);color:var(--secondary);border:none;border-radius:8px;padding:12px 24px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.retry-button[_ngcontent-%COMP%]:hover{background:var(--primary-dark);transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:80px 20px}.empty-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.empty-icon[_ngcontent-%COMP%]{width:80px;height:80px;color:#cbd5e0;margin-bottom:24px}.empty-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;margin:0 0 16px;font-size:1.5rem;font-weight:600}.empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;margin:0;line-height:1.6}@media (max-width: 768px){.offers-container[_ngcontent-%COMP%]{padding:16px}.offers-header[_ngcontent-%COMP%]{padding:32px 20px;margin-bottom:32px}.offers-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem}.offers-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.offers-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px}}@media (max-width: 480px){.offers-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.offers-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.offers-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.error-message[_ngcontent-%COMP%]{padding:24px}.empty-content[_ngcontent-%COMP%]{padding:0 16px}}"]})};export{z as OffersComponent};
