import{a as Z}from"./chunk-PGYBCOB3.js";import{a as $,b as q}from"./chunk-6GPO4ETY.js";import"./chunk-DSBPOWF5.js";import{a as z,b as F,c as N,d as R,e as G,f as W}from"./chunk-ILUAGNZD.js";import{e as B}from"./chunk-3CDSQV6H.js";import"./chunk-F5X5MWHG.js";import"./chunk-JA72YPWQ.js";import{a as T}from"./chunk-QCJ3G7RC.js";import"./chunk-NH5SM3GO.js";import"./chunk-TFL2JIPP.js";import{a as j,b as D}from"./chunk-XQ665L5U.js";import"./chunk-OELRWU3S.js";import"./chunk-HCRJH4BX.js";import{b as w}from"./chunk-B4KPNMLZ.js";import"./chunk-KR442EKC.js";import{a as A,b as I}from"./chunk-OZHJ4RLB.js";import{Y as k,_ as L}from"./chunk-E25F7JMY.js";import"./chunk-RCLABZBX.js";import{a as E}from"./chunk-OMNWSMN2.js";import"./chunk-O2P35CN4.js";import{b as C,d as O,e as P,h as y}from"./chunk-UI7OC72Q.js";import{$a as c,Bb as t,Cb as e,Db as d,Ic as x,Kb as p,Lb as b,Rc as M,Ua as v,Wa as r,Wb as n,Xb as m,Yb as _,gb as S,lb as f,sb as l,ub as h}from"./chunk-G6OUGGHL.js";function J(s,i){if(s&1&&d(0,"img",26),s&2){let a=b();l("src",a.getLogoUrl(a.settings==null?null:a.settings.logo_url),v)}}function K(s,i){s&1&&(t(0,"mat-icon"),n(1,"local_bar"),e())}var H=class s{constructor(i,a,o,u){this.authService=i;this.orderPollingService=a;this.settingsService=o;this.storeStatusService=u;let g=this.authService.getUser();this.userName=g?.name||"Admin"}userName="";pageTitle="Dashboard";settings=null;isStoreOpen=!0;updatingStoreStatus=!1;settingsSubscription;storeStatusSubscription;ngOnInit(){this.settingsService.getSettings().subscribe({next:i=>{this.settings=i},error:i=>{console.error("Erro ao carregar configura\xE7\xF5es:",i)}}),this.settingsSubscription=this.settingsService.watchSettings().subscribe(i=>{this.settings=i}),this.storeStatusSubscription=this.storeStatusService.status$.subscribe(i=>{this.isStoreOpen=i})}ngOnDestroy(){this.settingsSubscription&&this.settingsSubscription.unsubscribe(),this.storeStatusSubscription&&this.storeStatusSubscription.unsubscribe()}toggleStoreStatus(i){this.updatingStoreStatus=!0,this.storeStatusService.updateStoreStatus(i).subscribe({next:()=>{this.isStoreOpen=i,this.updatingStoreStatus=!1},error:a=>{console.error("Erro ao atualizar status da loja:",a),this.updatingStoreStatus=!1,this.isStoreOpen=!i}})}getLogoUrl(i){return i?i.startsWith("http://")||i.startsWith("https://")?i:i.startsWith("/storage/")?"http://localhost:8000"+i:i:""}logout(){this.authService.logout().subscribe({next:()=>{this.orderPollingService.stopPolling(),this.orderPollingService.clearPrintedCache(),window.location.href="/login"},error:i=>{console.error("Erro ao fazer logout:",i),this.orderPollingService.stopPolling(),this.orderPollingService.clearPrintedCache(),window.location.href="/login"}})}static \u0275fac=function(a){return new(a||s)(c(E),c(w),c(Z),c(T))};static \u0275cmp=S({type:s,selectors:[["app-admin-layout"]],decls:77,vars:13,consts:[[1,"admin-container"],["mode","side","opened","",1,"admin-sidenav"],[1,"sidenav-header"],[1,"brand"],["alt","Logo","class","brand-logo",3,"src",4,"ngIf"],[4,"ngIf"],[1,"nav"],["routerLink","/admin/dashboard","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/produtos","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/combos","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/categorias","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/usuarios","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/movimentacoes","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/caixa","routerLinkActive","active","matTooltip","Gerenciar Caixa (sess\xF5es e transa\xE7\xF5es)",1,"nav-item"],["routerLink","/admin/configuracoes","routerLinkActive","active",1,"nav-item"],["routerLink","/admin/delivery-zones","routerLinkActive","active",1,"nav-item"],[1,"sidenav-footer"],["mat-stroked-button","","color","warn",1,"logout-btn",3,"click"],["color","primary"],[1,"toolbar-spacer"],[1,"toolbar-actions"],[1,"store-status-toggle"],[1,"status-label"],["color","primary",3,"change","checked","disabled"],[1,"user-info"],[1,"admin-content"],["alt","Logo",1,"brand-logo",3,"src"]],template:function(a,o){a&1&&(t(0,"mat-sidenav-container",0)(1,"mat-sidenav",1)(2,"div",2)(3,"div",3),f(4,J,1,1,"img",4)(5,K,2,0,"mat-icon",5),t(6,"span"),n(7),e()(),t(8,"small"),n(9,"Painel Admin"),e()(),t(10,"nav",6)(11,"a",7)(12,"mat-icon"),n(13,"dashboard"),e(),t(14,"span"),n(15,"Dashboard"),e()(),t(16,"a",8)(17,"mat-icon"),n(18,"inventory_2"),e(),t(19,"span"),n(20,"Produtos"),e()(),t(21,"a",9)(22,"mat-icon"),n(23,"inventory"),e(),t(24,"span"),n(25,"Combos"),e()(),t(26,"a",10)(27,"mat-icon"),n(28,"category"),e(),t(29,"span"),n(30,"Categorias"),e()(),t(31,"a",11)(32,"mat-icon"),n(33,"people"),e(),t(34,"span"),n(35,"Usu\xE1rios"),e()(),t(36,"a",12)(37,"mat-icon"),n(38,"swap_horiz"),e(),t(39,"span"),n(40,"Movimenta\xE7\xF5es"),e()(),t(41,"a",13)(42,"mat-icon"),n(43,"account_balance_wallet"),e(),t(44,"span"),n(45,"Caixa"),e()(),t(46,"a",14)(47,"mat-icon"),n(48,"settings"),e(),t(49,"span"),n(50,"Configura\xE7\xF5es"),e()(),t(51,"a",15)(52,"mat-icon"),n(53,"local_shipping"),e(),t(54,"span"),n(55,"Zonas de Entrega"),e()()(),t(56,"div",16)(57,"button",17),p("click",function(){return o.logout()}),t(58,"mat-icon"),n(59,"logout"),e(),n(60," Sair "),e()()(),t(61,"mat-sidenav-content")(62,"mat-toolbar",18)(63,"span"),n(64),e(),d(65,"span",19),t(66,"div",20)(67,"div",21)(68,"mat-icon"),n(69),e(),t(70,"span",22),n(71),e(),t(72,"mat-slide-toggle",23),p("change",function(g){return o.toggleStoreStatus(g.checked)}),e()(),t(73,"span",24),n(74),e()()(),t(75,"div",25),d(76,"router-outlet"),e()()()),a&2&&(r(4),l("ngIf",o.settings==null?null:o.settings.logo_url),r(),l("ngIf",!(o.settings!=null&&o.settings.logo_url)),r(2),m((o.settings==null?null:o.settings.site_name)||"ADEGA GS"),r(57),m(o.pageTitle),r(4),h("store-open",o.isStoreOpen)("store-closed",!o.isStoreOpen),r(),_(" ",o.isStoreOpen?"store":"store_mall_directory"," "),r(2),m(o.isStoreOpen?"Loja Aberta":"Loja Fechada"),r(),l("checked",o.isStoreOpen)("disabled",o.updatingStoreStatus),r(2),m(o.userName))},dependencies:[M,x,y,C,O,P,R,F,N,z,W,G,B,I,A,L,k,D,j,q,$],styles:[".admin-container[_ngcontent-%COMP%]{height:100vh;background-color:var(--background);margin:0;padding:0}.admin-sidenav[_ngcontent-%COMP%]{width:280px;background:var(--secondary);color:#e5e7eb}.sidenav-header[_ngcontent-%COMP%]{padding:20px 16px;display:flex;flex-direction:column;gap:4px;border-bottom:1px solid rgba(255,255,255,.06)}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:700;letter-spacing:.5px}.brand[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary)}.brand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.brand-logo[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain;margin-right:8px}.nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px;gap:4px}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;height:44px;padding:0 12px;color:#cbd5e1;border-radius:8px;text-decoration:none;transition:background .2s,color .2s}.nav-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#9ca3af}.nav-item[_ngcontent-%COMP%]:hover{background:#ffffff0f;color:#fff}.nav-item[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#fff}.active[_ngcontent-%COMP%]{background:var(--primary);color:var(--secondary)}.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--secondary)}.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--secondary)}.sidenav-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;padding:16px;border-top:1px solid rgba(255,255,255,.06)}.logout-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}mat-sidenav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;padding:0}mat-toolbar[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;width:100%;margin:0;padding:0 16px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.toolbar-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.store-status-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#ffffff1a;border-radius:8px}.store-status-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.store-status-toggle[_ngcontent-%COMP%]   .store-open[_ngcontent-%COMP%]{color:#4caf50}.store-status-toggle[_ngcontent-%COMP%]   .store-closed[_ngcontent-%COMP%]{color:#f44336}.status-label[_ngcontent-%COMP%]{font-size:.9em;font-weight:500}.user-info[_ngcontent-%COMP%]{font-size:.9em;margin-right:16px}.admin-content[_ngcontent-%COMP%]{padding:20px;height:calc(100vh - 64px);overflow-y:auto;margin:0}mat-nav-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:48px}mat-nav-list[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:16px}.nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{background:var(--primary);color:var(--secondary)}.nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--secondary)}"]})};export{H as AdminLayoutComponent};
