import{a as Ve}from"./chunk-Z474SHA2.js";import{a as we,b as Te}from"./chunk-MA64ECIA.js";import"./chunk-EYVEXPNH.js";import{a as Se,b as Oe}from"./chunk-ROER2RFV.js";import{c as Ae,h as ke}from"./chunk-NJG33T2I.js";import{d as Ie}from"./chunk-W6W5QBSK.js";import"./chunk-F5X5MWHG.js";import"./chunk-MS4AQ6UA.js";import{d as Pe,h as Ee,i as Fe}from"./chunk-U7CDANII.js";import{a as ge,b as fe,d as _e,e as be,h as he,i as xe,m as Ce,n as ve}from"./chunk-RHC5ILWF.js";import"./chunk-XTFDZCPR.js";import{a as le,b as ce,c as se,d as de,f as pe,g as ue}from"./chunk-ZHIFTSGJ.js";import"./chunk-HTFI32IU.js";import"./chunk-C4KZ6I4Q.js";import{a as Me,b as ye}from"./chunk-EQKA6Y5K.js";import{b as L,c as j}from"./chunk-OBC24UR6.js";import"./chunk-CEPC3JHI.js";import"./chunk-FIIM6QS2.js";import{a as ae,b as me}from"./chunk-6R7SEWBP.js";import{T as G,Y as z,_ as R}from"./chunk-UVGQBODX.js";import{a as B}from"./chunk-6CSLPSMF.js";import{A as ne,b as $,d as p,g as Q,h as H,k as J,l as W,m as X,n as Y,o as Z,p as K,t as ee,u as te,v as oe,y as ie,z as re}from"./chunk-M22BVTMS.js";import{a as D,c as U}from"./chunk-4CKO2N7V.js";import{$a as S,Bb as o,Cb as i,Db as h,Hb as E,Hc as k,Ic as V,Kb as f,Lb as d,Nc as N,Rc as q,Ua as F,Vb as I,Wa as l,Wb as n,Xb as v,Yb as P,Zb as w,a as M,b as y,gb as O,hc as T,ic as A,lb as b,ma as C,sb as s,ta as u,ua as g}from"./chunk-AFGHNMPW.js";function qe(a,e){a&1&&(o(0,"mat-error"),n(1," Nome \xE9 obrigat\xF3rio "),i())}function De(a,e){a&1&&(o(0,"mat-error"),n(1," Nome deve ter no m\xE1ximo 255 caracteres "),i())}function Ue(a,e){if(a&1&&(o(0,"mat-option",54),n(1),i()),a&2){let r=e.$implicit,t=d(2);s("value",r.id),l(),w(" ",r.name," - ",t.formatPrice(r.price)," ")}}function Be(a,e){a&1&&(o(0,"mat-error"),n(1," Produto \xE9 obrigat\xF3rio "),i())}function Ge(a,e){a&1&&(o(0,"mat-error"),n(1," Quantidade \xE9 obrigat\xF3ria "),i())}function ze(a,e){a&1&&(o(0,"mat-error"),n(1," Quantidade deve ser pelo menos 1 "),i())}function Re(a,e){if(a&1){let r=E();o(0,"div",42)(1,"div",43)(2,"mat-form-field",44)(3,"mat-label"),n(4,"Produto"),i(),o(5,"mat-select",45),f("selectionChange",function(){u(r);let m=d();return g(m.calculatePrice())}),b(6,Ue,2,3,"mat-option",46),i(),b(7,Be,2,0,"mat-error",8),i(),o(8,"mat-form-field",47)(9,"mat-label"),n(10,"Quantidade"),i(),o(11,"input",48),f("input",function(){u(r);let m=d();return g(m.calculatePrice())}),i(),b(12,Ge,2,0,"mat-error",8)(13,ze,2,0,"mat-error",8),i(),o(14,"mat-form-field",49)(15,"mat-label"),n(16,"Tipo de Venda"),i(),o(17,"mat-select",50),f("selectionChange",function(){u(r);let m=d();return g(m.calculatePrice())}),o(18,"mat-option",51),n(19,"Garrafa"),i(),o(20,"mat-option",52),n(21,"Dose"),i()()(),o(22,"button",53),f("click",function(){let m=u(r).index,c=d();return g(c.removeProduct(m))}),o(23,"mat-icon"),n(24,"delete"),i()()()()}if(a&2){let r,t,m,c=e.$implicit,_=e.index,x=d();s("formGroupName",_),l(6),s("ngForOf",x.filteredProducts),l(),s("ngIf",(r=c.get("product_id"))==null?null:r.hasError("required")),l(5),s("ngIf",(t=c.get("quantity"))==null?null:t.hasError("required")),l(),s("ngIf",(m=c.get("quantity"))==null?null:m.hasError("min")),l(9),s("disabled",x.productsArray.length===1)}}function Le(a,e){if(a&1&&(o(0,"div",57)(1,"span",58),n(2,"Desconto:"),i(),o(3,"span",62),n(4),i()()),a&2){let r=d(2);l(4),v(r.formatPrice(r.discountAmount))}}function je(a,e){if(a&1&&(o(0,"div",55)(1,"div",56)(2,"div",57)(3,"span",58),n(4,"Pre\xE7o Original:"),i(),o(5,"span",59),n(6),i()(),b(7,Le,5,1,"div",60),o(8,"div",61)(9,"span",58),n(10,"Pre\xE7o Final:"),i(),o(11,"span",59),n(12),i()()()()),a&2){let r=d();l(6),v(r.formatPrice(r.originalPrice)),l(),s("ngIf",r.discountAmount>0),l(5),v(r.formatPrice(r.calculatedPrice))}}function $e(a,e){a&1&&(o(0,"mat-error"),n(1," Pre\xE7o \xE9 obrigat\xF3rio "),i())}function Qe(a,e){a&1&&(o(0,"mat-error"),n(1," Pre\xE7o deve ser maior que zero "),i())}function He(a,e){if(a&1){let r=E();o(0,"div",65),h(1,"img",66),o(2,"button",67),f("click",function(){let m=u(r).index,c=d(2);return g(c.removeExistingImage(m))}),o(3,"mat-icon"),n(4,"delete"),i()()()}if(a&2){let r=e.$implicit;l(),s("src",r,F)}}function Je(a,e){if(a&1&&(o(0,"div",63),b(1,He,5,1,"div",64),i()),a&2){let r=d();l(),s("ngForOf",r.existingImages)}}function We(a,e){if(a&1){let r=E();o(0,"div",65),h(1,"img",69),o(2,"button",67),f("click",function(){let m=u(r).index,c=d(2);return g(c.removeImage(m))}),o(3,"mat-icon"),n(4,"delete"),i()()()}if(a&2){let r=e.index,t=d(2);l(),s("src",t.getImagePreview(r),F)}}function Xe(a,e){if(a&1&&(o(0,"div",68),b(1,We,5,1,"div",64),i()),a&2){let r=d();l(),s("ngForOf",r.selectedImages)}}function Ye(a,e){if(a&1&&(o(0,"span",70),n(1),i()),a&2){let r=d();l(),P(" ",r.selectedImages.length," / 5 imagens selecionadas ")}}function Ze(a,e){a&1&&h(0,"mat-spinner",71)}function Ke(a,e){if(a&1&&(o(0,"mat-icon"),n(1),i()),a&2){let r=d();l(),v(r.isEdit?"save":"add")}}var Ne=class a{constructor(e){this.fb=e;this.initializeForm()}comboForm;products=[];filteredProducts=[];loading=!1;isEdit=!1;comboId;calculatedPrice=0;originalPrice=0;discountAmount=0;selectedImages=[];existingImages=[];imagePreviewUrls=[];comboService=C(Ve);router=C(U);route=C(D);snackBar=C(L);dialog=C(Ae);authService=C(B);ngOnInit(){console.log("Usu\xE1rio logado:",this.authService.getUser()),console.log("\xC9 admin:",this.authService.isAdmin()),console.log("Token:",this.authService.getToken()),this.loadProducts(),this.route.params.subscribe(e=>{e.id&&(this.comboId=+e.id,this.isEdit=!0,this.loadCombo())}),this.comboForm.statusChanges.subscribe(e=>{console.log("Status do formul\xE1rio mudou para:",e),e==="INVALID"&&console.log("Formul\xE1rio inv\xE1lido. Erros:",this.getFormErrors())})}initializeForm(){this.comboForm=this.fb.group({name:["",[p.required,p.maxLength(255)]],description:[""],price:[0,[p.required,p.min(.01)]],original_price:[0,[p.min(0)]],discount_percentage:[0,[p.min(0),p.max(100)]],barcode:[""],is_active:[!0],featured:[!1],offers:[!1],popular:[!1],products:this.fb.array([]),productSearchTerm:[""]}),this.addProduct()}get productsArray(){return this.comboForm.get("products")}createProductFormGroup(){return this.fb.group({product_id:["",p.required],quantity:[1,[p.required,p.min(1)]],sale_type:["garrafa",p.required]})}addProduct(){let e=this.createProductFormGroup();this.productsArray.push(e)}removeProduct(e){this.productsArray.length>1&&(this.productsArray.removeAt(e),this.calculatePrice())}loadProducts(){this.comboService.getProducts().subscribe({next:e=>{this.products=e,this.filteredProducts=e},error:e=>{console.error("Erro ao carregar produtos:",e),this.snackBar.open("Erro ao carregar produtos","Fechar",{duration:3e3})}})}filterProducts(){let e=this.comboForm.get("productSearchTerm")?.value||"";if(!e.trim())this.filteredProducts=this.products;else{let r=e.toLowerCase();this.filteredProducts=this.products.filter(t=>t.name.toLowerCase().includes(r))}}loadCombo(){this.comboId&&(this.loading=!0,this.comboService.getCombo(this.comboId).subscribe({next:e=>{this.populateForm(e),this.loading=!1},error:e=>{console.error("Erro ao carregar combo:",e),this.snackBar.open("Erro ao carregar combo","Fechar",{duration:3e3}),this.loading=!1}}))}populateForm(e){for(console.log("=== DEBUG POPULATE FORM ==="),console.log("Combo recebido:",e),console.log("Combo.products:",e.products),this.comboForm.patchValue({name:e.name,description:e.description,price:e.price||.01,original_price:e.original_price||0,discount_percentage:e.discount_percentage||0,barcode:e.barcode||"",is_active:e.is_active!==void 0?e.is_active:!0,featured:e.featured||!1,offers:e.offers||!1,popular:e.popular||!1}),e.images&&Array.isArray(e.images)?this.existingImages=e.images:this.existingImages=[];this.productsArray.length!==0;)this.productsArray.removeAt(0);e.products&&e.products.length>0?(console.log("Adicionando produtos ao formul\xE1rio..."),e.products.forEach((r,t)=>{console.log(`Produto ${t}:`,r);let m=r.id||r.product_id,c=r.pivot?.quantity||r.quantity||1,_=r.pivot?.sale_type||r.sale_type||"garrafa";console.log(`Produto ${t} - ID: ${m}, Quantidade: ${c}, Tipo: ${_}`);let x=this.fb.group({product_id:[m,p.required],quantity:[c,[p.required,p.min(1)]],sale_type:[_,p.required]});this.productsArray.push(x)})):(console.log("Nenhum produto encontrado no combo, adicionando produto padr\xE3o"),this.addProduct()),e.products&&e.products.length>0&&this.calculatePrice(),console.log("Formul\xE1rio ap\xF3s popular:",this.comboForm.valid),console.log("Erros do formul\xE1rio:",this.getFormErrors()),console.log("Valor do formul\xE1rio:",this.comboForm.value),console.log("Produtos array:",this.productsArray.value)}calculatePrice(){let r=this.productsArray.value.filter(t=>t.product_id&&t.quantity&&t.sale_type);if(r.length===0){this.originalPrice=0,this.calculatedPrice=0,this.discountAmount=0;return}this.comboService.calculatePrice(r).subscribe({next:t=>{this.originalPrice=t.total_original_price,this.calculatedPrice=t.final_price,this.discountAmount=t.discount_amount,this.comboForm.get("original_price")?.value||this.comboForm.patchValue({original_price:this.originalPrice})},error:t=>{console.error("Erro ao calcular pre\xE7o:",t),this.originalPrice=0,this.calculatedPrice=0,this.discountAmount=0}})}onSubmit(){if(console.log("=== DEBUG SUBMIT ==="),console.log("Formul\xE1rio v\xE1lido:",this.comboForm.valid),console.log("Valor completo do formul\xE1rio:",this.comboForm.value),console.log("Produtos array:",this.productsArray.value),console.log("Erros do formul\xE1rio:",this.getFormErrors()),this.comboForm.valid){this.loading=!0;let e=y(M({},this.comboForm.value),{price:Number(this.comboForm.value.price),original_price:this.comboForm.value.original_price?Number(this.comboForm.value.original_price):void 0,discount_percentage:this.comboForm.value.discount_percentage?Number(this.comboForm.value.discount_percentage):void 0,products:this.productsArray.value.map(t=>({product_id:Number(t.product_id),quantity:Number(t.quantity),sale_type:t.sale_type})),images:this.selectedImages.length>0?this.selectedImages:void 0});delete e.productSearchTerm,console.log("Dados do formul\xE1rio (convertidos):",e),console.log("Produtos (convertidos):",e.products),console.log("Imagens selecionadas:",this.selectedImages.length),(this.isEdit?this.comboService.updateCombo(this.comboId,e):this.comboService.createCombo(e)).subscribe({next:t=>{this.snackBar.open(`Combo ${this.isEdit?"atualizado":"criado"} com sucesso!`,"Fechar",{duration:3e3}),this.router.navigate(["/admin/combos"])},error:t=>{console.error("Erro ao salvar combo:",t),console.error("Detalhes do erro:",t.error),console.error("Status:",t.status),console.error("Status Text:",t.statusText);let m="Erro ao salvar combo";t.error&&t.error.message&&(m=t.error.message,console.error("Mensagem de erro:",t.error.message)),t.error&&t.error.errors&&(console.error("Erros de valida\xE7\xE3o:",t.error.errors),m=Object.values(t.error.errors).flat().join(", ")),this.snackBar.open(m,"Fechar",{duration:5e3}),this.loading=!1}})}else console.log("Formul\xE1rio inv\xE1lido - marcando campos como tocados"),this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.comboForm.controls).forEach(e=>{this.comboForm.get(e)?.markAsTouched()})}getFormErrors(){let e={};return Object.keys(this.comboForm.controls).forEach(r=>{let t=this.comboForm.get(r);t&&t.errors&&(e[r]=t.errors)}),this.productsArray&&this.productsArray.length>0&&this.productsArray.controls.forEach((r,t)=>{r.errors&&(e[`products[${t}]`]=r.errors),Object.keys(r.value).forEach(m=>{let c=r.get(m);c&&c.errors&&(e[`products[${t}].${m}`]=c.errors)})}),e}hasValidProducts(){return!this.productsArray||this.productsArray.length===0?!1:this.productsArray.controls.every(e=>{let r=e.get("product_id")?.value,t=e.get("quantity")?.value,m=e.get("sale_type")?.value;return r&&t&&m&&e.valid})}getProductName(e){let r=this.products.find(t=>t.id===e);return r?r.name:"Produto n\xE3o encontrado"}formatPrice(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}onCancel(){this.router.navigate(["/admin/combos"])}onImageSelected(e){let r=e.target;if(r.files&&r.files.length>0){let t=Array.from(r.files),m=5-this.selectedImages.length;t.slice(0,m).forEach(_=>{this.selectedImages.push(_),this.imagePreviewUrls.push(URL.createObjectURL(_))}),r.value=""}}removeImage(e){this.imagePreviewUrls[e]&&URL.revokeObjectURL(this.imagePreviewUrls[e]),this.selectedImages.splice(e,1),this.imagePreviewUrls.splice(e,1)}removeExistingImage(e){this.existingImages.splice(e,1)}getImagePreview(e){return this.imagePreviewUrls[e]||""}ngOnDestroy(){this.imagePreviewUrls.forEach(e=>{URL.revokeObjectURL(e)}),this.imagePreviewUrls=[]}static \u0275fac=function(r){return new(r||a)(S(ie))};static \u0275cmp=O({type:a,selectors:[["app-combo-form"]],decls:131,vars:24,consts:[["fileInput",""],[1,"combo-form-container"],[1,"form-header"],[1,"combo-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Ex: Combo Premium"],[4,"ngIf"],["matInput","","formControlName","description","rows","3","placeholder","Descreva o combo..."],["appearance","outline",1,"barcode-field"],["matInput","","formControlName","barcode","placeholder","Opcional"],[1,"search-section"],["appearance","outline",1,"search-field"],["matInput","","formControlName","productSearchTerm","placeholder","Digite o nome do produto...",3,"input"],["matSuffix",""],["formArrayName","products"],["class","product-item",3,"formGroupName",4,"ngFor","ngForOf"],["type","button","mat-stroked-button","",1,"add-product-btn",3,"click"],["class","price-calculation",4,"ngIf"],["appearance","outline",1,"price-field"],["matInput","","type","number","formControlName","original_price","step","0.01","min","0",3,"input"],["matPrefix",""],["matInput","","type","number","formControlName","price","step","0.01","min","0","required",""],["appearance","outline",1,"discount-field"],["matInput","","type","number","formControlName","discount_percentage","step","0.01","min","0","max","100",3,"input"],[1,"images-section"],["class","existing-images",4,"ngIf"],["class","selected-images",4,"ngIf"],[1,"upload-section"],["type","file","multiple","","accept","image/*",2,"display","none",3,"change"],["type","button","mat-stroked-button","",3,"click","disabled"],["class","image-count",4,"ngIf"],[1,"checkbox-group"],["formControlName","is_active"],["formControlName","featured"],["formControlName","offers"],["formControlName","popular"],[1,"form-actions"],[1,"debug-info",2,"background","#f5f5f5","padding","10px","margin","10px 0","border-radius","4px","font-size","12px"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["diameter","20",4,"ngIf"],[1,"product-item",3,"formGroupName"],[1,"product-form"],["appearance","outline",1,"product-select"],["formControlName","product_id",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"quantity-field"],["matInput","","type","number","formControlName","quantity","min","1",3,"input"],["appearance","outline",1,"sale-type-field"],["formControlName","sale_type",3,"selectionChange"],["value","garrafa"],["value","dose"],["type","button","mat-icon-button","","color","warn","matTooltip","Remover produto",3,"click","disabled"],[3,"value"],[1,"price-calculation"],[1,"price-info"],[1,"price-item"],[1,"price-label"],[1,"price-value"],["class","price-item",4,"ngIf"],[1,"price-item","total"],[1,"price-value","discount"],[1,"existing-images"],["class","image-preview",4,"ngFor","ngForOf"],[1,"image-preview"],["alt","Imagem do combo",3,"src"],["type","button","mat-icon-button","","color","warn","matTooltip","Remover imagem",3,"click"],[1,"selected-images"],["alt","Preview",3,"src"],[1,"image-count"],["diameter","20"]],template:function(r,t){if(r&1){let m=E();o(0,"div",1)(1,"div",2)(2,"h1"),n(3),i(),o(4,"p"),n(5),i()(),o(6,"form",3),f("ngSubmit",function(){return u(m),g(t.onSubmit())}),o(7,"mat-card",4)(8,"mat-card-header")(9,"mat-card-title"),n(10,"Informa\xE7\xF5es B\xE1sicas"),i()(),o(11,"mat-card-content")(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),n(15,"Nome do Combo"),i(),h(16,"input",7),b(17,qe,2,0,"mat-error",8)(18,De,2,0,"mat-error",8),i()(),o(19,"div",5)(20,"mat-form-field",6)(21,"mat-label"),n(22,"Descri\xE7\xE3o"),i(),h(23,"textarea",9),i()(),o(24,"div",5)(25,"mat-form-field",10)(26,"mat-label"),n(27,"C\xF3digo de Barras"),i(),h(28,"input",11),i()()()(),o(29,"mat-card",4)(30,"mat-card-header")(31,"mat-card-title"),n(32,"Produtos do Combo"),i(),o(33,"mat-card-subtitle"),n(34,"Adicione os produtos que comp\xF5em este combo"),i()(),o(35,"mat-card-content")(36,"div",12)(37,"mat-form-field",13)(38,"mat-label"),n(39,"Pesquisar produtos"),i(),o(40,"input",14),f("input",function(){return u(m),g(t.filterProducts())}),i(),o(41,"mat-icon",15),n(42,"search"),i()()(),o(43,"div",16),b(44,Re,25,6,"div",17),i(),o(45,"button",18),f("click",function(){return u(m),g(t.addProduct())}),o(46,"mat-icon"),n(47,"add"),i(),n(48," Adicionar Produto "),i()()(),o(49,"mat-card",4)(50,"mat-card-header")(51,"mat-card-title"),n(52,"Pre\xE7os e Descontos"),i(),o(53,"mat-card-subtitle"),n(54,"Configure os pre\xE7os e descontos do combo"),i()(),o(55,"mat-card-content"),b(56,je,13,3,"div",19),o(57,"div",5)(58,"mat-form-field",20)(59,"mat-label"),n(60,"Pre\xE7o Original"),i(),o(61,"input",21),f("input",function(){return u(m),g(t.calculatePrice())}),i(),o(62,"span",22),n(63,"R$\xA0"),i()(),o(64,"mat-form-field",20)(65,"mat-label"),n(66,"Pre\xE7o de Venda"),i(),h(67,"input",23),o(68,"span",22),n(69,"R$\xA0"),i(),b(70,$e,2,0,"mat-error",8)(71,Qe,2,0,"mat-error",8),i(),o(72,"mat-form-field",24)(73,"mat-label"),n(74,"Desconto (%)"),i(),o(75,"input",25),f("input",function(){return u(m),g(t.calculatePrice())}),i(),o(76,"span",15),n(77,"%"),i()()()()(),o(78,"mat-card",4)(79,"mat-card-header")(80,"mat-card-title"),n(81,"Imagens do Combo"),i(),o(82,"mat-card-subtitle"),n(83,"Adicione imagens para o combo (m\xE1ximo 5 imagens)"),i()(),o(84,"mat-card-content")(85,"div",26),b(86,Je,2,1,"div",27)(87,Xe,2,1,"div",28),o(88,"div",29)(89,"input",30,0),f("change",function(_){return u(m),g(t.onImageSelected(_))}),i(),o(91,"button",31),f("click",function(){u(m);let _=I(90);return g(_.click())}),o(92,"mat-icon"),n(93,"add_photo_alternate"),i(),n(94," Adicionar Imagens "),i(),b(95,Ye,2,1,"span",32),i()()()(),o(96,"mat-card",4)(97,"mat-card-header")(98,"mat-card-title"),n(99,"Configura\xE7\xF5es"),i(),o(100,"mat-card-subtitle"),n(101,"Configure as op\xE7\xF5es de exibi\xE7\xE3o do combo"),i()(),o(102,"mat-card-content")(103,"div",33)(104,"mat-checkbox",34),n(105," Combo Ativo "),i(),o(106,"mat-checkbox",35),n(107," Em Destaque "),i(),o(108,"mat-checkbox",36),n(109," Oferta "),i(),o(110,"mat-checkbox",37),n(111," Popular "),i()()()(),o(112,"div",38)(113,"div",39)(114,"strong"),n(115,"Debug:"),i(),h(116,"br"),n(117),h(118,"br"),n(119),h(120,"br"),n(121),h(122,"br"),n(123),T(124,"json"),i(),o(125,"button",31),f("click",function(){return u(m),g(t.onCancel())}),n(126," Cancelar "),i(),o(127,"button",40),b(128,Ze,1,0,"mat-spinner",41)(129,Ke,2,1,"mat-icon",8),n(130),i()()()()}if(r&2){let m,c,_,x;l(3),v(t.isEdit?"Editar Combo":"Novo Combo"),l(2),v(t.isEdit?"Atualize as informa\xE7\xF5es do combo":"Preencha as informa\xE7\xF5es para criar um novo combo"),l(),s("formGroup",t.comboForm),l(11),s("ngIf",(m=t.comboForm.get("name"))==null?null:m.hasError("required")),l(),s("ngIf",(c=t.comboForm.get("name"))==null?null:c.hasError("maxlength")),l(26),s("ngForOf",t.productsArray.controls),l(12),s("ngIf",t.originalPrice>0),l(14),s("ngIf",(_=t.comboForm.get("price"))==null?null:_.hasError("required")),l(),s("ngIf",(x=t.comboForm.get("price"))==null?null:x.hasError("min")),l(15),s("ngIf",t.isEdit&&t.existingImages.length>0),l(),s("ngIf",t.selectedImages.length>0),l(4),s("disabled",t.selectedImages.length>=5),l(4),s("ngIf",t.selectedImages.length>0),l(22),P(" Formul\xE1rio v\xE1lido: ",t.comboForm.valid,""),l(2),P(" Produtos v\xE1lidos: ",t.hasValidProducts(),""),l(2),P(" Loading: ",t.loading,""),l(2),P(" Erros: ",A(124,22,t.getFormErrors())," "),l(2),s("disabled",t.loading),l(2),s("disabled",t.loading||!t.comboForm.valid||!t.hasValidProducts()),l(),s("ngIf",t.loading),l(),s("ngIf",!t.loading),l(),P(" ",t.isEdit?"Atualizar":"Criar"," Combo ")}},dependencies:[q,k,V,N,ne,J,$,W,Q,H,oe,te,ee,X,K,Y,Z,re,xe,he,ge,fe,_e,be,ve,Ce,R,z,G,ue,le,se,pe,de,ce,Fe,Ee,Pe,Te,we,me,ae,j,Oe,Se,Ie,ye,Me,ke],styles:[".combo-form-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.form-header[_ngcontent-%COMP%]{margin-bottom:32px}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:2rem;font-weight:500;color:#333}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:1rem}.combo-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-section[_ngcontent-%COMP%]{padding:24px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;align-items:flex-start}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.full-width[_ngcontent-%COMP%]{flex:1}.generate-btn[_ngcontent-%COMP%]{margin-top:8px;height:56px}.barcode-field[_ngcontent-%COMP%]{flex:1}.product-item[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;border:1px solid #e0e0e0;border-radius:8px;background-color:#fafafa}.product-form[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start}.product-select[_ngcontent-%COMP%]{flex:2}.quantity-field[_ngcontent-%COMP%], .sale-type-field[_ngcontent-%COMP%]{flex:1}.add-product-btn[_ngcontent-%COMP%]{width:100%;margin-top:16px;height:48px}.price-calculation[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-radius:8px;margin-bottom:16px}.price-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.price-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.price-item.total[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:8px;font-weight:500}.price-label[_ngcontent-%COMP%]{color:#666}.price-value[_ngcontent-%COMP%]{font-weight:500;color:#333}.price-value.discount[_ngcontent-%COMP%]{color:#2e7d32}.price-field[_ngcontent-%COMP%], .discount-field[_ngcontent-%COMP%]{flex:1}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px}.checkbox-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-bottom:8px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;padding:24px 0;border-top:1px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;height:48px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 768px){.combo-form-container[_ngcontent-%COMP%]{padding:16px}.form-row[_ngcontent-%COMP%], .product-form[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.price-info[_ngcontent-%COMP%]{gap:12px}.checkbox-group[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.form-section[_ngcontent-%COMP%]{padding:16px}.product-item[_ngcontent-%COMP%], .price-calculation[_ngcontent-%COMP%]{padding:12px}}.search-section[_ngcontent-%COMP%]{margin-bottom:24px}.search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-error[_ngcontent-%COMP%]{font-size:.75rem}button[mat-icon-button][_ngcontent-%COMP%]{width:40px;height:40px}button[mat-icon-button][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}mat-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:#333}mat-card-subtitle[_ngcontent-%COMP%]{color:#666;font-size:.875rem}mat-spinner[_ngcontent-%COMP%]{margin:0 auto}mat-tooltip[_ngcontent-%COMP%]{font-size:.75rem}.images-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.existing-images[_ngcontent-%COMP%], .selected-images[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px;margin-bottom:16px}.image-preview[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:1;border:2px solid #e0e0e0;border-radius:8px;overflow:hidden;background-color:#f5f5f5}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background-color:#ffffffe6;box-shadow:0 2px 4px #0003}.image-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.upload-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.upload-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px}.image-count[_ngcontent-%COMP%]{color:#666;font-size:.875rem}@media (max-width: 768px){.existing-images[_ngcontent-%COMP%], .selected-images[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}.upload-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.upload-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};export{Ne as ComboFormComponent};
