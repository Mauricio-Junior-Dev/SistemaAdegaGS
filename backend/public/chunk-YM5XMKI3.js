import{a as R,b as j,e as F,f as E,g as A,h as P}from"./chunk-NJG33T2I.js";import{b as S}from"./chunk-6R7SEWBP.js";import{Y as w,_ as I}from"./chunk-UVGQBODX.js";import{$a as u,Bb as p,Cb as m,Kb as b,Rc as M,Wa as o,Wb as g,Xb as f,Yb as C,Yc as c,Zc as U,a as _,c as y,cd as x,ga as D,gb as $,la as O,sb as T,w as v}from"./chunk-AFGHNMPW.js";var k=class n{constructor(e){this.http=e}apiUrl=`${x.apiUrl}/admin/categories`;getCategories(e={}){let t=new c;return Object.entries(e).forEach(([r,a])=>{a!=null&&(t=t.set(r,a.toString()))}),this.http.get(this.apiUrl,{params:t})}getAllCategories(){let e=new c().set("per_page","1000");return this.http.get(this.apiUrl,{params:e}).pipe(v(t=>t.data))}getCategoryTree(){return this.http.get(`${this.apiUrl}/tree`)}getCategory(e){return this.http.get(`${this.apiUrl}/${e}`)}createCategory(e){let t=new FormData;return Object.entries(e).forEach(([r,a])=>{a!=null&&(r==="image"&&a instanceof File?t.append("image",a,a.name):r==="is_active"?t.append(r,a?"1":"0"):t.append(r,a.toString()))}),this.http.post(this.apiUrl,t)}updateCategory(e){let h=e,{id:t,image:r}=h,a=y(h,["id","image"]),i=_({},a);if(i.parent_id===""||i.parent_id===null||i.parent_id===void 0?delete i.parent_id:i.parent_id=Number(i.parent_id),i.is_active!==void 0&&(i.is_active=!!i.is_active),r instanceof File){let s=new FormData;return i.name!==void 0&&i.name!==null&&s.append("name",String(i.name)),Object.entries(i).forEach(([d,l])=>{d!=="name"&&l!=null&&(typeof l=="boolean"?s.append(d,l?"1":"0"):s.append(d,l.toString()))}),s.append("image",r,r.name),this.http.post(`${this.apiUrl}/${t}/update`,s)}return this.http.put(`${this.apiUrl}/${t}`,i)}deleteCategory(e){return this.http.delete(`${this.apiUrl}/${e}`)}toggleStatus(e){return this.http.patch(`${this.apiUrl}/${e}/toggle-status`,{})}uploadImage(e,t){let r=new FormData;return r.append("image",t,t.name),this.http.post(`${this.apiUrl}/${e}/image`,r)}deleteImage(e){return this.http.delete(`${this.apiUrl}/${e}/image`)}validateSlug(e,t){let r=new c().set("slug",e);return t&&(r=r.set("exclude_id",t.toString())),this.http.get(`${this.apiUrl}/validate-slug`,{params:r})}reorderCategories(e){return this.http.post(`${this.apiUrl}/reorder`,{categories:e})}moveCategory(e,t){return this.http.patch(`${this.apiUrl}/${e}/move`,{parent_id:t})}getCategoryStats(e){return this.http.get(`${this.apiUrl}/${e}/stats`)}static \u0275fac=function(t){return new(t||n)(O(U))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};var B=class n{constructor(e,t){this.dialogRef=e;this.data=t}getButtonColor(){switch(this.data.type){case"warning":return"warn";case"danger":return"warn";case"info":return"primary";default:return"primary"}}static \u0275fac=function(t){return new(t||n)(u(R),u(j))};static \u0275cmp=$({type:n,selectors:[["app-confirm-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],["align","end"],["mat-button","",3,"click"],["mat-raised-button","",3,"click","color"]],template:function(t,r){t&1&&(p(0,"h2",0),g(1),m(),p(2,"mat-dialog-content")(3,"p"),g(4),m()(),p(5,"mat-dialog-actions",1)(6,"button",2),b("click",function(){return r.dialogRef.close(!1)}),g(7),m(),p(8,"button",3),b("click",function(){return r.dialogRef.close(!0)}),g(9),m()()),t&2&&(o(),f(r.data.title),o(3),f(r.data.message),o(3),C(" ",r.data.cancelText||"Cancelar"," "),o(),T("color",r.getButtonColor()),o(),C(" ",r.data.confirmText||"Confirmar"," "))},dependencies:[M,P,F,A,E,I,w,S],styles:["mat-dialog-content[_ngcontent-%COMP%]{min-width:300px}p[_ngcontent-%COMP%]{margin:16px 0;color:#666}"]})};export{k as a,B as b};
