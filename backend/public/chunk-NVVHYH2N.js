import{a as Wt}from"./chunk-PFVUMMIH.js";import{c as Lt}from"./chunk-2YJ3R5EO.js";import{a as Dt,b as Bt}from"./chunk-WI5FRQGV.js";import"./chunk-FEHHJZUZ.js";import{a as It,b as Ot}from"./chunk-ZVU5WUZE.js";import{c as zt,h as Rt}from"./chunk-ZOJWVXCL.js";import{a as Ft,d as kt}from"./chunk-RCLOYI6W.js";import"./chunk-F5X5MWHG.js";import{a as U,b as X,c as Y,d as Z,e as tt}from"./chunk-RTMTNV3C.js";import{a as Tt,b as wt}from"./chunk-YGUBJOX4.js";import{a as rt,b as mt,c as ct,d as lt,e as st,f as pt,g as dt,h as _t,i as ft,j as ut,k as gt}from"./chunk-SPJXCDIQ.js";import"./chunk-MS4AQ6UA.js";import{d as vt,h as Et,i as Pt}from"./chunk-L7STTDUZ.js";import{a as Ct,e as bt,h as ht,i as xt,m as Mt,n as St}from"./chunk-M5RUY3SI.js";import"./chunk-QYMJC3SD.js";import{a as it,c as ot,g as at}from"./chunk-AKZY2JAS.js";import"./chunk-ENW6RCWW.js";import"./chunk-4T3QGATL.js";import{b as yt}from"./chunk-YMNUKQK4.js";import{b as H,c as A}from"./chunk-WVEKMJY6.js";import"./chunk-NFZFG6WN.js";import"./chunk-G6SD7MXO.js";import{a as et,b as nt}from"./chunk-LUD35HDA.js";import{T as V,Y as $,_ as j}from"./chunk-H4HZ2WXW.js";import{A as Q,b as q,g as G,j as J,z as K}from"./chunk-7Q6V27MS.js";import{d as W,h as N}from"./chunk-UIAL7XLZ.js";import{$a as P,$b as b,Bb as o,Cb as i,Db as v,Eb as _,Fb as f,Hb as T,Ic as z,Kb as u,Lb as d,Qc as R,Rc as L,Vb as O,Wa as m,Wb as a,Xb as g,Yb as C,Zb as F,ac as h,bc as x,ec as k,fc as E,gb as I,hc as D,kc as B,lb as l,ma as w,sb as c,ta as M,ua as S,vb as y}from"./chunk-QUOLBKI4.js";var Vt=t=>({combo:t}),$t=t=>["/admin/combos",t],jt=t=>["/admin/combos",t,"editar"],Ht=()=>[5,10,25,50];function At(t,e){t&1&&(o(0,"th",40),a(1,"Nome"),i())}function qt(t,e){if(t&1&&(o(0,"div",44),a(1),D(2,"slice"),i()),t&2){let n=d().$implicit;m(),F(" ",B(2,2,n.description,0,50),"",n.description&&n.description.length>50?"...":""," ")}}function Gt(t,e){if(t&1&&(o(0,"td",41)(1,"div",42)(2,"strong"),a(3),i(),l(4,qt,3,6,"div",43),i()()),t&2){let n=e.$implicit;m(3),g(n.name),m(),c("ngIf",n.description)}}function Jt(t,e){t&1&&(o(0,"th",40),a(1,"Pre\xE7o"),i())}function Kt(t,e){if(t&1&&(o(0,"div",48),a(1),i()),t&2){let n=d().$implicit,r=d();m(),C(" ",r.formatPrice(n.original_price)," ")}}function Qt(t,e){if(t&1&&(o(0,"td",41)(1,"div",45)(2,"div",46),a(3),i(),l(4,Kt,2,1,"div",47),i()()),t&2){let n=e.$implicit,r=d();m(3),g(r.formatPrice(n.price)),m(),c("ngIf",n.original_price&&n.original_price>n.price)}}function Ut(t,e){t&1&&(o(0,"th",40),a(1,"Pre\xE7o Original"),i())}function Xt(t,e){if(t&1&&(o(0,"span"),a(1),i()),t&2){let n=d().$implicit,r=d();m(),g(r.formatPrice(n.original_price))}}function Yt(t,e){t&1&&(o(0,"span",51),a(1,"-"),i())}function Zt(t,e){if(t&1&&(o(0,"td",41),l(1,Xt,2,1,"span",49)(2,Yt,2,0,"span",50),i()),t&2){let n=e.$implicit;m(),c("ngIf",n.original_price),m(),c("ngIf",!n.original_price)}}function te(t,e){t&1&&(o(0,"th",40),a(1,"Desconto"),i())}function ee(t,e){if(t&1&&(o(0,"mat-chip"),a(1),i()),t&2){let n=d().$implicit,r=d();y("discount-chip"),m(),C(" ",r.getDiscountText(n)," ")}}function ne(t,e){t&1&&(o(0,"span"),a(1,"-"),i())}function ie(t,e){if(t&1&&(o(0,"td",41),l(1,ee,2,3,"mat-chip",52)(2,ne,2,0,"span",49),i()),t&2){let n=e.$implicit;m(),c("ngIf",n.original_price&&n.original_price>n.price),m(),c("ngIf",!n.original_price||n.original_price<=n.price)}}function oe(t,e){t&1&&(o(0,"th",40),a(1,"Produtos"),i())}function ae(t,e){if(t&1&&(o(0,"td",41)(1,"mat-chip",53),a(2),i()()),t&2){let n=e.$implicit,r=d();m(2),C(" ",r.getProductsCount(n)," produto(s) ")}}function re(t,e){t&1&&(o(0,"th",40),a(1,"Status"),i())}function me(t,e){if(t&1&&(o(0,"td",41)(1,"mat-chip"),a(2),i()()),t&2){let n=e.$implicit;m(),y(n.is_active?"status-active":"status-inactive"),m(),C(" ",n.is_active?"Ativo":"Inativo"," ")}}function ce(t,e){t&1&&(o(0,"th",40),a(1,"Destaque"),i())}function le(t,e){t&1&&(o(0,"mat-icon",56),a(1,"star"),i())}function se(t,e){t&1&&(o(0,"mat-icon",57),a(1,"star_border"),i())}function pe(t,e){if(t&1&&(o(0,"td",41),l(1,le,2,0,"mat-icon",54)(2,se,2,0,"mat-icon",55),i()),t&2){let n=e.$implicit;m(),c("ngIf",n.featured),m(),c("ngIf",!n.featured)}}function de(t,e){t&1&&(o(0,"th",40),a(1,"Ofertas"),i())}function _e(t,e){t&1&&(o(0,"mat-icon",59),a(1,"local_offer"),i())}function fe(t,e){t&1&&(o(0,"mat-icon",57),a(1,"local_offer"),i())}function ue(t,e){if(t&1&&(o(0,"td",41),l(1,_e,2,0,"mat-icon",58)(2,fe,2,0,"mat-icon",55),i()),t&2){let n=e.$implicit;m(),c("ngIf",n.offers),m(),c("ngIf",!n.offers)}}function ge(t,e){t&1&&(o(0,"th",40),a(1,"Popular"),i())}function Ce(t,e){t&1&&(o(0,"mat-icon",61),a(1,"whatshot"),i())}function be(t,e){t&1&&(o(0,"mat-icon",57),a(1,"whatshot"),i())}function he(t,e){if(t&1&&(o(0,"td",41),l(1,Ce,2,0,"mat-icon",60)(2,be,2,0,"mat-icon",55),i()),t&2){let n=e.$implicit;m(),c("ngIf",n.popular),m(),c("ngIf",!n.popular)}}function xe(t,e){t&1&&(o(0,"th",40),a(1,"A\xE7\xF5es"),i())}function Me(t,e){if(t&1){let n=T();o(0,"button",64)(1,"mat-icon"),a(2,"visibility"),i(),o(3,"span"),a(4,"Ver"),i()(),o(5,"button",64)(6,"mat-icon"),a(7,"edit"),i(),o(8,"span"),a(9,"Editar"),i()(),o(10,"button",65),u("click",function(){let p=M(n).combo,s=d(2);return S(s.toggleStatus(p))}),o(11,"mat-icon"),a(12),i(),o(13,"span"),a(14),i()(),o(15,"button",66),u("click",function(){let p=M(n).combo,s=d(2);return S(s.deleteCombo(p))}),o(16,"mat-icon"),a(17,"delete"),i(),o(18,"span"),a(19,"Excluir"),i()()}if(t&2){let n=e.combo;c("routerLink",E(4,$t,n.id)),m(5),c("routerLink",E(6,jt,n.id)),m(7),g(n.is_active?"visibility_off":"visibility"),m(2),g(n.is_active?"Desativar":"Ativar")}}function Se(t,e){if(t&1&&(o(0,"td",41)(1,"button",62)(2,"mat-icon"),a(3,"more_vert"),i()(),o(4,"mat-menu",null,0),l(6,Me,20,8,"ng-template",63),i()()),t&2){let n=e.$implicit,r=O(5);m(),c("matMenuTriggerFor",r)("matMenuTriggerData",E(2,Vt,n))}}function ve(t,e){t&1&&v(0,"tr",67)}function Ee(t,e){t&1&&v(0,"tr",68)}function Pe(t,e){t&1&&(o(0,"div",69),v(1,"mat-spinner",70),o(2,"p"),a(3,"Carregando combos..."),i()())}function ye(t,e){t&1&&(o(0,"div",71)(1,"mat-icon"),a(2,"inbox"),i(),o(3,"p"),a(4,"Nenhum combo encontrado"),i()())}function Te(t,e){if(t&1){let n=T();o(0,"mat-paginator",72),u("page",function(p){M(n);let s=d();return S(s.onPageChange(p))}),i()}if(t&2){let n=d();c("length",n.totalItems)("pageSize",n.pageSize)("pageIndex",n.currentPage)("pageSizeOptions",k(4,Ht))}}var Nt=class t{constructor(e,n){this.dialog=e;this.snackBar=n}displayedColumns=["name","price","original_price","discount","products_count","status","featured","offers","popular","actions"];dataSource=[];loading=!1;totalItems=0;pageSize=10;currentPage=0;searchTerm="";statusFilter="all";featuredFilter=!1;offersFilter=!1;comboService=w(Wt);ngOnInit(){this.loadCombos()}loadCombos(){this.loading=!0;let e={per_page:this.pageSize,page:this.currentPage+1};this.searchTerm.trim()&&(e.search=this.searchTerm.trim()),this.statusFilter!=="all"&&(e.is_active=this.statusFilter==="active"),this.featuredFilter&&(e.featured=!0),this.offersFilter&&(e.offers=!0),this.comboService.getCombos(e).subscribe({next:n=>{this.dataSource=n.data,this.totalItems=n.total,this.loading=!1},error:n=>{console.error("Erro ao carregar combos:",n),this.snackBar.open("Erro ao carregar combos","Fechar",{duration:3e3}),this.loading=!1}})}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.loadCombos()}onSearch(){this.currentPage=0,this.loadCombos()}onFilterChange(){this.currentPage=0,this.loadCombos()}clearFilters(){this.searchTerm="",this.statusFilter="all",this.featuredFilter=!1,this.offersFilter=!1,this.currentPage=0,this.loadCombos()}toggleStatus(e){this.comboService.toggleStatus(e.id).subscribe({next:n=>{e.is_active=n.is_active,this.snackBar.open(`Combo ${e.is_active?"ativado":"desativado"} com sucesso`,"Fechar",{duration:3e3})},error:n=>{console.error("Erro ao alterar status:",n),this.snackBar.open("Erro ao alterar status do combo","Fechar",{duration:3e3})}})}deleteCombo(e){confirm(`Tem certeza que deseja excluir o combo "${e.name}"?`)&&this.comboService.deleteCombo(e.id).subscribe({next:()=>{this.snackBar.open("Combo exclu\xEDdo com sucesso","Fechar",{duration:3e3}),this.loadCombos()},error:n=>{console.error("Erro ao excluir combo:",n),this.snackBar.open("Erro ao excluir combo","Fechar",{duration:3e3})}})}getDiscountText(e){return e.discount_percentage?`${e.discount_percentage}%`:e.original_price&&e.original_price>e.price?`${((e.original_price-e.price)/e.original_price*100).toFixed(1)}%`:"0%"}getProductsCount(e){return e.products?.length||0}formatPrice(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}static \u0275fac=function(n){return new(n||t)(P(zt),P(H))};static \u0275cmp=I({type:t,selectors:[["app-combos"]],decls:84,vars:10,consts:[["menu","matMenu"],[1,"combos-container"],[1,"header"],[1,"title-section"],[1,"actions-section"],["mat-raised-button","","color","primary","routerLink","/admin/combos/novo"],[1,"filters-card"],[1,"filters-row"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Nome ou c\xF3digo de barras",3,"ngModelChange","keyup.enter","ngModel"],["matSuffix",""],["appearance","outline",1,"status-field"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","active"],["value","inactive"],[1,"checkbox-filters"],[3,"ngModelChange","change","ngModel"],[1,"filter-actions"],["mat-button","",3,"click"],[1,"table-card"],[1,"table-container"],["mat-table","",1,"combos-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","original_price"],["matColumnDef","discount"],["matColumnDef","products_count"],["matColumnDef","status"],["matColumnDef","featured"],["matColumnDef","offers"],["matColumnDef","popular"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","loading-container",4,"ngIf"],["class","no-data",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageIndex","pageSizeOptions","page",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"combo-name"],["class","combo-description",4,"ngIf"],[1,"combo-description"],[1,"price-info"],[1,"current-price"],["class","original-price",4,"ngIf"],[1,"original-price"],[4,"ngIf"],["class","no-price",4,"ngIf"],[1,"no-price"],[3,"class",4,"ngIf"],[1,"products-chip"],["color","primary",4,"ngIf"],["color","disabled",4,"ngIf"],["color","primary"],["color","disabled"],["color","accent",4,"ngIf"],["color","accent"],["color","warn",4,"ngIf"],["color","warn"],["mat-icon-button","",3,"matMenuTriggerFor","matMenuTriggerData"],["matMenuContent",""],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"delete-action",3,"click"],["mat-header-row",""],["mat-row",""],[1,"loading-container"],["diameter","50"],[1,"no-data"],["showFirstLastButtons","",3,"page","length","pageSize","pageIndex","pageSizeOptions"]],template:function(n,r){n&1&&(o(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),a(4,"Combos"),i(),o(5,"p"),a(6,"Gerencie os combos de produtos"),i()(),o(7,"div",4)(8,"button",5)(9,"mat-icon"),a(10,"add"),i(),a(11," Novo Combo "),i()()(),o(12,"mat-card",6)(13,"mat-card-content")(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),a(17,"Buscar combos"),i(),o(18,"input",9),x("ngModelChange",function(s){return h(r.searchTerm,s)||(r.searchTerm=s),s}),u("keyup.enter",function(){return r.onSearch()}),i(),o(19,"mat-icon",10),a(20,"search"),i()(),o(21,"mat-form-field",11)(22,"mat-label"),a(23,"Status"),i(),o(24,"mat-select",12),x("ngModelChange",function(s){return h(r.statusFilter,s)||(r.statusFilter=s),s}),u("selectionChange",function(){return r.onFilterChange()}),o(25,"mat-option",13),a(26,"Todos"),i(),o(27,"mat-option",14),a(28,"Ativos"),i(),o(29,"mat-option",15),a(30,"Inativos"),i()()(),o(31,"div",16)(32,"mat-checkbox",17),x("ngModelChange",function(s){return h(r.featuredFilter,s)||(r.featuredFilter=s),s}),u("change",function(){return r.onFilterChange()}),a(33," Destaque "),i(),o(34,"mat-checkbox",17),x("ngModelChange",function(s){return h(r.offersFilter,s)||(r.offersFilter=s),s}),u("change",function(){return r.onFilterChange()}),a(35," Ofertas "),i()(),o(36,"div",18)(37,"button",19),u("click",function(){return r.onSearch()}),o(38,"mat-icon"),a(39,"search"),i(),a(40," Buscar "),i(),o(41,"button",19),u("click",function(){return r.clearFilters()}),o(42,"mat-icon"),a(43,"clear"),i(),a(44," Limpar "),i()()()()(),o(45,"mat-card",20)(46,"mat-card-content")(47,"div",21)(48,"table",22),_(49,23),l(50,At,2,0,"th",24)(51,Gt,5,2,"td",25),f(),_(52,26),l(53,Jt,2,0,"th",24)(54,Qt,5,2,"td",25),f(),_(55,27),l(56,Ut,2,0,"th",24)(57,Zt,3,2,"td",25),f(),_(58,28),l(59,te,2,0,"th",24)(60,ie,3,2,"td",25),f(),_(61,29),l(62,oe,2,0,"th",24)(63,ae,3,1,"td",25),f(),_(64,30),l(65,re,2,0,"th",24)(66,me,3,3,"td",25),f(),_(67,31),l(68,ce,2,0,"th",24)(69,pe,3,2,"td",25),f(),_(70,32),l(71,de,2,0,"th",24)(72,ue,3,2,"td",25),f(),_(73,33),l(74,ge,2,0,"th",24)(75,he,3,2,"td",25),f(),_(76,34),l(77,xe,2,0,"th",24)(78,Se,7,4,"td",25),f(),l(79,ve,1,0,"tr",35)(80,Ee,1,0,"tr",36),i(),l(81,Pe,4,0,"div",37)(82,ye,5,0,"div",38),i(),l(83,Te,1,5,"mat-paginator",39),i()()()),n&2&&(m(18),b("ngModel",r.searchTerm),m(6),b("ngModel",r.statusFilter),m(8),b("ngModel",r.featuredFilter),m(2),b("ngModel",r.offersFilter),m(14),c("dataSource",r.dataSource),m(31),c("matHeaderRowDef",r.displayedColumns),m(),c("matRowDefColumns",r.displayedColumns),m(),c("ngIf",r.loading),m(),c("ngIf",!r.loading&&r.dataSource.length===0),m(),c("ngIf",!r.loading&&r.dataSource.length>0))},dependencies:[L,z,R,gt,rt,ct,dt,lt,mt,_t,st,pt,ft,ut,j,$,V,nt,et,xt,ht,Ct,bt,St,Mt,Pt,Et,vt,at,it,ot,kt,Ft,yt,Rt,A,Ot,It,wt,Tt,Lt,tt,Y,U,X,Z,Bt,Dt,K,q,G,J,Q,N,W],styles:[".combos-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:2rem;font-weight:500;color:#333}.title-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:1rem}.actions-section[_ngcontent-%COMP%]{display:flex;gap:12px}.filters-card[_ngcontent-%COMP%]{margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.status-field[_ngcontent-%COMP%]{min-width:150px}.checkbox-filters[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-left:auto}.table-card[_ngcontent-%COMP%]{overflow:hidden}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.combos-table[_ngcontent-%COMP%]{width:100%}.combo-name[_ngcontent-%COMP%]{max-width:200px}.combo-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.combo-description[_ngcontent-%COMP%]{font-size:.875rem;color:#666;line-height:1.2}.price-info[_ngcontent-%COMP%]{text-align:right}.current-price[_ngcontent-%COMP%]{font-weight:500;color:#2e7d32}.original-price[_ngcontent-%COMP%]{font-size:.875rem;color:#999;text-decoration:line-through}.no-price[_ngcontent-%COMP%]{color:#999}.discount-chip[_ngcontent-%COMP%]{background-color:#e8f5e8!important;color:#2e7d32!important}.products-chip[_ngcontent-%COMP%]{background-color:#e3f2fd!important;color:#1976d2!important}.status-active[_ngcontent-%COMP%]{background-color:#e8f5e8!important;color:#2e7d32!important}.status-inactive[_ngcontent-%COMP%]{background-color:#ffebee!important;color:#c62828!important}.delete-action[_ngcontent-%COMP%]{color:#d32f2f!important}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:0}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}@media (max-width: 768px){.combos-container[_ngcontent-%COMP%]{padding:16px}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.filters-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-field[_ngcontent-%COMP%], .status-field[_ngcontent-%COMP%]{min-width:unset}.filter-actions[_ngcontent-%COMP%]{margin-left:0;justify-content:center}.checkbox-filters[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 1024px){.combos-table[_ngcontent-%COMP%]{font-size:.875rem}.combo-name[_ngcontent-%COMP%]{max-width:150px}}mat-chip[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500}mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}button[mat-icon-button][_ngcontent-%COMP%]{width:40px;height:40px}mat-paginator[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0}"]})};export{Nt as CombosComponent};
