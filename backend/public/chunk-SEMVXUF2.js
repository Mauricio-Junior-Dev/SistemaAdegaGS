import{F as n,J as a,Zc as S,aa as p,cd as s,ga as l,la as c,m as o,r as i,w as u}from"./chunk-AFGHNMPW.js";var b=class e{constructor(r){this.http=r;this.loadStatus(),n(3e4).pipe(p(()=>this.getStoreStatus())).subscribe({next:t=>this.statusSubject.next(t.isOpen),error:t=>console.error("Erro ao atualizar status da loja:",t)})}apiUrl=`${s.apiUrl}/store-status`;adminApiUrl=`${s.apiUrl}/admin/store-status`;statusSubject=new o(!0);status$=this.statusSubject.asObservable();loadStatus(){this.getStoreStatus().subscribe({next:r=>this.statusSubject.next(r.isOpen),error:r=>{console.error("Erro ao carregar status da loja:",r),this.statusSubject.next(!0)}})}getStoreStatus(){return this.http.get(this.apiUrl).pipe(a(r=>(console.error("Erro ao buscar status da loja:",r),i({isOpen:!0}))))}updateStoreStatus(r){return this.http.post(this.adminApiUrl,{isOpen:r}).pipe(u(t=>(this.statusSubject.next(t.isOpen),t)),a(t=>{throw console.error("Erro ao atualizar status da loja:",t),t}))}getCurrentStatus(){return this.statusSubject.value}static \u0275fac=function(t){return new(t||e)(c(S))};static \u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})};export{b as a};
