import{a as xe,b as gn}from"./chunk-534ASWBZ.js";import{a as lt,b as hn,c as pn}from"./chunk-RPAKIE5A.js";import{a as cn,b as dn}from"./chunk-6GPO4ETY.js";import"./chunk-DSBPOWF5.js";import{a as ve,b as ye}from"./chunk-UZCBXNKU.js";import{a as nt,b as rt,c as ln,e as ot,f as st,g as at,h as Ce}from"./chunk-ESHAXR7Y.js";import{a as tn,b as nn,c as rn,d as on}from"./chunk-Z5I7IYIZ.js";import"./chunk-F5X5MWHG.js";import{a as sn,b as an}from"./chunk-JA72YPWQ.js";import{a as ki,c as Oi,d as Ni,e as Fi}from"./chunk-P6SCA5KH.js";import{a as it,b as en}from"./chunk-RZPRRRZ5.js";import{a as Ue,b as Vi,c as Hi,d as zi,e as Ki,f as $i,g as ji,h as Gi,i as Wi,j as qi,k as Ui}from"./chunk-LCVMN45O.js";import"./chunk-MS4AQ6UA.js";import{d as Yi,h as Xi,i as et}from"./chunk-SWS4QG55.js";import{a as Qe,b as Qi,e as Zi,h as Ze,i as Ye,m as Xe,n as Je}from"./chunk-A7QNIJLU.js";import"./chunk-J3TQETGC.js";import{a as Ai,c as Li,g as Bi}from"./chunk-RQVK44YC.js";import"./chunk-NH5SM3GO.js";import{c as Rt}from"./chunk-TFL2JIPP.js";import{a as Ji,b as tt}from"./chunk-XQ665L5U.js";import{b as je,c as Ge}from"./chunk-CDWAOTFZ.js";import"./chunk-OELRWU3S.js";import{h as vi,k as yi,m as Ci,n as xi}from"./chunk-HCRJH4BX.js";import{a as ue,b as fe}from"./chunk-OZHJ4RLB.js";import{B as Ke,C as fi,T as $e,U as ge,W as It,Y as _e,_ as me,a as pi,b as gi,c as ze,e as Pe,f as U,i as Tt,j as Q,m as _i,o as mi,x as ui}from"./chunk-E25F7JMY.js";import{A as Ri,b as We,d as Di,g as qe,h as bi,j as wi,k as Si,m as Ei,p as Pi,v as Mi,y as Ti,z as Ii}from"./chunk-O2P35CN4.js";import{$ as ne,$a as I,$b as ai,A as xt,Aa as ri,Bb as l,Cb as c,Da as T,Db as R,Ea as Fe,Eb as le,F as ei,Fb as ce,G as Oe,Gb as Le,Ha as X,Hb as H,Hc as Ve,Ib as Be,Ic as he,Ja as St,K as Dt,Kb as f,L as bt,Lb as y,M as ti,O as G,Pb as si,Qb as q,R as Ne,Ra as oi,Rb as z,Rc as pe,Sb as K,Ua as Ae,Vb as ee,Wa as g,Wb as h,Xa as Et,Xb as P,Yb as k,Za as Pt,a as ke,aa as Z,ac as li,b as Zt,ba as w,bb as oe,bc as ci,cd as He,da as Y,dc as B,ec as di,g as ie,ga as wt,gb as A,ha as re,hb as se,i as Ct,ib as E,ja as W,jb as J,l as v,lb as D,m as j,ma as _,o as Yt,p as Xt,qc as de,r as S,rb as ae,rc as hi,sa as ii,sb as m,sc as V,t as Jt,ta as C,tc as $,ua as x,ub as Ee,w as F,x as we,xa as Se,za as ni,zc as Mt}from"./chunk-G6OUGGHL.js";var kt=class{dataNodes;expansionModel=new Rt(!0);trackBy;getLevel;isExpandable;getChildren;toggle(t){this.expansionModel.toggle(this._trackByValue(t))}expand(t){this.expansionModel.select(this._trackByValue(t))}collapse(t){this.expansionModel.deselect(this._trackByValue(t))}isExpanded(t){return this.expansionModel.isSelected(this._trackByValue(t))}toggleDescendants(t){this.expansionModel.isSelected(this._trackByValue(t))?this.collapseDescendants(t):this.expandDescendants(t)}collapseAll(){this.expansionModel.clear()}expandDescendants(t){let e=[t];e.push(...this.getDescendants(t)),this.expansionModel.select(...e.map(i=>this._trackByValue(i)))}collapseDescendants(t){let e=[t];e.push(...this.getDescendants(t)),this.expansionModel.deselect(...e.map(i=>this._trackByValue(i)))}_trackByValue(t){return this.trackBy?this.trackBy(t):t}},ct=class extends kt{getLevel;isExpandable;options;constructor(t,e,i){super(),this.getLevel=t,this.isExpandable=e,this.options=i,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(t){let e=this.dataNodes.indexOf(t),i=[];for(let n=e+1;n<this.dataNodes.length&&this.getLevel(t)<this.getLevel(this.dataNodes[n]);n++)i.push(this.dataNodes[n]);return i}expandAll(){this.expansionModel.select(...this.dataNodes.map(t=>this._trackByValue(t)))}};var Nt=new W("CDK_TREE_NODE_OUTLET_NODE"),dt=(()=>{class r{viewContainer=_(oe);_node=_(Nt,{optional:!0});constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["","cdkTreeNodeOutlet",""]]})}return r})(),Ot=class{$implicit;level;index;count;constructor(t){this.$implicit=t}},ht=(()=>{class r{template=_(Et);when;constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[0,"cdkTreeNodeDefWhen","when"]}})}return r})();function _n(){return Error("Could not find a tree control, levelAccessor, or childrenAccessor for the tree.")}var De=(()=>{class r{_differs=_(hi);_changeDetectorRef=_(de);_elementRef=_(X);_dir=_(ge);_onDestroy=new v;_dataDiffer;_defaultNodeDef;_dataSubscription;_levels=new Map;_parents=new Map;_ariaSets=new Map;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;treeControl;levelAccessor;childrenAccessor;trackBy;expansionKey;_nodeOutlet;_nodeDefs;viewChange=new j({start:0,end:Number.MAX_VALUE});_expansionModel;_flattenedNodes=new j([]);_nodeType=new j(null);_nodes=new j(new Map);_keyManagerNodes=new j([]);_keyManagerFactory=_(fi);_keyManager;_viewInit=!1;constructor(){}ngAfterContentInit(){this._initializeKeyManager()}ngAfterContentChecked(){this._updateDefaultNodeDefinition(),this._subscribeToDataChanges()}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),this._keyManager?.destroy()}ngOnInit(){this._checkTreeControlUsage(),this._initializeDataDiffer()}ngAfterViewInit(){this._viewInit=!0}_updateDefaultNodeDefinition(){let e=this._nodeDefs.filter(i=>!i.when);e.length>1,this._defaultNodeDef=e[0]}_setNodeTypeIfUnset(e){this._nodeType.value===null&&this._nodeType.next(e)}_switchDataSource(e){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._subscribeToDataChanges()}_getExpansionModel(){return this.treeControl?this.treeControl.expansionModel:(this._expansionModel??=new Rt(!0),this._expansionModel)}_subscribeToDataChanges(){if(this._dataSubscription)return;let e;vi(this._dataSource)?e=this._dataSource.connect(this):Jt(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=S(this._dataSource)),e&&(this._dataSubscription=this._getRenderData(e).pipe(w(this._onDestroy)).subscribe(i=>{this._renderDataChanges(i)}))}_getRenderData(e){let i=this._getExpansionModel();return we([e,this._nodeType,i.changed.pipe(ne(null),Y(n=>{this._emitExpansionChanges(n)}))]).pipe(Z(([n,o])=>o===null?S({renderNodes:n,flattenedNodes:null,nodeType:o}):this._computeRenderingData(n,o).pipe(F(s=>Zt(ke({},s),{nodeType:o})))))}_renderDataChanges(e){if(e.nodeType===null){this.renderNodeChanges(e.renderNodes);return}this._updateCachedData(e.flattenedNodes),this.renderNodeChanges(e.renderNodes),this._updateKeyManagerItems(e.flattenedNodes)}_emitExpansionChanges(e){if(!e)return;let i=this._nodes.value;for(let n of e.added)i.get(n)?._emitExpansionState(!0);for(let n of e.removed)i.get(n)?._emitExpansionState(!1)}_initializeKeyManager(){let e=we([this._keyManagerNodes,this._nodes]).pipe(F(([n,o])=>n.reduce((s,a)=>{let d=o.get(this._getExpansionKey(a));return d&&s.push(d),s},[]))),i={trackBy:n=>this._getExpansionKey(n.data),skipPredicate:n=>!!n.isDisabled,typeAheadDebounceInterval:!0,horizontalOrientation:this._dir.value};this._keyManager=this._keyManagerFactory(e,i)}_initializeDataDiffer(){let e=this.trackBy??((i,n)=>this._getExpansionKey(n));this._dataDiffer=this._differs.find([]).create(e)}_checkTreeControlUsage(){}renderNodeChanges(e,i=this._dataDiffer,n=this._nodeOutlet.viewContainer,o){let s=i.diff(e);!s&&!this._viewInit||(s?.forEachOperation((a,d,p)=>{if(a.previousIndex==null)this.insertNode(e[p],p,n,o);else if(p==null)n.remove(d);else{let u=n.get(d);n.move(u,p)}}),s?.forEachIdentityChange(a=>{let d=a.item;if(a.currentIndex!=null){let p=n.get(a.currentIndex);p.context.$implicit=d}}),o?this._changeDetectorRef.markForCheck():this._changeDetectorRef.detectChanges())}_getNodeDef(e,i){if(this._nodeDefs.length===1)return this._nodeDefs.first;let n=this._nodeDefs.find(o=>o.when&&o.when(i,e))||this._defaultNodeDef;return n}insertNode(e,i,n,o){let s=this._getLevelAccessor(),a=this._getNodeDef(e,i),d=this._getExpansionKey(e),p=new Ot(e);o??=this._parents.get(d)??void 0,s?p.level=s(e):o!==void 0&&this._levels.has(this._getExpansionKey(o))?p.level=this._levels.get(this._getExpansionKey(o))+1:p.level=0,this._levels.set(d,p.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,p,i),te.mostRecentTreeNode&&(te.mostRecentTreeNode.data=e)}isExpanded(e){return!!(this.treeControl?.isExpanded(e)||this._expansionModel?.isSelected(this._getExpansionKey(e)))}toggle(e){this.treeControl?this.treeControl.toggle(e):this._expansionModel&&this._expansionModel.toggle(this._getExpansionKey(e))}expand(e){this.treeControl?this.treeControl.expand(e):this._expansionModel&&this._expansionModel.select(this._getExpansionKey(e))}collapse(e){this.treeControl?this.treeControl.collapse(e):this._expansionModel&&this._expansionModel.deselect(this._getExpansionKey(e))}toggleDescendants(e){this.treeControl?this.treeControl.toggleDescendants(e):this._expansionModel&&(this.isExpanded(e)?this.collapseDescendants(e):this.expandDescendants(e))}expandDescendants(e){if(this.treeControl)this.treeControl.expandDescendants(e);else if(this._expansionModel){let i=this._expansionModel;i.select(this._getExpansionKey(e)),this._getDescendants(e).pipe(G(1),w(this._onDestroy)).subscribe(n=>{i.select(...n.map(o=>this._getExpansionKey(o)))})}}collapseDescendants(e){if(this.treeControl)this.treeControl.collapseDescendants(e);else if(this._expansionModel){let i=this._expansionModel;i.deselect(this._getExpansionKey(e)),this._getDescendants(e).pipe(G(1),w(this._onDestroy)).subscribe(n=>{i.deselect(...n.map(o=>this._getExpansionKey(o)))})}}expandAll(){this.treeControl?this.treeControl.expandAll():this._expansionModel&&this._forEachExpansionKey(e=>this._expansionModel?.select(...e))}collapseAll(){this.treeControl?this.treeControl.collapseAll():this._expansionModel&&this._forEachExpansionKey(e=>this._expansionModel?.deselect(...e))}_getLevelAccessor(){return this.treeControl?.getLevel?.bind(this.treeControl)??this.levelAccessor}_getChildrenAccessor(){return this.treeControl?.getChildren?.bind(this.treeControl)??this.childrenAccessor}_getDirectChildren(e){let i=this._getLevelAccessor(),n=this._expansionModel??this.treeControl?.expansionModel;if(!n)return S([]);let o=this._getExpansionKey(e),s=n.changed.pipe(Z(d=>d.added.includes(o)?S(!0):d.removed.includes(o)?S(!1):Xt),ne(this.isExpanded(e)));if(i)return we([s,this._flattenedNodes]).pipe(F(([d,p])=>d?this._findChildrenByLevel(i,p,e,1):[]));let a=this._getChildrenAccessor();if(a)return Ke(a(e)??[]);throw _n()}_findChildrenByLevel(e,i,n,o){let s=this._getExpansionKey(n),a=i.findIndex(b=>this._getExpansionKey(b)===s),d=e(n),p=d+o,u=[];for(let b=a+1;b<i.length;b++){let O=e(i[b]);if(O<=d)break;O<=p&&u.push(i[b])}return u}_registerNode(e){this._nodes.value.set(this._getExpansionKey(e.data),e),this._nodes.next(this._nodes.value)}_unregisterNode(e){this._nodes.value.delete(this._getExpansionKey(e.data)),this._nodes.next(this._nodes.value)}_getLevel(e){return this._levels.get(this._getExpansionKey(e))}_getSetSize(e){return this._getAriaSet(e).length}_getPositionInSet(e){let i=this._getAriaSet(e),n=this._getExpansionKey(e);return i.findIndex(o=>this._getExpansionKey(o)===n)+1}_getNodeParent(e){let i=this._parents.get(this._getExpansionKey(e.data));return i&&this._nodes.value.get(this._getExpansionKey(i))}_getNodeChildren(e){return this._getDirectChildren(e.data).pipe(F(i=>i.reduce((n,o)=>{let s=this._nodes.value.get(this._getExpansionKey(o));return s&&n.push(s),n},[])))}_sendKeydownToKeyManager(e){if(e.target===this._elementRef.nativeElement)this._keyManager.onKeydown(e);else{let i=this._nodes.getValue();for(let[,n]of i)if(e.target===n._elementRef.nativeElement){this._keyManager.onKeydown(e);break}}}_getDescendants(e){if(this.treeControl)return S(this.treeControl.getDescendants(e));if(this.levelAccessor){let i=this._findChildrenByLevel(this.levelAccessor,this._flattenedNodes.value,e,1/0);return S(i)}if(this.childrenAccessor)return this._getAllChildrenRecursively(e).pipe(Dt((i,n)=>(i.push(...n),i),[]));throw _n()}_getAllChildrenRecursively(e){return this.childrenAccessor?Ke(this.childrenAccessor(e)).pipe(G(1),Z(i=>{for(let n of i)this._parents.set(this._getExpansionKey(n),e);return S(...i).pipe(bt(n=>xt(S([n]),this._getAllChildrenRecursively(n))))})):S([])}_getExpansionKey(e){return this.expansionKey?.(e)??e}_getAriaSet(e){let i=this._getExpansionKey(e),n=this._parents.get(i),o=n?this._getExpansionKey(n):null;return this._ariaSets.get(o)??[e]}_findParentForNode(e,i,n){if(!n.length)return null;let o=this._levels.get(this._getExpansionKey(e))??0;for(let s=i-1;s>=0;s--){let a=n[s];if((this._levels.get(this._getExpansionKey(a))??0)<o)return a}return null}_flattenNestedNodesWithExpansion(e,i=0){let n=this._getChildrenAccessor();return n?S(...e).pipe(bt(o=>{let s=this._getExpansionKey(o);this._parents.has(s)||this._parents.set(s,null),this._levels.set(s,i);let a=Ke(n(o));return xt(S([o]),a.pipe(G(1),Y(d=>{this._ariaSets.set(s,[...d??[]]);for(let p of d??[]){let u=this._getExpansionKey(p);this._parents.set(u,o),this._levels.set(u,i+1)}}),Z(d=>d?this._flattenNestedNodesWithExpansion(d,i+1).pipe(F(p=>this.isExpanded(o)?p:[])):S([]))))}),Dt((o,s)=>(o.push(...s),o),[])):S([...e])}_computeRenderingData(e,i){if(this.childrenAccessor&&i==="flat")return this._clearPreviousCache(),this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe(F(n=>({renderNodes:n,flattenedNodes:n})));if(this.levelAccessor&&i==="nested"){let n=this.levelAccessor;return S(e.filter(o=>n(o)===0)).pipe(F(o=>({renderNodes:o,flattenedNodes:e})),Y(({flattenedNodes:o})=>{this._calculateParents(o)}))}else return i==="flat"?S({renderNodes:e,flattenedNodes:e}).pipe(Y(({flattenedNodes:n})=>{this._calculateParents(n)})):(this._clearPreviousCache(),this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe(F(n=>({renderNodes:e,flattenedNodes:n}))))}_updateCachedData(e){this._flattenedNodes.next(e)}_updateKeyManagerItems(e){this._keyManagerNodes.next(e)}_calculateParents(e){let i=this._getLevelAccessor();if(i){this._clearPreviousCache();for(let n=0;n<e.length;n++){let o=e[n],s=this._getExpansionKey(o);this._levels.set(s,i(o));let a=this._findParentForNode(o,n,e);this._parents.set(s,a);let d=a?this._getExpansionKey(a):null,p=this._ariaSets.get(d)??[];p.splice(n,0,o),this._ariaSets.set(d,p)}}}_forEachExpansionKey(e){let i=[],n=[];this._nodes.value.forEach(o=>{i.push(this._getExpansionKey(o.data)),n.push(this._getDescendants(o.data))}),n.length>0?we(n).pipe(G(1),w(this._onDestroy)).subscribe(o=>{o.forEach(s=>s.forEach(a=>i.push(this._getExpansionKey(a)))),e(i)}):e(i)}_clearPreviousCache(){this._parents.clear(),this._levels.clear(),this._ariaSets.clear()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=A({type:r,selectors:[["cdk-tree"]],contentQueries:function(i,n,o){if(i&1&&si(o,ht,5),i&2){let s;z(s=K())&&(n._nodeDefs=s)}},viewQuery:function(i,n){if(i&1&&q(dt,7),i&2){let o;z(o=K())&&(n._nodeOutlet=o.first)}},hostAttrs:["role","tree",1,"cdk-tree"],hostBindings:function(i,n){i&1&&f("keydown",function(s){return n._sendKeydownToKeyManager(s)})},inputs:{dataSource:"dataSource",treeControl:"treeControl",levelAccessor:"levelAccessor",childrenAccessor:"childrenAccessor",trackBy:"trackBy",expansionKey:"expansionKey"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(i,n){i&1&&Le(0,0)},dependencies:[dt],encapsulation:2})}return r})(),te=(()=>{class r{_elementRef=_(X);_tree=_(De);_tabindex=-1;_type="flat";get role(){return"treeitem"}set role(e){}get isExpandable(){return this._isExpandable()}set isExpandable(e){this._inputIsExpandable=e,!(this.data&&!this._isExpandable||!this._inputIsExpandable)&&(this._inputIsExpanded?this.expand():this._inputIsExpanded===!1&&this.collapse())}get isExpanded(){return this._tree.isExpanded(this._data)}set isExpanded(e){this._inputIsExpanded=e,e?this.expand():this.collapse()}isDisabled;typeaheadLabel;getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}activation=new T;expandedChange=new T;static mostRecentTreeNode=null;_destroyed=new v;_dataChanges=new v;_inputIsExpandable=!1;_inputIsExpanded=void 0;_shouldFocus=!0;_parentNodeAriaLevel;get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._dataChanges.next())}_data;get isLeafNode(){return this._tree.treeControl?.isExpandable!==void 0&&!this._tree.treeControl.isExpandable(this._data)?!0:this._tree.treeControl?.isExpandable===void 0&&this._tree.treeControl?.getDescendants(this._data).length===0}get level(){return this._tree._getLevel(this._data)??this._parentNodeAriaLevel}_isExpandable(){return this._tree.treeControl?!this.isLeafNode:this._inputIsExpandable}_getAriaExpanded(){return this._isExpandable()?String(this.isExpanded):null}_getSetSize(){return this._tree._getSetSize(this._data)}_getPositionInSet(){return this._tree._getPositionInSet(this._data)}_changeDetectorRef=_(de);constructor(){r.mostRecentTreeNode=this}ngOnInit(){this._parentNodeAriaLevel=ar(this._elementRef.nativeElement),this._tree._getExpansionModel().changed.pipe(F(()=>this.isExpanded),Ne()).subscribe(()=>this._changeDetectorRef.markForCheck()),this._tree._setNodeTypeIfUnset(this._type),this._tree._registerNode(this)}ngOnDestroy(){r.mostRecentTreeNode===this&&(r.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}getParent(){return this._tree._getNodeParent(this)??null}getChildren(){return this._tree._getNodeChildren(this)}focus(){this._tabindex=0,this._shouldFocus&&this._elementRef.nativeElement.focus(),this._changeDetectorRef.markForCheck()}unfocus(){this._tabindex=-1,this._changeDetectorRef.markForCheck()}activate(){this.isDisabled||this.activation.next(this._data)}collapse(){this.isExpandable&&this._tree.collapse(this._data)}expand(){this.isExpandable&&this._tree.expand(this._data)}makeFocusable(){this._tabindex=0,this._changeDetectorRef.markForCheck()}_focusItem(){this.isDisabled||this._tree._keyManager.focusItem(this)}_setActiveItem(){this.isDisabled||(this._shouldFocus=!1,this._tree._keyManager.focusItem(this),this._shouldFocus=!0)}_emitExpansionState(e){this.expandedChange.emit(e)}static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["cdk-tree-node"]],hostAttrs:["role","treeitem",1,"cdk-tree-node"],hostVars:5,hostBindings:function(i,n){i&1&&f("click",function(){return n._setActiveItem()})("focus",function(){return n._focusItem()}),i&2&&(Be("tabindex",n._tabindex),ae("aria-expanded",n._getAriaExpanded())("aria-level",n.level+1)("aria-posinset",n._getPositionInSet())("aria-setsize",n._getSetSize()))},inputs:{role:"role",isExpandable:[2,"isExpandable","isExpandable",V],isExpanded:"isExpanded",isDisabled:[2,"isDisabled","isDisabled",V],typeaheadLabel:[0,"cdkTreeNodeTypeaheadLabel","typeaheadLabel"]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["cdkTreeNode"]})}return r})();function ar(r){let t=r.parentElement;for(;t&&!lr(t);)t=t.parentElement;return t?t.classList.contains("cdk-nested-tree-node")?$(t.getAttribute("aria-level")):0:-1}function lr(r){let t=r.classList;return!!(t?.contains("cdk-nested-tree-node")||t?.contains("cdk-tree"))}var cr=/([A-Za-z%]+)$/,Ft=(()=>{class r{_treeNode=_(te);_tree=_(De);_element=_(X);_dir=_(ge,{optional:!0});_currentPadding;_destroyed=new v;indentUnits="px";get level(){return this._level}set level(e){this._setLevelInput(e)}_level;get indent(){return this._indent}set indent(e){this._setIndentInput(e)}_indent=40;constructor(){this._setPadding(),this._dir?.change.pipe(w(this._destroyed)).subscribe(()=>this._setPadding(!0)),this._treeNode._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){let e=(this._treeNode.data&&this._tree._getLevel(this._treeNode.data))??null,i=this._level==null?e:this._level;return typeof i=="number"?`${i*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){let i=this._paddingIndent();if(i!==this._currentPadding||e){let n=this._element.nativeElement,o=this._dir&&this._dir.value==="rtl"?"paddingRight":"paddingLeft",s=o==="paddingLeft"?"paddingRight":"paddingLeft";n.style[o]=i||"",n.style[s]="",this._currentPadding=i}}_setLevelInput(e){this._level=isNaN(e)?null:e,this._setPadding()}_setIndentInput(e){let i=e,n="px";if(typeof e=="string"){let o=e.split(cr);i=o[0],n=o[1]||n}this.indentUnits=n,this._indent=$(i),this._setPadding()}static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:[2,"cdkTreeNodePadding","level",$],indent:[0,"cdkTreeNodePaddingIndent","indent"]}})}return r})(),At=(()=>{class r{_tree=_(De);_treeNode=_(te);recursive=!1;constructor(){}_toggle(){this.recursive?this._tree.toggleDescendants(this._treeNode.data):this._tree.toggle(this._treeNode.data),this._tree._keyManager.focusItem(this._treeNode)}static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["","cdkTreeNodeToggle",""]],hostAttrs:["tabindex","-1"],hostBindings:function(i,n){i&1&&f("click",function(s){return n._toggle(),s.stopPropagation()})("keydown.Enter",function(s){return n._toggle(),s.preventDefault()})("keydown.Space",function(s){return n._toggle(),s.preventDefault()})},inputs:{recursive:[2,"cdkTreeNodeToggleRecursive","recursive",V]}})}return r})();var mn=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=se({type:r});static \u0275inj=re({})}return r})();function dr(r){return!!r._isNoopTreeKeyManager}var fn=(()=>{class r extends te{get tabIndexInputBinding(){return this._tabIndexInputBinding}set tabIndexInputBinding(e){this._tabIndexInputBinding=e}_tabIndexInputBinding;defaultTabIndex=0;_getTabindexAttribute(){return dr(this._tree._keyManager)?this.tabIndexInputBinding:this._tabindex}get disabled(){return this.isDisabled}set disabled(e){this.isDisabled=e}constructor(){super();let e=_(new ri("tabindex"),{optional:!0});this.tabIndexInputBinding=Number(e)||this.defaultTabIndex}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:5,hostBindings:function(i,n){i&1&&f("click",function(){return n._focusItem()}),i&2&&(Be("tabindex",n._getTabindexAttribute()),ae("aria-expanded",n._getAriaExpanded())("aria-level",n.level+1)("aria-posinset",n._getPositionInSet())("aria-setsize",n._getSetSize()))},inputs:{tabIndexInputBinding:[2,"tabIndex","tabIndexInputBinding",e=>e==null?0:$(e)],disabled:[2,"disabled","disabled",V]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["matTreeNode"],features:[B([{provide:te,useExisting:r}]),J]})}return r})(),vn=(()=>{class r extends ht{data;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Se(r)))(n||r)}})();static \u0275dir=E({type:r,selectors:[["","matTreeNodeDef",""]],inputs:{when:[0,"matTreeNodeDefWhen","when"],data:[0,"matTreeNode","data"]},features:[B([{provide:ht,useExisting:r}]),J]})}return r})();var yn=(()=>{class r extends Ft{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Se(r)))(n||r)}})();static \u0275dir=E({type:r,selectors:[["","matTreeNodePadding",""]],inputs:{level:[2,"matTreeNodePadding","level",$],indent:[0,"matTreeNodePaddingIndent","indent"]},features:[B([{provide:Ft,useExisting:r}]),J]})}return r})(),un=(()=>{class r{viewContainer=_(oe);_node=_(Nt,{optional:!0});static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["","matTreeNodeOutlet",""]],features:[B([{provide:dt,useExisting:r}])]})}return r})(),Cn=(()=>{class r extends De{_nodeOutlet=void 0;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Se(r)))(n||r)}})();static \u0275cmp=A({type:r,selectors:[["mat-tree"]],viewQuery:function(i,n){if(i&1&&q(un,7),i&2){let o;z(o=K())&&(n._nodeOutlet=o.first)}},hostAttrs:[1,"mat-tree"],exportAs:["matTree"],features:[B([{provide:De,useExisting:r}]),J],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(i,n){i&1&&Le(0,0)},dependencies:[un],styles:[`.mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-sys-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-sys-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-sys-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height, 48px)}.mat-nested-tree-node{border-bottom-width:0}
`],encapsulation:2})}return r})(),xn=(()=>{class r extends At{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Se(r)))(n||r)}})();static \u0275dir=E({type:r,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:[0,"matTreeNodeToggleRecursive","recursive"]},features:[B([{provide:At,useExisting:r}]),J]})}return r})();var Dn=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=se({type:r});static \u0275inj=re({imports:[mn,It,It]})}return r})();function Bn(r){let t=r.cloneNode(!0),e=t.querySelectorAll("[id]"),i=r.nodeName.toLowerCase();t.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return i==="canvas"?Sn(r,t):(i==="input"||i==="select"||i==="textarea")&&wn(r,t),bn("canvas",r,t,Sn),bn("input, textarea, select",r,t,wn),t}function bn(r,t,e,i){let n=t.querySelectorAll(r);if(n.length){let o=e.querySelectorAll(r);for(let s=0;s<n.length;s++)i(n[s],o[s])}}var pr=0;function wn(r,t){t.type!=="file"&&(t.value=r.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${pr++}`)}function Sn(r,t){let e=t.getContext("2d");if(e)try{e.drawImage(r,0,0)}catch{}}function jt(r){let t=r.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function Vt(r,t,e){let{top:i,bottom:n,left:o,right:s}=r;return e>=i&&e<=n&&t>=o&&t<=s}function Re(r,t,e){r.top+=t,r.bottom=r.top+r.height,r.left+=e,r.right=r.left+r.width}function En(r,t,e,i){let{top:n,right:o,bottom:s,left:a,width:d,height:p}=r,u=d*t,b=p*t;return i>n-b&&i<s+b&&e>a-u&&e<o+u}var pt=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:jt(e)})})}handleScroll(t){let e=Pe(t),i=this.positions.get(e);if(!i)return null;let n=i.scrollPosition,o,s;if(e===this._document){let p=this.getViewportScrollPosition();o=p.top,s=p.left}else o=e.scrollTop,s=e.scrollLeft;let a=n.top-o,d=n.left-s;return this.positions.forEach((p,u)=>{p.clientRect&&e!==u&&e.contains(u)&&Re(p.clientRect,a,d)}),n.top=o,n.left=s,{top:a,left:d}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Vn(r,t){let e=r.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(n=>i.appendChild(n)),i}function Gt(r,t,e){for(let i in t)if(t.hasOwnProperty(i)){let n=t[i];n?r.setProperty(i,n,e?.has(i)?"important":""):r.removeProperty(i)}return r}function be(r,t){let e=t?"":"none";Gt(r.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Pn(r,t,e){Gt(r.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function gt(r,t){return t&&t!="none"?r+" "+t:r}function Mn(r,t){r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.transform=_t(t.left,t.top)}function _t(r,t){return`translate3d(${Math.round(r)}px, ${Math.round(t)}px, 0)`}function Tn(r){let t=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*t}function gr(r){let t=getComputedStyle(r),e=Lt(t,"transition-property"),i=e.find(a=>a==="transform"||a==="all");if(!i)return 0;let n=e.indexOf(i),o=Lt(t,"transition-duration"),s=Lt(t,"transition-delay");return Tn(o[n])+Tn(s[n])}function Lt(r,t){return r.getPropertyValue(t).split(",").map(i=>i.trim())}var _r=new Set(["position"]),Ht=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,n,o,s,a,d,p,u){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=n,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=d,this._zIndex=p,this._renderer=u}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),In(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return gr(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,n;if(i&&t){let o=t.matchSize?this._initialDomRect:null,s=t.viewContainer.createEmbeddedView(i,t.context);s.detectChanges(),n=Vn(s,this._document),this._previewEmbeddedView=s,t.matchSize?Mn(n,o):n.style.transform=_t(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Bn(this._rootElement),Mn(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Gt(n.style,{"pointer-events":"none",margin:In(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},_r),be(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>n.classList.add(o)):n.classList.add(e)),n}};function In(r){return"showPopover"in r}var mr={passive:!0},Rn={passive:!1},ur={passive:!1,capture:!0},fr=800,kn=new Set(["position"]),zt=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=St(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new v;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=ie.EMPTY;_pointerUpSubscription=ie.EMPTY;_scrollSubscription=ie.EMPTY;_resizeSubscription=ie.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>be(e,t)))}_disabled=!1;beforeStarted=new v;started=new v;released=new v;ended=new v;entered=new v;exited=new v;dropped=new v;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,n,o,s,a){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new pt(i),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>Q(i)),this._handles.forEach(i=>be(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=Q(t);return e!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[U(this._renderer,e,"mousedown",this._pointerDown,Rn),U(this._renderer,e,"touchstart",this._pointerDown,mr),U(this._renderer,e,"dragstart",this._nativeDragStart,Rn)]),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Q(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),be(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),be(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let n=Math.abs(e.x-this._pickupPositionOnPage.x),o=Math.abs(e.y-this._pickupPositionOnPage.y);if(n+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),d=this._dropContainer;if(!a){this._endDragSequence(t);return}(!d||!d.isDragging()&&!d.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=i.x-n.x+this._passiveTransform.x,o.y=i.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Te(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=U(this._renderer,e,"selectstart",vr,ur)}),i){let n=this._rootElement,o=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=new Ht(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,e)),Pn(n,!1,kn),this._document.body.appendChild(o.replaceChild(s,n)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),n=Te(e),o=!n&&e.button!==0,s=this._rootElement,a=Pe(e),d=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+fr>Date.now(),p=n?gi(e):pi(e);if(a&&a.draggable&&e.type==="mousedown"&&e.preventDefault(),i||o||d||p)return;if(this._handles.length){let O=s.style;this._rootElementTapHighlight=O.webkitTapHighlightColor||"",O.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(O=>this._updateOnScroll(O)),this._boundaryElement&&(this._boundaryRect=jt(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let b=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:b.x,y:b.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Pn(this._rootElement,!0,kn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(t),o=this._getDragDistance(n),s=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:o,dropPoint:n,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:n,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,s,o,n,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:n}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,t,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let n=a=>{(!a||this._preview&&Pe(a)===this._preview.element&&a.propertyName==="transform")&&(s(),i(),clearTimeout(o))},o=setTimeout(n,e*1.5),s=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=Vn(this._placeholderRef,this._document)):i=Bn(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){let n=e===this._rootElement?null:e,o=n?n.getBoundingClientRect():t,s=Te(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),d=s.pageX-o.left-a.left,p=s.pageY-o.top-a.top;return{x:o.left-t.left+d,y:o.top-t.top+p}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=Te(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,n=i.pageX-e.left,o=i.pageY-e.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=n,a.y=o,a.matrixTransform(s.inverse())}}return{x:n,y:o}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:n}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:d,height:p}=this._getPreviewRect(),u=a.top+s,b=a.bottom-(p-s),O=a.left+o,vt=a.right-(d-o);i=On(i,O,vt),n=On(n,u,b)}return{x:i,y:n}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,n=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-o.x),a=Math.abs(i-o.y);return s>this._config.pointerDirectionChangeThreshold&&(n.x=e>o.x?1:-1,o.x=e),a>this._config.pointerDirectionChangeThreshold&&(n.y=i>o.y?1:-1,o.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,be(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let i=1/this.scale,n=_t(t*i,e*i),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=gt(n,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,n=_t(t,e);this._preview.setTransform(gt(n,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||i.width===0&&i.height===0)return;let o=n.left-i.left,s=i.right-n.right,a=n.top-i.top,d=i.bottom-n.bottom;n.width>i.width?(o>0&&(t+=o),s>0&&(t-=s)):t=0,n.height>i.height?(a>0&&(e+=a),d>0&&(e-=d)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:Te(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=Pe(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Re(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=ze(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return Q(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function On(r,t,e){return Math.max(t,Math.min(e,r))}function Te(r){return r.type[0]==="t"}function vr(r){r.preventDefault()}function Hn(r,t,e){let i=Nn(t,r.length-1),n=Nn(e,r.length-1);if(i===n)return;let o=r[i],s=n<i?-1:1;for(let a=i;a!==n;a+=s)r[a]=r[a+s];r[n]=o}function Nn(r,t){return Math.max(0,Math.min(t,r))}var mt=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,n){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,e,i,n);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",d=o.findIndex(N=>N.drag===t),p=o[s],u=o[d].clientRect,b=p.clientRect,O=d>s?1:-1,vt=this._getItemOffsetPx(u,b,O),rr=this._getSiblingOffsetPx(d,o,O),or=o.slice();return Hn(o,d,s),o.forEach((N,sr)=>{if(or[sr]===N)return;let qt=N.drag===t,yt=qt?vt:rr,Ut=qt?t.getPlaceholderElement():N.drag.getRootElement();N.offset+=yt;let Qt=Math.round(N.offset*(1/N.drag.scale));a?(Ut.style.transform=gt(`translate3d(${Qt}px, 0, 0)`,N.initialTransform),Re(N.clientRect,0,yt)):(Ut.style.transform=gt(`translate3d(0, ${Qt}px, 0)`,N.initialTransform),Re(N.clientRect,yt,0))}),this._previousSwap.overlaps=Vt(b,e,i),this._previousSwap.drag=p.drag,this._previousSwap.delta=a?n.x:n.y,{previousIndex:d,currentIndex:s}}enter(t,e,i,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(t,e,i):n,s=this._activeDraggables,a=s.indexOf(t),d=t.getPlaceholderElement(),p=s[o];if(p===t&&(p=s[o+1]),!p&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(p=s[0]),a>-1&&s.splice(a,1),p&&!this._dragDropRegistry.isDragging(p)){let u=p.getRootElement();u.parentElement.insertBefore(d,u),s.splice(o,0,t)}else this._element.appendChild(d),s.push(t);d.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(n=>n.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Re(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:jt(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){let n=this.orientation==="horizontal",o=n?e.left-t.left:e.top-t.top;return i===-1&&(o+=n?e.width-t.width:e.height-t.height),o}_getSiblingOffsetPx(t,e,i){let n=this.orientation==="horizontal",o=e[t].clientRect,s=e[t+i*-1],a=o[n?"width":"height"]*i;if(s){let d=n?"left":"top",p=n?"right":"bottom";i===-1?a-=s.clientRect[d]-o[p]:a+=o[d]-s.clientRect[p]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,n=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let s=i[i.length-1].clientRect;return n?t>=s.right:e>=s.bottom}else{let s=i[0].clientRect;return n?t<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(t,e,i,n){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:d})=>{if(a===t)return!1;if(n){let p=o?n.x:n.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&p===this._previousSwap.delta)return!1}return o?e>=Math.floor(d.left)&&e<Math.floor(d.right):i>=Math.floor(d.top)&&i<Math.floor(d.bottom)});return s===-1||!this._sortPredicate(s,t)?-1:s}},Kt=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let n=e[i];this._relatedNodes.push([n,n.nextSibling])}this.withItems(t)}sort(t,e,i,n){let o=this._getItemIndexFromPointerPosition(t,e,i),s=this._previousSwap;if(o===-1||this._activeItems[o]===t)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===n.x&&s.deltaY===n.y)return null;let d=this.getItemIndex(t),p=t.getPlaceholderElement(),u=a.getRootElement();o>d?u.after(p):u.before(p),Hn(this._activeItems,d,o);let b=this._getRootNode().elementFromPoint(e,i);return s.deltaX=n.x,s.deltaY=n.y,s.drag=a,s.overlaps=u===b||u.contains(b),{previousIndex:d,currentIndex:o}}enter(t,e,i,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(t,e,i):n;o===-1&&(o=this._getClosestItemIndexToPointer(t,e,i));let s=this._activeItems[o],a=this._activeItems.indexOf(t);a>-1&&this._activeItems.splice(a,1),s&&!this._dragDropRegistry.isDragging(s)?(this._activeItems.splice(o,0,t),s.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[n,o]=this._relatedNodes[i];n.parentNode===t&&n.nextSibling!==o&&(o===null?t.appendChild(n):o.parentNode===t&&t.insertBefore(n,o))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let n=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),o=n?this._activeItems.findIndex(s=>{let a=s.getRootElement();return n===a||a.contains(n)}):-1;return o===-1||!this._sortPredicate(o,t)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=ze(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==t){let{x:d,y:p}=a.getRootElement().getBoundingClientRect(),u=Math.hypot(e-d,i-p);u<n&&(n=u,o=s)}}return o}},Fn=.05,zn=.05,L=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(L||{}),M=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(M||{}),$t=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new v;entered=new v;exited=new v;dropped=new v;sorted=new v;receivingStarted=new v;receivingStopped=new v;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=ie.EMPTY;_verticalScrollDirection=L.NONE;_horizontalScrollDirection=M.NONE;_scrollNode;_stopScrollTimers=new v;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,n,o){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=o;let s=this.element=Q(t);this._document=i,this.withOrientation("vertical").withElementContainer(s),e.registerDropContainer(this),this._parentPositions=new pt(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,n,o,s,a,d={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:o,distance:s,dropPoint:a,event:d})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>t.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof mt&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new Kt(this._document,this._dragDropRegistry);else{let e=new mt(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=Q(this.element),i=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,n){if(this.sortingDisabled||!this._domRect||!En(this._domRect,Fn,e,i))return;let o=this._sortStrategy.sort(t,e,i,n);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,n=L.NONE,o=M.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||i||En(s.clientRect,Fn,t,e)&&([n,o]=yr(a,s.clientRect,this._direction,t,e),(n||o)&&(i=a))}),!n&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),d={width:s,height:a,top:0,right:s,bottom:a,left:0};n=Kn(d,e),o=$n(d,t),i=window}i&&(n!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=o,this._scrollNode=i,(n||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),ei(0,Yt).pipe(w(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===L.UP?t.scrollBy(0,-e):this._verticalScrollDirection===L.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===M.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===M.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&Vt(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(n=>n._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!Vt(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let n=this._getShadowRoot().elementFromPoint(e,i);return n?n===this._container||this._container.contains(n):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=ze(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function Kn(r,t){let{top:e,bottom:i,height:n}=r,o=n*zn;return t>=e-o&&t<=e+o?L.UP:t>=i-o&&t<=i+o?L.DOWN:L.NONE}function $n(r,t){let{left:e,right:i,width:n}=r,o=n*zn;return t>=e-o&&t<=e+o?M.LEFT:t>=i-o&&t<=i+o?M.RIGHT:M.NONE}function yr(r,t,e,i,n){let o=Kn(t,n),s=$n(t,i),a=L.NONE,d=M.NONE;if(o){let p=r.scrollTop;o===L.UP?p>0&&(a=L.UP):r.scrollHeight-p>r.clientHeight&&(a=L.DOWN)}if(s){let p=r.scrollLeft;e==="rtl"?s===M.RIGHT?p<0&&(d=M.RIGHT):r.scrollWidth+p>r.clientWidth&&(d=M.LEFT):s===M.LEFT?p>0&&(d=M.LEFT):r.scrollWidth-p>r.clientWidth&&(d=M.RIGHT)}return[a,d]}var Ie={capture:!0},Bt={passive:!1,capture:!0},Cr=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=A({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,n){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return r})(),jn=(()=>{class r{_ngZone=_(Fe);_document=_(Mt);_styleLoader=_(_i);_renderer=_(Pt).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=St([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new v;pointerUp=new v;scroll=new v;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=U(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,Bt)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(Cr),this._activeDragInstances.update(n=>[...n,e]),this._activeDragInstances().length===1)){let n=i.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this.scroll.next(a),Ie],["selectstart",this._preventDefaultWhileDragging,Bt]];n?s.push(["touchend",o,Ie],["touchcancel",o,Ie]):s.push(["mouseup",o,Ie]),n||s.push(["mousemove",a=>this.pointerMove.next(a),Bt]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,d,p])=>U(this._renderer,this._document,a,d,p))})}}stopDragging(e){this._activeDragInstances.update(i=>{let n=i.indexOf(e);return n>-1?(i.splice(n,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this.scroll];return e&&e!==this._document&&i.push(new Ct(n=>this._ngZone.runOutsideAngular(()=>{let o=U(this._renderer,e,"scroll",s=>{this._activeDragInstances().length&&n.next(s)},Ie);return()=>{o()}}))),Oe(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||r)};static \u0275prov=wt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),xr={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Wt=(()=>{class r{_document=_(Mt);_ngZone=_(Fe);_viewportRuler=_(Ci);_dragDropRegistry=_(jn);_renderer=_(Pt).createRenderer(null,null);constructor(){}createDrag(e,i=xr){return new zt(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new $t(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=wt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),An=new W("CDK_DRAG_PARENT");var Dr=new W("CdkDragHandle");var Gn=new W("CDK_DRAG_CONFIG"),Wn=new W("CdkDropList"),qn=(()=>{class r{element=_(X);dropContainer=_(Wn,{optional:!0,skipSelf:!0});_ngZone=_(Fe);_viewContainerRef=_(oe);_dir=_(ge,{optional:!0});_changeDetectorRef=_(de);_selfHandle=_(Dr,{optional:!0,self:!0});_parentDrag=_(An,{optional:!0,skipSelf:!0});_dragDropRegistry=_(jn);_destroyed=new v;_handles=new j([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new T;released=new T;ended=new T;entered=new T;exited=new T;dropped=new T;moved=new Ct(e=>{let i=this._dragRef.moved.pipe(F(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=_(ni);constructor(){let e=this.dropContainer,i=_(Gn,{optional:!0}),n=_(Wt);this._dragRef=n.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(w(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){oi(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,n=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),n=i.indexOf(e);n>-1&&(i.splice(n,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):Q(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,n=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof n=="object"&&n?n:Tt(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(G(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let n=this._dragDropRegistry.getDragDirectiveForNode(i);if(n){e.withParent(n._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:n,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:d,rootElementSelector:p,previewContainer:u}=e;this.disabled=d??!1,this.dragStartDelay=n||0,i&&(this.lockAxis=i),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),p&&(this.rootElementSelector=p),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.pipe(Y(e=>{let i=e.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Z(e=>Oe(...e.map(i=>i._stateChanges.pipe(ne(i))))),w(this._destroyed)).subscribe(e=>{let i=this._dragRef,n=e.element.nativeElement;e.disabled?i.disableHandle(n):i.enableHandle(n)})}static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){i&2&&Ee("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",V],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",$]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[B([{provide:An,useExisting:r}]),ii]})}return r})(),Ln=new W("CdkDropListGroup");var Un=(()=>{class r{element=_(X);_changeDetectorRef=_(de);_scrollDispatcher=_(yi);_dir=_(ge,{optional:!0});_group=_(Ln,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new v;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=_(ui).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new T;entered=new T;exited=new T;sorted=new T;_unsortedItems=new Set;constructor(){let e=_(Wt),i=_(Gn,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(n,o)=>this.enterPredicate(n.data,o.data),this._dropListRef.sortPredicate=(n,o,s)=>this.sortPredicate(n,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(e._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=r._dropLists.indexOf(this);e>-1&&r._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(ne(this._dir.value),w(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=mi(this.connectedTo).map(n=>{if(typeof n=="string"){let o=r._dropLists.find(s=>s.id===n);return o}return n});if(this._group&&this._group._items.forEach(n=>{i.indexOf(n)===-1&&i.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(n)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Tt(this.autoScrollStep,2),e.connectedTo(i.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),Oe(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:n,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:a}=e;this.disabled=n??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(i){return new(i||r)};static \u0275dir=E({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,n){i&2&&(ae("id",n.id),Ee("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",V],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",V],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",V],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[B([{provide:Ln,useValue:void 0},{provide:Wn,useExisting:r}])]})}return r})();var Qn=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=se({type:r});static \u0275inj=re({providers:[Wt],imports:[xi]})}return r})();function Mr(r,t){if(r&1&&R(0,"img",23),r&2){let e=y();m("src",e.resolvePreview(e.imagePreview),Ae)}}function Tr(r,t){r&1&&(l(0,"mat-icon"),h(1,"add_photo_alternate"),c())}function Ir(r,t){if(r&1){let e=H();l(0,"button",24),f("click",function(){C(e);let n=y();return x(n.removeImage())}),l(1,"mat-icon"),h(2,"delete"),c()()}}function Rr(r,t){r&1&&(l(0,"mat-error"),h(1," Nome \xE9 obrigat\xF3rio "),c())}function kr(r,t){if(r&1&&(l(0,"mat-option",15),h(1),c()),r&2){let e=t.$implicit;m("value",e.id),g(),k(" ",e.name," ")}}function Or(r,t){r&1&&(l(0,"mat-icon"),R(1,"mat-spinner",25),c())}function Nr(r,t){if(r&1&&(l(0,"span"),h(1),c()),r&2){let e=y();g(),P(e.isEdit?"Salvar":"Criar")}}var ut=class r{constructor(t,e,i,n,o){this.fb=t;this.categoryService=e;this.snackBar=i;this.dialogRef=n;this.data=o;this.isEdit=!!o.category,this.categoryForm=this.fb.group({name:["",Di.required],description:[""],parent_id:[null],is_active:[!0]}),this.isEdit&&o.category&&(this.categoryForm.patchValue(o.category),this.imagePreview=o.category.image_url||null)}categoryForm;categories=[];loading=!1;isEdit=!1;imagePreview=null;imageFile=null;ngOnInit(){this.loadCategories()}loadCategories(){this.categoryService.getAllCategories().subscribe({next:t=>{this.isEdit?this.categories=t.filter(e=>e.id!==this.data.category.id&&!this.isChildCategory(e,this.data.category.id)):this.categories=t},error:t=>{console.error("Erro ao carregar categorias:",t),this.snackBar.open("Erro ao carregar categorias","Fechar",{duration:3e3})}})}isChildCategory(t,e){if(!t.parent_id)return!1;if(t.parent_id===e)return!0;let i=this.categories.find(n=>n.id===t.parent_id);return i?this.isChildCategory(i,e):!1}onImageSelected(t){let e=t.target.files?.[0];if(e){this.imageFile=e;let i=new FileReader;i.onload=()=>{this.imagePreview=i.result},i.readAsDataURL(e)}}removeImage(){this.imageFile=null,this.imagePreview=null,this.isEdit&&this.data.category?.image_url&&this.categoryService.deleteImage(this.data.category?.id||0).subscribe()}onSubmit(){if(this.categoryForm.valid){this.loading=!0;let t=this.categoryForm.value,e={name:t.name,description:t.description||void 0,parent_id:t.parent_id===null||t.parent_id===void 0||t.parent_id===""?void 0:Number(t.parent_id),is_active:!!t.is_active};this.imageFile&&(e.image=this.imageFile),(this.isEdit?this.categoryService.updateCategory(ke({id:this.data.category.id},e)):this.categoryService.createCategory(e)).subscribe({next:()=>{this.dialogRef.close(!0)},error:n=>{console.error("Erro ao salvar categoria:",n);let o=n?.error?.message,s=n?.error?.errors,a="Erro ao salvar categoria";if(o&&(a=o),s){let d=Object.values(s)[0];d&&d.length&&(a=d[0])}this.snackBar.open(a,"Fechar",{duration:4e3}),this.loading=!1}})}}resolvePreview(t){if(!t)return"";if(t.startsWith("data:")||t.startsWith("http://")||t.startsWith("https://"))return t;if(t.startsWith("/storage/")||t.startsWith("storage/")){let e=He.apiUrl.replace(/\/api$/,""),i=t.startsWith("/")?t:`/${t}`;return`${e}${i}`}return t}static \u0275fac=function(e){return new(e||r)(I(Ti),I(xe),I(je),I(nt),I(rt))};static \u0275cmp=A({type:r,selectors:[["app-category-form-dialog"]],decls:41,vars:14,consts:[["fileInput",""],["mat-dialog-title",""],[3,"ngSubmit","formGroup"],[1,"form-container"],[1,"image-upload"],[1,"preview",3,"click"],["alt","Preview",3,"src",4,"ngIf"],[4,"ngIf"],[1,"overlay"],["type","file","accept","image/*",2,"display","none",3,"change"],["type","button","mat-icon-button","","color","warn",3,"click",4,"ngIf"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","name","required",""],["formControlName","parent_id"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","description","rows","3"],[1,"form-row","status-row"],["formControlName","is_active","color","primary"],["align","end"],["type","button","mat-button","",3,"click","disabled"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["alt","Preview",3,"src"],["type","button","mat-icon-button","","color","warn",3,"click"],["diameter","20"]],template:function(e,i){if(e&1){let n=H();l(0,"h2",1),h(1),c(),l(2,"form",2),f("ngSubmit",function(){return C(n),x(i.onSubmit())}),l(3,"mat-dialog-content")(4,"div",3)(5,"div",4)(6,"div",5),f("click",function(){C(n);let s=ee(13);return x(s.click())}),D(7,Mr,1,1,"img",6)(8,Tr,2,0,"mat-icon",7),l(9,"div",8)(10,"mat-icon"),h(11,"edit"),c()()(),l(12,"input",9,0),f("change",function(s){return C(n),x(i.onImageSelected(s))}),c(),D(14,Ir,3,0,"button",10),c(),l(15,"div",11)(16,"mat-form-field",12)(17,"mat-label"),h(18,"Nome"),c(),R(19,"input",13),D(20,Rr,2,0,"mat-error",7),c(),l(21,"mat-form-field",12)(22,"mat-label"),h(23,"Categoria Pai"),c(),l(24,"mat-select",14)(25,"mat-option",15),h(26,"Nenhuma"),c(),D(27,kr,2,2,"mat-option",16),c()()(),l(28,"mat-form-field",12)(29,"mat-label"),h(30,"Descri\xE7\xE3o"),c(),R(31,"textarea",17),c(),l(32,"div",18)(33,"mat-slide-toggle",19),h(34," Categoria Ativa "),c()()()(),l(35,"mat-dialog-actions",20)(36,"button",21),f("click",function(){return C(n),x(i.dialogRef.close())}),h(37," Cancelar "),c(),l(38,"button",22),D(39,Or,2,0,"mat-icon",7)(40,Nr,2,1,"span",7),c()()()}if(e&2){let n;g(),k("",i.isEdit?"Editar":"Nova"," Categoria"),g(),m("formGroup",i.categoryForm),g(4),Ee("has-image",i.imagePreview),g(),m("ngIf",i.imagePreview),g(),m("ngIf",!i.imagePreview),g(6),m("ngIf",i.imagePreview),g(6),m("ngIf",(n=i.categoryForm.get("name"))==null?null:n.hasError("required")),g(5),m("value",null),g(2),m("ngForOf",i.categories),g(9),m("disabled",i.loading),g(2),m("disabled",i.categoryForm.invalid||i.loading),g(),m("ngIf",i.loading),g(),m("ngIf",!i.loading)}},dependencies:[pe,Ve,he,Ri,Si,We,qe,bi,Mi,Ei,Pi,Ce,ot,at,st,me,_e,$e,Ye,Ze,Qe,Qi,Je,Xe,et,Xi,Yi,dn,cn,ye,ve,fe,ue,tt,Ge],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px 0}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.form-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1}.status-row[_ngcontent-%COMP%]{margin-top:8px}.image-upload[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.preview[_ngcontent-%COMP%]{width:150px;height:150px;border:2px dashed #ccc;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;overflow:hidden}.preview.has-image[_ngcontent-%COMP%]{border-style:solid}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.preview[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s}.preview[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.preview[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}@media (max-width: 600px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.preview[_ngcontent-%COMP%]{width:100px;height:100px}}"]})};function Fr(r,t){r&1&&(l(0,"div",7),R(1,"mat-spinner",8),l(2,"p"),h(3,"Carregando estat\xEDsticas..."),c()())}function Ar(r,t){if(r&1&&(l(0,"p"),h(1),c()),r&2){let e=y(2);g(),P(e.data.category.description)}}function Lr(r,t){if(r&1&&(l(0,"div",9)(1,"div",10)(2,"h3"),h(3),c(),D(4,Ar,2,1,"p",11),c(),R(5,"mat-divider"),l(6,"div",12)(7,"div",13)(8,"div",14)(9,"mat-icon"),h(10,"inventory_2"),c()(),l(11,"div",15)(12,"span",16),h(13,"Total de Produtos"),c(),l(14,"span",17),h(15),c()()(),l(16,"div",13)(17,"div",14)(18,"mat-icon"),h(19,"check_circle"),c()(),l(20,"div",15)(21,"span",16),h(22,"Produtos Ativos"),c(),l(23,"span",17),h(24),c()()(),l(25,"div",13)(26,"div",18)(27,"mat-icon"),h(28,"warning"),c()(),l(29,"div",15)(30,"span",16),h(31,"Estoque Baixo"),c(),l(32,"span",17),h(33),c()()(),l(34,"div",13)(35,"div",14)(36,"mat-icon"),h(37,"payments"),c()(),l(38,"div",15)(39,"span",16),h(40,"Valor Total em Estoque"),c(),l(41,"span",17),h(42),c()()()()()),r&2){let e=y();g(3),P(e.data.category.name),g(),m("ngIf",e.data.category.description),g(11),P(e.stats.products_count),g(9),P(e.stats.active_products_count),g(9),P(e.stats.low_stock_count),g(9),P(e.formatCurrency(e.stats.total_value))}}function Br(r,t){r&1&&(l(0,"div",19)(1,"mat-icon",20),h(2,"error"),c(),l(3,"p"),h(4,"Erro ao carregar estat\xEDsticas"),c()())}var ft=class r{constructor(t,e,i){this.dialogRef=t;this.categoryService=e;this.data=i}loading=!0;error=!1;stats=null;ngOnInit(){this.loadStats()}loadStats(){this.categoryService.getCategoryStats(this.data.category.id).subscribe({next:t=>{this.stats=t,this.loading=!1},error:t=>{console.error("Erro ao carregar estat\xEDsticas:",t),this.error=!0,this.loading=!1}})}formatCurrency(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}static \u0275fac=function(e){return new(e||r)(I(nt),I(xe),I(rt))};static \u0275cmp=A({type:r,selectors:[["app-category-stats-dialog"]],decls:10,vars:3,consts:[["mat-dialog-title",""],[1,"stats-container"],["class","loading-state",4,"ngIf"],["class","stats-content",4,"ngIf"],["class","error-state",4,"ngIf"],["align","end"],["mat-button","",3,"click"],[1,"loading-state"],["diameter","40"],[1,"stats-content"],[1,"stats-header"],[4,"ngIf"],[1,"stats-section"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-label"],[1,"stat-value"],[1,"stat-icon","warning"],[1,"error-state"],["color","warn"]],template:function(e,i){e&1&&(l(0,"h2",0),h(1,"Estat\xEDsticas da Categoria"),c(),l(2,"mat-dialog-content")(3,"div",1),D(4,Fr,4,0,"div",2)(5,Lr,43,6,"div",3)(6,Br,5,0,"div",4),c()(),l(7,"mat-dialog-actions",5)(8,"button",6),f("click",function(){return i.dialogRef.close()}),h(9,"Fechar"),c()()),e&2&&(g(4),m("ngIf",i.loading),g(),m("ngIf",!i.loading&&i.stats),g(),m("ngIf",!i.loading&&i.error))},dependencies:[pe,he,Ce,ot,at,st,me,_e,fe,ue,ye,ve,an,sn],styles:[".stats-container[_ngcontent-%COMP%]{min-width:400px;padding:16px 0}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;text-align:center}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:16px 0 0;color:#666}.error-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.stats-header[_ngcontent-%COMP%]{margin-bottom:24px;text-align:center}.stats-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#333}.stats-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;color:#666}.stats-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:24px;margin:24px 0}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center}.stat-icon.warning[_ngcontent-%COMP%]{background-color:#fff3e0}.stat-icon.warning[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666}.stat-value[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#333}@media (max-width: 600px){.stats-container[_ngcontent-%COMP%]{min-width:auto}.stats-section[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Vr=()=>[10,25,50,100];function Hr(r,t){r&1&&(l(0,"div",18),R(1,"mat-spinner",19),l(2,"p"),h(3,"Carregando categorias..."),c()())}function zr(r,t){r&1&&(l(0,"th",34),h(1,"Imagem"),c())}function Kr(r,t){if(r&1&&(l(0,"td",35)(1,"div",36),R(2,"img",37),c()()),r&2){let e=t.$implicit,i=y(2);g(2),m("src",i.getImageUrl(e.image_url),Ae)("alt",e.name)}}function $r(r,t){r&1&&(l(0,"th",38),h(1,"Nome"),c())}function jr(r,t){if(r&1&&(l(0,"td",35)(1,"div",39),h(2),l(3,"small",40),h(4),c()()()),r&2){let e=t.$implicit;g(2),k(" ",e.name," "),g(2),P(e.slug)}}function Gr(r,t){r&1&&(l(0,"th",38),h(1,"Produtos"),c())}function Wr(r,t){if(r&1){let e=H();l(0,"td",35)(1,"span",41),h(2),c(),l(3,"button",42),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.showStats(n))}),l(4,"mat-icon"),h(5,"inventory_2"),c()()()}if(r&2){let e=t.$implicit;g(2),P(e.products_count)}}function qr(r,t){r&1&&(l(0,"th",34),h(1,"Status"),c())}function Ur(r,t){if(r&1&&(l(0,"td",35)(1,"mat-chip",43),h(2),c()()),r&2){let e=t.$implicit;g(),m("color",e.is_active?"primary":"warn"),g(),k(" ",e.is_active?"Ativa":"Inativa"," ")}}function Qr(r,t){r&1&&(l(0,"th",34),h(1,"A\xE7\xF5es"),c())}function Zr(r,t){if(r&1){let e=H();l(0,"button",49),f("click",function(){let n=C(e).$implicit,o=y().$implicit,s=y(2);return x(s.moveCategory(o,n.id))}),h(1),c()}if(r&2){let e=t.$implicit,i=y().$implicit;m("disabled",e.id===i.id),g(),k(" ",e.name," ")}}function Yr(r,t){if(r&1){let e=H();l(0,"td",35)(1,"button",44)(2,"mat-icon"),h(3,"more_vert"),c()(),l(4,"mat-menu",null,0)(6,"button",45),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.openCategoryDialog(n))}),l(7,"mat-icon"),h(8,"edit"),c(),l(9,"span"),h(10,"Editar"),c()(),l(11,"button",46)(12,"mat-icon"),h(13,"drive_file_move"),c(),l(14,"span"),h(15,"Mover para"),c()(),l(16,"button",45),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.toggleStatus(n))}),l(17,"mat-icon"),h(18),c(),l(19,"span"),h(20),c()(),l(21,"button",47),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.deleteCategory(n))}),l(22,"mat-icon"),h(23,"delete"),c(),l(24,"span"),h(25,"Excluir"),c()()(),l(26,"mat-menu",null,1)(28,"button",45),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.moveCategory(n,null))}),l(29,"mat-icon"),h(30,"home"),c(),l(31,"span"),h(32,"Raiz"),c()(),D(33,Zr,2,2,"button",48),c()()}if(r&2){let e=t.$implicit,i=ee(5),n=ee(27),o=y(2);g(),m("matMenuTriggerFor",i),g(10),m("matMenuTriggerFor",n),g(7),P(e.is_active?"visibility_off":"visibility"),g(2),P(e.is_active?"Desativar":"Ativar"),g(13),m("ngForOf",o.categories)}}function Xr(r,t){r&1&&R(0,"tr",50)}function Jr(r,t){if(r&1&&R(0,"tr",51),r&2){let e=y(2);m("cdkDragDisabled",e.viewMode!=="list")}}function eo(r,t){r&1&&(l(0,"div",52)(1,"mat-icon"),h(2,"category"),c(),l(3,"p"),h(4,"Nenhuma categoria encontrada"),c()())}function to(r,t){if(r&1){let e=H();l(0,"mat-card",20)(1,"mat-card-content")(2,"table",21),f("matSortChange",function(n){C(e);let o=y();return x(o.onSortChange(n))})("cdkDropListDropped",function(n){C(e);let o=y();return x(o.onDrop(n))}),le(3,22),D(4,zr,2,0,"th",23)(5,Kr,3,2,"td",24),ce(),le(6,25),D(7,$r,2,0,"th",26)(8,jr,5,2,"td",24),ce(),le(9,27),D(10,Gr,2,0,"th",26)(11,Wr,6,1,"td",24),ce(),le(12,28),D(13,qr,2,0,"th",23)(14,Ur,3,2,"td",24),ce(),le(15,29),D(16,Qr,2,0,"th",23)(17,Yr,34,5,"td",24),ce(),D(18,Xr,1,0,"tr",30)(19,Jr,1,1,"tr",31),c(),D(20,eo,5,0,"div",32),l(21,"mat-paginator",33),f("page",function(n){C(e);let o=y();return x(o.onPageChange(n))}),c()()()}if(r&2){let e=y();g(2),m("dataSource",e.categories),g(16),m("matHeaderRowDef",e.displayedColumns),g(),m("matRowDefColumns",e.displayedColumns),g(),m("ngIf",e.categories.length===0),g(),m("length",e.totalItems)("pageSize",e.pageSize)("pageIndex",e.currentPage)("pageSizeOptions",di(8,Vr))}}function io(r,t){if(r&1){let e=H();l(0,"mat-tree-node",57)(1,"button",58)(2,"mat-icon"),h(3),c()(),l(4,"span",59),h(5),l(6,"small"),h(7),c()(),l(8,"button",60)(9,"mat-icon"),h(10,"more_vert"),c()(),l(11,"mat-menu",null,2)(13,"button",45),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.openCategoryDialog(n))}),l(14,"mat-icon"),h(15,"edit"),c(),l(16,"span"),h(17,"Editar"),c()(),l(18,"button",45),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.showStats(n))}),l(19,"mat-icon"),h(20,"analytics"),c(),l(21,"span"),h(22,"Estat\xEDsticas"),c()(),l(23,"button",45),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.openCategoryDialog(void 0,n.id))}),l(24,"mat-icon"),h(25,"add"),c(),l(26,"span"),h(27,"Adicionar Subcategoria"),c()()()()}if(r&2){let e=t.$implicit,i=ee(12),n=y(2);g(3),k(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),g(2),k(" ",e.name," "),g(2),k("(",e.products_count," produtos)"),g(),m("matMenuTriggerFor",i)}}function no(r,t){if(r&1){let e=H();l(0,"mat-tree-node",57),R(1,"button",61),l(2,"span",59),h(3),l(4,"small"),h(5),c()(),l(6,"button",60)(7,"mat-icon"),h(8,"more_vert"),c()(),l(9,"mat-menu",null,2)(11,"button",45),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.openCategoryDialog(n))}),l(12,"mat-icon"),h(13,"edit"),c(),l(14,"span"),h(15,"Editar"),c()(),l(16,"button",45),f("click",function(){let n=C(e).$implicit,o=y(2);return x(o.showStats(n))}),l(17,"mat-icon"),h(18,"analytics"),c(),l(19,"span"),h(20,"Estat\xEDsticas"),c()()()()}if(r&2){let e=t.$implicit,i=ee(10);g(3),k(" ",e.name," "),g(2),k("(",e.products_count," produtos)"),g(),m("matMenuTriggerFor",i)}}function ro(r,t){r&1&&(l(0,"div",52)(1,"mat-icon"),h(2,"account_tree"),c(),l(3,"p"),h(4,"Nenhuma categoria encontrada"),c()())}function oo(r,t){if(r&1&&(l(0,"mat-card",53)(1,"mat-card-content")(2,"mat-tree",54),D(3,io,28,4,"mat-tree-node",55)(4,no,21,3,"mat-tree-node",56),c(),D(5,ro,5,0,"div",32),c()()),r&2){let e=y();g(2),m("dataSource",e.categoryTree)("treeControl",e.treeControl),g(),m("matTreeNodeDefWhen",e.hasChild),g(2),m("ngIf",e.categoryTree.length===0)}}var nr=class r{constructor(t,e,i){this.categoryService=t;this.dialog=e;this.snackBar=i;this.searchSubject.pipe(ti(300),Ne(),w(this.destroy$)).subscribe(()=>{this.currentPage=0,this.loadCategories()})}displayedColumns=["image","name","products_count","status","actions"];categories=[];categoryTree=[];totalItems=0;pageSize=10;currentPage=0;loading=!0;searchTerm="";showInactive=!1;viewMode="list";paginator;sort;table;treeControl=new ct(t=>t.level,t=>t.expandable);hasChild=(t,e)=>e.expandable;destroy$=new v;searchSubject=new v;getImageUrl(t){if(!t)return"assets/images/no-image.jpg";if(t.startsWith("http://")||t.startsWith("https://"))return t;if(t.startsWith("/storage/")||t.startsWith("storage/")){let e=He.apiUrl.replace(/\/api$/,""),i=t.startsWith("/")?t:`/${t}`;return`${e}${i}`}return t}ngOnInit(){this.loadCategories(),this.loadCategoryTree()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadCategories(){this.loading=!0;let t={page:this.currentPage+1,per_page:this.pageSize,search:this.searchTerm||void 0,is_active:this.showInactive?void 0:!0,sort_by:this.sort?.active,sort_order:this.sort?.direction||void 0};this.categoryService.getCategories(t).pipe(w(this.destroy$)).subscribe({next:e=>{this.categories=e.data,this.totalItems=e.total,this.loading=!1},error:e=>{console.error("Erro ao carregar categorias:",e),this.snackBar.open("Erro ao carregar categorias","Fechar",{duration:3e3}),this.loading=!1}})}loadCategoryTree(){this.categoryService.getCategoryTree().pipe(w(this.destroy$)).subscribe({next:t=>{this.categoryTree=t},error:t=>{console.error("Erro ao carregar \xE1rvore de categorias:",t)}})}onSearch(t){this.searchTerm=t.target.value,this.searchSubject.next(this.searchTerm)}onPageChange(t){this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.loadCategories()}onSortChange(t){this.loadCategories()}toggleFilters(t){t==="inactive"&&(this.showInactive=!this.showInactive),this.currentPage=0,this.loadCategories()}toggleViewMode(){this.viewMode=this.viewMode==="list"?"tree":"list",this.viewMode==="tree"&&this.loadCategoryTree()}openCategoryDialog(t,e){this.dialog.open(ut,{width:"600px",data:{category:t,parentId:e}}).afterClosed().subscribe(n=>{n&&(this.loadCategories(),this.loadCategoryTree(),this.snackBar.open(t?"Categoria atualizada com sucesso":"Categoria criada com sucesso","Fechar",{duration:3e3}))})}deleteCategory(t){this.dialog.open(gn,{width:"400px",data:{title:"Confirmar Exclus\xE3o",message:`Deseja realmente excluir a categoria "${t.name}"?`,confirmText:"Excluir",cancelText:"Cancelar"}}).afterClosed().subscribe(i=>{i&&this.categoryService.deleteCategory(t.id).pipe(w(this.destroy$)).subscribe({next:()=>{this.loadCategories(),this.loadCategoryTree(),this.snackBar.open("Categoria exclu\xEDda com sucesso","Fechar",{duration:3e3})},error:n=>{console.error("Erro ao excluir categoria:",n),this.snackBar.open("Erro ao excluir categoria","Fechar",{duration:3e3})}})})}toggleStatus(t){this.categoryService.toggleStatus(t.id).pipe(w(this.destroy$)).subscribe({next:()=>{this.loadCategories(),this.loadCategoryTree(),this.snackBar.open(`Categoria ${t.is_active?"desativada":"ativada"} com sucesso`,"Fechar",{duration:3e3})},error:e=>{console.error("Erro ao alterar status da categoria:",e),this.snackBar.open("Erro ao alterar status da categoria","Fechar",{duration:3e3})}})}showStats(t){this.dialog.open(ft,{width:"500px",data:{category:t}})}onDrop(t){let{previousIndex:e,currentIndex:i}=t;if(e===i)return;let n=this.categories[e];this.categories.splice(e,1),this.categories.splice(i,0,n);let o=this.categories.map((s,a)=>({id:s.id,position:a+1}));this.categoryService.reorderCategories(o).pipe(w(this.destroy$)).subscribe({next:()=>{this.snackBar.open("Categorias reordenadas com sucesso!","Fechar",{duration:2e3}),this.loadCategories(),this.loadCategoryTree()},error:s=>{console.error("Erro ao reordenar categorias:",s),this.snackBar.open("Erro ao reordenar categorias","Fechar",{duration:3e3}),this.loadCategories()}})}moveCategory(t,e){this.categoryService.moveCategory(t.id,e).pipe(w(this.destroy$)).subscribe({next:()=>{this.loadCategories(),this.loadCategoryTree(),this.snackBar.open("Categoria movida com sucesso","Fechar",{duration:3e3})},error:i=>{console.error("Erro ao mover categoria:",i),this.snackBar.open("Erro ao mover categoria","Fechar",{duration:3e3})}})}static \u0275fac=function(e){return new(e||r)(I(xe),I(ln),I(je))};static \u0275cmp=A({type:r,selectors:[["app-categorias"]],viewQuery:function(e,i){if(e&1&&(q(it,5),q(lt,5),q(Ue,5)),e&2){let n;z(n=K())&&(i.paginator=n.first),z(n=K())&&(i.sort=n.first),z(n=K())&&(i.table=n.first)}},decls:29,vars:8,consts:[["menu","matMenu"],["moveMenu","matMenu"],["treeMenu","matMenu"],[1,"categorias-container"],[1,"categorias-header"],[1,"header-actions"],["mat-button","",3,"click","color"],["mat-raised-button","","color","accent",3,"click"],[1,"filters-card"],[1,"filters-container"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Nome ou descri\xE7\xE3o",3,"ngModelChange","keyup","ngModel"],["matSuffix",""],[1,"filter-toggles"],[3,"selectionChange","selected"],["class","loading-container",4,"ngIf"],["class","table-card",4,"ngIf"],["class","tree-card",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"table-card"],["mat-table","","matSort","","cdkDropList","",3,"matSortChange","cdkDropListDropped","dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","products_count"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","cdkDrag","",3,"cdkDragDisabled",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"category-image"],["width","40","height","40",3,"src","alt"],["mat-header-cell","","mat-sort-header",""],[1,"category-name"],[1,"category-slug"],[1,"products-count"],["mat-icon-button","","color","primary","matTooltip","Ver produtos desta categoria",3,"click"],["selected","",3,"color"],["mat-icon-button","","aria-label","A\xE7\xF5es",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","","color","warn",3,"click"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click","disabled"],["mat-header-row",""],["mat-row","","cdkDrag","",3,"cdkDragDisabled"],[1,"empty-state"],[1,"tree-card"],[3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"tree-node-content"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-icon-button","","disabled",""]],template:function(e,i){e&1&&(l(0,"div",3)(1,"div",4)(2,"h1"),h(3,"Categorias"),c(),l(4,"div",5)(5,"button",6),f("click",function(){return i.toggleViewMode()}),l(6,"mat-icon"),h(7),c(),h(8),c(),l(9,"button",7),f("click",function(){return i.openCategoryDialog()}),l(10,"mat-icon"),h(11,"add"),c(),h(12," Nova Categoria "),c()()(),l(13,"mat-card",8)(14,"mat-card-content")(15,"div",9)(16,"mat-form-field",10)(17,"mat-label"),h(18,"Buscar categorias"),c(),l(19,"input",11),ci("ngModelChange",function(o){return li(i.searchTerm,o)||(i.searchTerm=o),o}),f("keyup",function(o){return i.onSearch(o)}),c(),l(20,"mat-icon",12),h(21,"search"),c()(),l(22,"div",13)(23,"mat-chip-listbox")(24,"mat-chip-option",14),f("selectionChange",function(){return i.toggleFilters("inactive")}),h(25," Mostrar Inativas "),c()()()()()(),D(26,Hr,4,0,"div",15)(27,to,22,9,"mat-card",16)(28,oo,6,4,"mat-card",17),c()),e&2&&(g(5),m("color",i.viewMode==="tree"?"accent":""),g(2),P(i.viewMode==="list"?"account_tree":"list"),g(),k(" ",i.viewMode==="list"?"Visualiza\xE7\xE3o em \xC1rvore":"Visualiza\xE7\xE3o em Lista"," "),g(11),ai("ngModel",i.searchTerm),g(5),m("selected",i.showInactive),g(2),m("ngIf",i.loading),g(),m("ngIf",!i.loading&&i.viewMode==="list"),g(),m("ngIf",!i.loading&&i.viewMode==="tree"))},dependencies:[pe,Ve,he,Ii,We,qe,wi,Bi,Ai,Li,Ui,Ue,Hi,ji,zi,Vi,Gi,Ki,$i,Wi,qi,en,it,pn,lt,hn,Je,Xe,Ze,Qe,Zi,Ye,me,_e,$e,fe,ue,Fi,Oi,ki,Ni,Ce,Ge,et,on,tn,rn,nn,tt,Ji,ye,ve,Dn,vn,yn,xn,Cn,fn,Qn,Un,qn],styles:[".categorias-container[_ngcontent-%COMP%]{padding:20px}.categorias-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.categorias-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.filters-card[_ngcontent-%COMP%]{margin-bottom:20px}.filters-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;align-items:center}.search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.filter-toggles[_ngcontent-%COMP%]{display:flex;gap:10px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:#666}.table-card[_ngcontent-%COMP%]{overflow:hidden}table[_ngcontent-%COMP%]{width:100%}.mat-mdc-row[_ngcontent-%COMP%]{cursor:move}.mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.category-image[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:4px;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5}.category-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.category-name[_ngcontent-%COMP%]{display:flex;flex-direction:column}.category-slug[_ngcontent-%COMP%]{color:#666;font-size:12px}.tree-card[_ngcontent-%COMP%]{padding:16px}.tree-node-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.tree-node-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:#666}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.mat-mdc-row[_ngcontent-%COMP%]:last-child{border:none}.table-card.cdk-drop-list-dragging[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}@media (max-width: 960px){.categorias-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:16px}.header-actions[_ngcontent-%COMP%]{justify-content:flex-end}.filters-container[_ngcontent-%COMP%]{flex-direction:column}.search-field[_ngcontent-%COMP%]{width:100%}.filter-toggles[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}}[_nghost-%COMP%]     .mat-mdc-card{border-radius:8px;box-shadow:0 2px 4px #0000001a}[_nghost-%COMP%]     .mat-mdc-card-header{padding:16px}[_nghost-%COMP%]     .mat-mdc-card-content{padding:0 16px 16px}.mat-mdc-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.category-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .2s ease}.category-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}"]})};export{nr as CategoriasComponent};
