import{a as $}from"./chunk-UV7RJRPZ.js";import{a as R}from"./chunk-VKLNLCGT.js";import{a as U,b as F}from"./chunk-LUD35HDA.js";import{_ as T}from"./chunk-H4HZ2WXW.js";import"./chunk-L7YZATBO.js";import"./chunk-JEC3ZXLW.js";import{b as V,g as j,j as W,l as N,u as A,z as Q}from"./chunk-7Q6V27MS.js";import{a as E,d as z,h as D}from"./chunk-UIAL7XLZ.js";import{$a as x,$b as O,Bb as e,Cb as i,Db as _,Hb as h,Hc as S,Ic as I,Kb as b,Lb as d,Rc as q,Ua as C,Wa as c,Wb as o,Xb as u,Yb as f,Zb as M,ac as w,bc as k,dd as v,gb as P,lb as g,sb as l,ta as p,ua as s}from"./chunk-QUOLBKI4.js";function B(r,n){r&1&&(e(0,"div",6),_(1,"div",7),e(2,"p"),o(3,"Carregando combo..."),i()())}function H(r,n){if(r&1&&(e(0,"div",8),o(1),i()),r&2){let t=d();c(),f(" ",t.error," ")}}function Y(r,n){if(r&1&&(e(0,"div",39),o(1),i()),r&2){let t=d(2);c(),f(" -",t.getDiscountPercentage(t.combo),"% ")}}function G(r,n){if(r&1&&(e(0,"div",40),o(1),i()),r&2){let t=d(2);c(),f(" ",t.formatPrice(t.combo.original_price)," ")}}function J(r,n){if(r&1&&(e(0,"div",41)(1,"mat-icon"),o(2,"savings"),i(),e(3,"span"),o(4),i()()),r&2){let t=d(2);c(4),f("Economize ",t.formatPrice(t.combo.original_price-t.combo.price),"")}}function K(r,n){if(r&1&&(e(0,"p",42),o(1),i()),r&2){let t=d(2);c(),f(" ",t.combo.description," ")}}function X(r,n){if(r&1&&(e(0,"div",43)(1,"div",44),_(2,"img",45),i(),e(3,"div",46)(4,"h3",47),o(5),i(),e(6,"div",48)(7,"mat-icon"),o(8,"shopping_cart"),i(),e(9,"span"),o(10),i()()(),e(11,"div",49)(12,"span",50),o(13),i()()()),r&2){let t=n.$implicit,a=d(2);c(2),l("src",a.getProductImage(t),C)("alt",a.getProductName(t)),c(3),u(a.getProductName(t)),c(5),M("",a.getProductQuantity(t)," ",a.getProductUnit(t),""),c(3),u(a.formatPrice(a.getProductPrice(t)))}}function Z(r,n){if(r&1){let t=h();e(0,"div",9)(1,"nav",10)(2,"a",11),o(3,"Home"),i(),e(4,"span"),o(5,">"),i(),e(6,"a",12),o(7,"Combos"),i(),e(8,"span"),o(9,">"),i(),e(10,"span"),o(11),i()(),e(12,"div",13)(13,"div",14)(14,"div",15),g(15,Y,2,1,"div",16),e(16,"div",17),_(17,"img",18),i()()(),e(18,"div",19)(19,"div",20)(20,"h1",21),o(21),i(),e(22,"div",22),g(23,G,2,1,"div",23),e(24,"div",24),o(25),i(),g(26,J,5,1,"div",25),i(),g(27,K,2,1,"p",26),i()()(),e(28,"div",27)(29,"h2",28)(30,"mat-icon"),o(31,"inventory_2"),i(),e(32,"span"),o(33,"Produtos Inclusos"),i()(),e(34,"div",29),g(35,X,14,6,"div",30),i()(),e(36,"div",31)(37,"div",32)(38,"label",33),o(39,"Quantidade:"),i(),e(40,"div",34)(41,"button",35),b("click",function(){p(t);let m=d();return s(m.decrementQuantity())}),e(42,"mat-icon"),o(43,"remove"),i()(),e(44,"input",36),k("ngModelChange",function(m){p(t);let y=d();return w(y.quantity,m)||(y.quantity=m),s(m)}),i(),e(45,"button",37),b("click",function(){p(t);let m=d();return s(m.incrementQuantity())}),e(46,"mat-icon"),o(47,"add"),i()()()(),e(48,"button",38),b("click",function(){p(t);let m=d();return s(m.onAddToCart())}),e(49,"mat-icon"),o(50,"add_shopping_cart"),i(),e(51,"span"),o(52,"Adicionar ao Carrinho"),i()()()()}if(r&2){let t=d();c(11),u(t.combo.name),c(4),l("ngIf",t.getDiscountPercentage(t.combo)>0),c(2),l("src",t.getComboImage(t.combo),C)("alt",t.combo.name),c(4),u(t.combo.name),c(2),l("ngIf",t.combo.original_price&&t.combo.original_price>t.combo.price),c(2),f(" ",t.formatPrice(t.combo.price)," "),c(),l("ngIf",t.combo.original_price&&t.combo.original_price>t.combo.price),c(),l("ngIf",t.combo.description),c(8),l("ngForOf",t.combo.products),c(6),l("disabled",t.quantity<=1),c(3),O("ngModel",t.quantity)}}function tt(r,n){if(r&1){let t=h();e(0,"div",51)(1,"div",52)(2,"button",53),b("click",function(){p(t);let m=d();return s(m.decrementQuantity())}),e(3,"mat-icon"),o(4,"remove"),i()(),e(5,"span",54),o(6),i(),e(7,"button",55),b("click",function(){p(t);let m=d();return s(m.incrementQuantity())}),e(8,"mat-icon"),o(9,"add"),i()()(),e(10,"button",56),b("click",function(){p(t);let m=d();return s(m.onAddToCart())}),e(11,"mat-icon"),o(12,"add_shopping_cart"),i(),e(13,"span"),o(14,"Adicionar"),i(),e(15,"span",57),o(16),i()()()}if(r&2){let t=d();c(2),l("disabled",t.quantity<=1),c(4),u(t.quantity),c(10),u(t.formatPrice(t.combo.price*t.quantity))}}var L=class r{constructor(n,t,a){this.comboService=n;this.cartService=t;this.route=a}combo=null;loading=!0;error=null;quantity=1;ngOnInit(){this.route.params.subscribe(n=>{let t=+n.id;this.loadCombo(t)})}loadCombo(n){this.loading=!0,this.error=null,this.comboService.getCombo(n).subscribe({next:t=>{this.combo=t,this.loading=!1},error:t=>{console.error("Erro ao carregar combo:",t),this.error="Combo n\xE3o encontrado",this.loading=!1}})}onAddToCart(){this.combo&&this.cartService.addComboToCart(this.combo,this.quantity)}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}getComboImage(n){if(n.images&&n.images.length>0){let t=n.images[0];if(t.startsWith("http://")||t.startsWith("https://"))return t;if(t.startsWith("/storage/")||t.startsWith("storage/")){let a=v.apiUrl.replace(/\/api$/,""),m=t.startsWith("/")?t:`/${t}`;return`${a}${m}`}return t}return"/assets/images/default-combo.jpg"}formatPrice(n){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n)}getDiscountPercentage(n){return n.original_price&&n.original_price>n.price?Math.round((n.original_price-n.price)/n.original_price*100):0}getProductName(n){return n.name||n.product?.name||"Produto"}getProductPrice(n){return n.price||n.product?.price||0}getProductQuantity(n){return n.pivot?.quantity||n.quantity||1}getProductUnit(n){return(n.pivot?.sale_type||n.sale_type||"garrafa")==="dose"?"dose(s)":"unidade(s)"}getProductImage(n){let t=n.image_url||n.product?.image_url||n.images?.[0];if(!t)return"/assets/images/no-image.jpg";if(t.startsWith("http://")||t.startsWith("https://"))return t;if(t.startsWith("/storage/")||t.startsWith("storage/")){let a=v.apiUrl.replace(/\/api$/,""),m=t.startsWith("/")?t:`/${t}`;return`${a}${m}`}return t}static \u0275fac=function(t){return new(t||r)(x($),x(R),x(E))};static \u0275cmp=P({type:r,selectors:[["app-combo-detail"]],decls:6,vars:4,consts:[[1,"combo-detail-page"],[1,"container"],["class","loading-container",4,"ngIf"],["class","error-message",4,"ngIf"],["class","combo-detail",4,"ngIf"],["class","combo-actions-mobile",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-message"],[1,"combo-detail"],[1,"breadcrumb"],["routerLink","/"],["routerLink","/combos"],[1,"combo-main-layout"],[1,"combo-image-column"],[1,"combo-hero-section"],["class","discount-badge",4,"ngIf"],[1,"combo-image-wrapper"],[1,"combo-hero-image",3,"src","alt"],[1,"combo-info-column"],[1,"combo-header-section"],[1,"combo-title"],[1,"combo-price-section"],["class","original-price-large",4,"ngIf"],[1,"current-price-large"],["class","savings-badge",4,"ngIf"],["class","combo-description-large",4,"ngIf"],[1,"combo-products-section"],[1,"section-title"],[1,"products-grid"],["class","product-card-item",4,"ngFor","ngForOf"],[1,"combo-actions-desktop"],[1,"quantity-controls"],["for","quantity"],[1,"quantity-input"],["type","button",1,"quantity-btn",3,"click","disabled"],["type","number","id","quantity","min","1","readonly","",1,"quantity-field",3,"ngModelChange","ngModel"],["type","button",1,"quantity-btn",3,"click"],[1,"add-to-cart-btn-large",3,"click"],[1,"discount-badge"],[1,"original-price-large"],[1,"savings-badge"],[1,"combo-description-large"],[1,"product-card-item"],[1,"product-image-wrapper"],["onerror","this.src='/assets/images/no-image.jpg'",1,"product-thumbnail",3,"src","alt"],[1,"product-info-wrapper"],[1,"product-name"],[1,"product-quantity-badge"],[1,"product-price-wrapper"],[1,"product-unit-price"],[1,"combo-actions-mobile"],[1,"quantity-controls-mobile"],["type","button",1,"quantity-btn-mobile",3,"click","disabled"],[1,"quantity-display"],["type","button",1,"quantity-btn-mobile",3,"click"],[1,"add-to-cart-btn-mobile",3,"click"],[1,"price-mobile"]],template:function(t,a){t&1&&(e(0,"div",0)(1,"div",1),g(2,B,4,0,"div",2)(3,H,2,1,"div",3)(4,Z,53,12,"div",4),i(),g(5,tt,17,3,"div",5),i()),t&2&&(c(2),l("ngIf",a.loading),c(),l("ngIf",a.error),c(),l("ngIf",!a.loading&&!a.error&&a.combo),c(),l("ngIf",!a.loading&&!a.error&&a.combo))},dependencies:[q,S,I,D,z,Q,V,N,j,A,W,F,U,T],styles:[".combo-detail-page[_ngcontent-%COMP%]{min-height:100vh;background-color:var(--background);padding-bottom:100px}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 0}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid var(--primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:1rem;border-radius:6px;text-align:center;margin:2rem 0}.breadcrumb[_ngcontent-%COMP%]{margin:1.5rem 0;font-size:.9rem;padding:.5rem 0}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:none;transition:color .2s}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;margin:0 .5rem}.combo-main-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem;margin-bottom:2rem}.combo-image-column[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.combo-info-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.combo-hero-section[_ngcontent-%COMP%]{position:relative;width:100%;max-width:500px;border-radius:16px;overflow:hidden;box-shadow:0 4px 20px #0000001a}.combo-image-wrapper[_ngcontent-%COMP%]{width:100%;height:400px;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;overflow:hidden}.combo-hero-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;max-width:100%}.discount-badge[_ngcontent-%COMP%]{position:absolute;top:1.5rem;right:1.5rem;background:#ef4444;color:#fff;padding:.75rem 1.5rem;border-radius:30px;font-weight:700;font-size:1.1rem;z-index:2;box-shadow:0 4px 12px #ef444466}.combo-header-section[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;box-shadow:0 2px 12px #00000014;margin-bottom:2rem}.combo-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1a1a1a;margin:0 0 1.5rem;line-height:1.2}.combo-price-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.original-price-large[_ngcontent-%COMP%]{font-size:1.5rem;color:#999;text-decoration:line-through;margin-bottom:.5rem}.current-price-large[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:var(--primary);margin-bottom:.5rem;line-height:1}.savings-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:#10b981;color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.9rem;font-weight:600;margin-top:.5rem}.savings-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.combo-description-large[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;line-height:1.7;margin:0}.combo-products-section[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;box-shadow:0 2px 12px #00000014;margin-bottom:2rem}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.5rem;font-weight:600;color:#1a1a1a;margin:0 0 1.5rem}.section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary);font-size:28px;width:28px;height:28px}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}.product-card-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:#f8f9fa;border-radius:12px;border:2px solid transparent;transition:all .2s}.product-card-item[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:#fff;box-shadow:0 2px 8px #0000001a}.product-image-wrapper[_ngcontent-%COMP%]{width:80px;height:80px;flex-shrink:0;border-radius:8px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center}.product-thumbnail[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-info-wrapper[_ngcontent-%COMP%]{flex:1;min-width:0}.product-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1a1a1a;margin:0 0 .5rem;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-quantity-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;background:var(--primary);color:#fff;padding:.25rem .75rem;border-radius:12px;font-size:.85rem;font-weight:500}.product-quantity-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.product-price-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.product-unit-price[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--primary)}.combo-actions-desktop[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;background:#fff;padding:1.5rem 2rem;border-radius:16px;box-shadow:0 2px 12px #00000014}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.quantity-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#1a1a1a;font-size:1rem}.quantity-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border:2px solid #e5e7eb;border-radius:12px;overflow:hidden}.quantity-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:#f3f4f6;color:var(--primary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.quantity-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff}.quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.quantity-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.quantity-field[_ngcontent-%COMP%]{width:60px;height:40px;text-align:center;border:none;border-left:2px solid #e5e7eb;border-right:2px solid #e5e7eb;font-size:1rem;font-weight:600;background:#fff}.add-to-cart-btn-large[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.75rem;padding:1rem 2rem;background:var(--primary);color:#fff;border:none;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .2s;box-shadow:0 4px 12px #00000026}.add-to-cart-btn-large[_ngcontent-%COMP%]:hover{background:var(--primary-dark);transform:translateY(-2px);box-shadow:0 6px 16px #0003}.add-to-cart-btn-large[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.combo-actions-mobile[_ngcontent-%COMP%]{display:none;position:fixed;bottom:0;left:0;right:0;background:#fff;padding:1rem;box-shadow:0 -4px 20px #00000026;z-index:1000;gap:1rem;align-items:center}.quantity-controls-mobile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border:2px solid #e5e7eb;border-radius:12px;overflow:hidden}.quantity-btn-mobile[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#f3f4f6;color:var(--primary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.quantity-btn-mobile[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff}.quantity-btn-mobile[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.quantity-btn-mobile[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.quantity-display[_ngcontent-%COMP%]{width:40px;text-align:center;font-weight:600;font-size:1rem}.add-to-cart-btn-mobile[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.875rem 1.5rem;background:var(--primary);color:#fff;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s}.add-to-cart-btn-mobile[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.add-to-cart-btn-mobile[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.price-mobile[_ngcontent-%COMP%]{margin-left:auto;font-size:1.1rem;font-weight:700}@media (min-width: 768px){.combo-main-layout[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:3rem;align-items:start}.combo-image-column[_ngcontent-%COMP%]{position:sticky;top:2rem;align-self:start}.combo-hero-section[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 768px){.combo-detail-page[_ngcontent-%COMP%]{padding-bottom:90px}.combo-main-layout[_ngcontent-%COMP%]{gap:1.5rem}.combo-hero-section[_ngcontent-%COMP%]{max-width:100%;margin-bottom:0}.combo-image-wrapper[_ngcontent-%COMP%]{height:300px}.combo-header-section[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1.5rem}.combo-title[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:1rem}.current-price-large[_ngcontent-%COMP%]{font-size:2.25rem}.combo-products-section[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1.5rem}.products-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.combo-actions-desktop[_ngcontent-%COMP%]{display:none}.combo-actions-mobile[_ngcontent-%COMP%]{display:flex}}@media (max-width: 480px){.combo-image-wrapper[_ngcontent-%COMP%]{height:250px}.combo-title[_ngcontent-%COMP%]{font-size:1.5rem}.current-price-large[_ngcontent-%COMP%]{font-size:2rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem}.product-card-item[_ngcontent-%COMP%]{padding:.75rem}.product-image-wrapper[_ngcontent-%COMP%]{width:60px;height:60px}}"]})};export{L as ComboDetailComponent};
