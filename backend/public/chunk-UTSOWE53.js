import{a as Q}from"./chunk-OTE4O6FO.js";import"./chunk-MA64ECIA.js";import"./chunk-ABD54CR7.js";import"./chunk-UIGNPBHV.js";import"./chunk-EYVEXPNH.js";import"./chunk-ROER2RFV.js";import"./chunk-NJG33T2I.js";import"./chunk-W6W5QBSK.js";import"./chunk-F5X5MWHG.js";import"./chunk-AIXKBXYS.js";import{a as L,b as R,d as U,h as $,i as H,m as J,n as K}from"./chunk-RHC5ILWF.js";import"./chunk-XTFDZCPR.js";import"./chunk-ZHIFTSGJ.js";import"./chunk-EQKA6Y5K.js";import"./chunk-OBC24UR6.js";import"./chunk-CEPC3JHI.js";import"./chunk-FIIM6QS2.js";import{a as B,b as j}from"./chunk-6R7SEWBP.js";import{Y as F,_ as T}from"./chunk-UVGQBODX.js";import{a as y}from"./chunk-6CSLPSMF.js";import{A as G,b as k,d as f,g as N,h as z,k as D,m as V,p as q,y as A}from"./chunk-M22BVTMS.js";import{h as I}from"./chunk-4CKO2N7V.js";import{$a as v,Bb as t,Cb as e,Db as c,Hb as S,Ic as w,Kb as u,Lb as _,Rc as O,Wa as i,Wb as n,Xb as E,a as h,gb as M,lb as s,sb as l,ta as C,ua as P,ub as x}from"./chunk-AFGHNMPW.js";function X(o,r){o&1&&(t(0,"mat-error"),n(1," Nome \xE9 obrigat\xF3rio "),e())}function Y(o,r){o&1&&(t(0,"mat-error"),n(1," Email \xE9 obrigat\xF3rio "),e())}function Z(o,r){o&1&&(t(0,"mat-error"),n(1," Email inv\xE1lido "),e())}function ee(o,r){o&1&&(t(0,"mat-error"),n(1," Telefone \xE9 obrigat\xF3rio "),e())}function te(o,r){o&1&&(t(0,"mat-error"),n(1," Senha deve ter no m\xEDnimo 8 caracteres "),e())}function ne(o,r){o&1&&(t(0,"div",24)(1,"mat-icon"),n(2,"check_circle"),e(),t(3,"span"),n(4,"Perfil atualizado com sucesso!"),e()())}function oe(o,r){if(o&1&&(t(0,"div",25)(1,"mat-icon"),n(2,"error"),e(),t(3,"span"),n(4),e()()),o&2){let a=_(2);i(4),E(a.error)}}function re(o,r){o&1&&(t(0,"mat-icon"),n(1,"save"),e())}function ie(o,r){o&1&&(t(0,"span"),n(1,"Salvar Altera\xE7\xF5es"),e())}function ae(o,r){o&1&&(t(0,"span"),n(1,"Salvando..."),e())}function le(o,r){if(o&1){let a=S();t(0,"div",7)(1,"form",8),u("ngSubmit",function(){C(a);let d=_();return P(d.onSubmit())}),t(2,"div",9)(3,"h2"),n(4,"Informa\xE7\xF5es Pessoais"),e(),t(5,"mat-form-field",10)(6,"mat-label"),n(7,"Nome Completo"),e(),c(8,"input",11),t(9,"mat-icon",12),n(10,"person"),e(),s(11,X,2,0,"mat-error",13),e(),t(12,"mat-form-field",10)(13,"mat-label"),n(14,"Email"),e(),c(15,"input",14),t(16,"mat-icon",12),n(17,"email"),e(),s(18,Y,2,0,"mat-error",13)(19,Z,2,0,"mat-error",13),e(),t(20,"mat-form-field",10)(21,"mat-label"),n(22,"Telefone"),e(),c(23,"input",15),t(24,"mat-icon",12),n(25,"phone"),e(),s(26,ee,2,0,"mat-error",13),e()(),t(27,"div",9)(28,"h2"),n(29,"Alterar Senha"),e(),t(30,"p",16),n(31,"Deixe em branco se n\xE3o quiser alterar"),e(),t(32,"mat-form-field",10)(33,"mat-label"),n(34,"Senha Atual"),e(),c(35,"input",17),t(36,"mat-icon",12),n(37,"lock"),e()(),t(38,"mat-form-field",10)(39,"mat-label"),n(40,"Nova Senha"),e(),c(41,"input",18),t(42,"mat-icon",12),n(43,"lock_open"),e(),s(44,te,2,0,"mat-error",13),e(),t(45,"mat-form-field",10)(46,"mat-label"),n(47,"Confirmar Nova Senha"),e(),c(48,"input",19),t(49,"mat-icon",12),n(50,"lock_open"),e()()(),s(51,ne,5,0,"div",20)(52,oe,5,1,"div",21),t(53,"div",22)(54,"button",23),s(55,re,2,0,"mat-icon",13)(56,ie,2,0,"span",13)(57,ae,2,0,"span",13),e()()()()}if(o&2){let a,p,d,g,b,m=_();i(),l("formGroup",m.profileForm),i(10),l("ngIf",(a=m.profileForm.get("name"))==null||a.errors==null?null:a.errors.required),i(7),l("ngIf",(p=m.profileForm.get("email"))==null||p.errors==null?null:p.errors.required),i(),l("ngIf",(d=m.profileForm.get("email"))==null||d.errors==null?null:d.errors.email),i(7),l("ngIf",(g=m.profileForm.get("phone"))==null||g.errors==null?null:g.errors.required),i(18),l("ngIf",(b=m.profileForm.get("new_password"))==null||b.errors==null?null:b.errors.minlength),i(7),l("ngIf",m.success),i(),l("ngIf",m.error),i(2),l("disabled",m.loading||m.profileForm.invalid),i(),l("ngIf",!m.loading),i(),l("ngIf",!m.loading),i(),l("ngIf",m.loading)}}function me(o,r){o&1&&(t(0,"div",7),c(1,"app-enderecos"),e())}var W=class o{constructor(r,a){this.fb=r;this.authService=a;this.profileForm=this.fb.group({name:["",f.required],email:["",[f.required,f.email]],phone:["",f.required],current_password:[""],new_password:["",f.minLength(8)],new_password_confirmation:[""]})}profileForm;loading=!1;success=!1;error=null;user=null;activeTab="personal";ngOnInit(){this.authService.user$.subscribe(r=>{r&&(this.user=r,this.profileForm.patchValue({name:r.name,email:r.email,phone:r.phone||""}))})}switchTab(r){this.activeTab=r}onSubmit(){if(this.profileForm.invalid)return;this.loading=!0,this.error=null,this.success=!1;let r=h({},this.profileForm.value);r.current_password||(delete r.current_password,delete r.new_password,delete r.new_password_confirmation),this.authService.updateProfile(r).subscribe({next:()=>{this.success=!0,this.loading=!1,this.profileForm.patchValue({current_password:"",new_password:"",new_password_confirmation:""}),setTimeout(()=>{this.success=!1},3e3)},error:a=>{this.error=a.error.message||"Erro ao atualizar perfil",this.loading=!1}})}static \u0275fac=function(a){return new(a||o)(v(A),v(y))};static \u0275cmp=M({type:o,selectors:[["app-profile"]],decls:14,vars:6,consts:[[1,"profile-page"],[1,"container"],[1,"profile-header"],[1,"subtitle"],[1,"profile-tabs"],[1,"tab-button",3,"click"],["class","profile-content",4,"ngIf"],[1,"profile-content"],[3,"ngSubmit","formGroup"],[1,"form-section"],["appearance","outline"],["matInput","","formControlName","name","placeholder","Seu nome"],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","email","type","email","placeholder","seu@email.com"],["matInput","","formControlName","phone","placeholder","(00) 00000-0000"],[1,"section-description"],["matInput","","formControlName","current_password","type","password","placeholder","Sua senha atual"],["matInput","","formControlName","new_password","type","password","placeholder","Nova senha"],["matInput","","formControlName","new_password_confirmation","type","password","placeholder","Confirme a nova senha"],["class","alert alert-success",4,"ngIf"],["class","alert alert-error",4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"alert","alert-success"],[1,"alert","alert-error"]],template:function(a,p){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),n(4,"Meu Perfil"),e(),t(5,"p",3),n(6,"Gerencie suas informa\xE7\xF5es pessoais"),e()(),t(7,"div",4)(8,"button",5),u("click",function(){return p.switchTab("personal")}),n(9," Dados Pessoais "),e(),t(10,"button",5),u("click",function(){return p.switchTab("addresses")}),n(11," Meus Endere\xE7os "),e()(),s(12,le,58,12,"div",6)(13,me,2,0,"div",6),e()()),a&2&&(i(8),x("active",p.activeTab==="personal"),i(2),x("active",p.activeTab==="addresses"),i(2),l("ngIf",p.activeTab==="personal"),i(),l("ngIf",p.activeTab==="addresses"))},dependencies:[O,w,G,D,k,N,z,V,q,I,T,F,H,$,L,R,U,K,J,j,B,Q],styles:[".profile-page[_ngcontent-%COMP%]{padding:2rem 0;min-height:calc(100vh - 64px);background-color:#f8f9fa}.profile-tabs[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;border-bottom:2px solid #eee;padding-bottom:0}.tab-button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px 8px 0 0;background:transparent;color:#666;font-weight:600;cursor:pointer;border:none;border-bottom:3px solid transparent;transition:all .2s;font-size:16px;position:relative;bottom:-2px}.tab-button[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#1a1a1a}.tab-button.active[_ngcontent-%COMP%]{background:#fff;color:#1a1a1a;border-bottom-color:var(--primary);font-weight:700}.container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 1rem}.profile-header[_ngcontent-%COMP%]{margin-bottom:2rem}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1a1a1a;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:#666;font-size:1rem}.profile-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:2rem;box-shadow:0 2px 8px #0000001a}.profile-content[_ngcontent-%COMP%]   app-enderecos[_ngcontent-%COMP%]{display:block}.profile-content[_ngcontent-%COMP%]   app-enderecos[_ngcontent-%COMP%]     .enderecos-page{padding:0;min-height:auto;background-color:transparent}.profile-content[_ngcontent-%COMP%]   app-enderecos[_ngcontent-%COMP%]     .container{max-width:100%;padding:0}.profile-content[_ngcontent-%COMP%]   app-enderecos[_ngcontent-%COMP%]     .enderecos-header{display:none}.profile-content[_ngcontent-%COMP%]   app-enderecos[_ngcontent-%COMP%]     .enderecos-content{background:transparent;box-shadow:none;padding:0}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:2rem;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1a1a1a;margin-bottom:.5rem}.section-description[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin-bottom:1rem}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;border-radius:4px;margin-bottom:1rem}.alert[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert-error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:150px}@media (max-width: 768px){.profile-tabs[_ngcontent-%COMP%]{gap:.5rem;overflow-x:auto;-webkit-overflow-scrolling:touch}.tab-button[_ngcontent-%COMP%]{padding:10px 16px;font-size:14px;white-space:nowrap;flex-shrink:0}.profile-content[_ngcontent-%COMP%]{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};export{W as ProfileComponent};
