import{a as G}from"./chunk-YOQJ6CHA.js";import{a as Y}from"./chunk-QKFIFL5Q.js";import{a as U,b as $}from"./chunk-6R7SEWBP.js";import{T as N,_ as W}from"./chunk-UVGQBODX.js";import"./chunk-LKPJNKVD.js";import"./chunk-6CSLPSMF.js";import{b as F,g as j,j as q,q as A,r as L,s as R,z as V}from"./chunk-M22BVTMS.js";import{d as B,h as M}from"./chunk-4CKO2N7V.js";import{$a as y,$b as h,Bb as n,Cb as r,Da as k,Db as u,Hb as T,Hc as z,Ic as _,Kb as d,Lb as l,Rc as v,Ua as I,Wa as a,Wb as m,Xb as O,Yb as f,ac as C,bc as x,cd as D,fc as E,gb as b,lb as g,sb as s,ta as w,ua as S}from"./chunk-AFGHNMPW.js";var Z=i=>["/combos",i];function ee(i,o){if(i&1&&(n(0,"div",13),m(1),r()),i&2){let e=l();a(),f(" ",e.getDiscountPercentage(e.combo),"% OFF ")}}function te(i,o){if(i&1&&(n(0,"div",14)(1,"span",15),m(2),r()()),i&2){let e=l();a(2),O(e.getComboItemsSummary())}}function oe(i,o){if(i&1&&(n(0,"span",16),m(1),r()),i&2){let e=l();a(),f(" ",e.formatPrice(e.combo.original_price)," ")}}var P=class i{combo;addToCart=new k;onAddToCart(){this.addToCart.emit(this.combo)}getComboImage(o){if(o.images&&o.images.length>0){let e=o.images[0];if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.startsWith("/storage/")||e.startsWith("storage/")){let t=D.apiUrl.replace(/\/api$/,""),c=e.startsWith("/")?e:`/${e}`;return`${t}${c}`}return e}return"/assets/images/default-combo.jpg"}formatPrice(o){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o)}getDiscountPercentage(o){return o.original_price&&o.original_price>o.price?Math.round((o.original_price-o.price)/o.original_price*100):0}getComboItemsSummary(){if(!this.combo.products||this.combo.products.length===0)return"";let o=[],e=3;for(let t=0;t<Math.min(this.combo.products.length,e);t++){let c=this.combo.products[t],p=c.pivot?.quantity||c.quantity||1,J=c.name||c.product?.name||"Produto";o.push(`${p}x ${J}`)}return this.combo.products.length>e&&o.push(`+${this.combo.products.length-e} mais`),o.join(", ")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-combo-card"]],inputs:{combo:"combo"},outputs:{addToCart:"addToCart"},decls:18,vars:11,consts:[[1,"combo-card"],[1,"combo-badge"],["class","discount-tag",4,"ngIf"],[1,"card-content",3,"routerLink"],[1,"card-image-container"],[1,"card-img",3,"src","alt"],[1,"combo-title",3,"title"],["class","combo-items",4,"ngIf"],[1,"card-footer"],[1,"price-block"],["class","old-price",4,"ngIf"],[1,"current-price"],["mat-icon-button","","aria-label","Adicionar ao carrinho",1,"btn-quick-add",3,"click"],[1,"discount-tag"],[1,"combo-items"],[1,"items-text"],[1,"old-price"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1),m(2,"COMBO"),r(),g(3,ee,2,1,"div",2),n(4,"div",3)(5,"div",4),u(6,"img",5),r(),n(7,"h3",6),m(8),r(),g(9,te,3,1,"div",7),r(),n(10,"div",8)(11,"div",9),g(12,oe,2,1,"span",10),n(13,"span",11),m(14),r()(),n(15,"button",12),d("click",function(){return t.onAddToCart()}),n(16,"mat-icon"),m(17,"add_shopping_cart"),r()()()()),e&2&&(a(3),s("ngIf",t.getDiscountPercentage(t.combo)>0),a(),s("routerLink",E(9,Z,t.combo.id)),a(2),s("src",t.getComboImage(t.combo),I)("alt",t.combo.name),a(),s("title",t.combo.name),a(),O(t.combo.name),a(),s("ngIf",t.combo.products&&t.combo.products.length>0),a(3),s("ngIf",t.combo.original_price&&t.combo.original_price>t.combo.price),a(2),f(" ",t.formatPrice(t.combo.price)," "))},dependencies:[v,_,M,B,$,U,W,N],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}.combo-card[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000000f;transition:transform .2s,box-shadow .2s;display:flex;flex-direction:column;height:100%;width:100%;cursor:pointer}.combo-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 16px #0000001f}.combo-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;background:linear-gradient(135deg,#9333ea,#7c3aed);color:#fff;font-size:11px;font-weight:700;padding:4px 10px;border-radius:4px;z-index:3;line-height:1.2;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 2px 4px #9333ea4d}.discount-tag[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#ef4444;color:#fff;font-size:12px;font-weight:700;padding:4px 8px;border-radius:4px;z-index:2;line-height:1.2}.card-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:12px;text-decoration:none;color:inherit}.card-image-container[_ngcontent-%COMP%]{height:160px;width:100%;display:flex;align-items:center;justify-content:center;padding:10px;background:#fafafa;flex-shrink:0}.card-img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;object-position:center}.combo-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary);margin:12px 0 8px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;min-height:3em;height:2.8em;flex-shrink:0}.combo-items[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:8px}.items-text[_ngcontent-%COMP%]{font-size:12px;color:#666;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px 16px;gap:12px;flex-shrink:0;margin-top:auto}.price-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex:1;min-width:0}.old-price[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--text-secondary);font-size:.9rem;line-height:1.2}.current-price[_ngcontent-%COMP%]{color:var(--primary);font-weight:700;font-size:1.1rem;line-height:1.2}.btn-quick-add[_ngcontent-%COMP%]{background-color:var(--primary)!important;color:#fff!important;width:40px!important;height:40px!important;min-width:40px!important;min-height:40px!important;border-radius:50%!important;flex-shrink:0;transition:all .2s;display:flex!important;align-items:center!important;justify-content:center!important;padding:0!important;margin:0!important}.btn-quick-add[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark)!important;transform:scale(1.1)}.btn-quick-add[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff!important;font-size:20px!important;width:20px!important;height:20px!important;line-height:20px!important;margin:0!important;padding:0!important}@media (max-width: 768px){.card-image-container[_ngcontent-%COMP%]{height:140px;padding:12px}.combo-title[_ngcontent-%COMP%]{font-size:13px;margin:10px 12px 8px;min-height:2.8em;height:2.6em}.card-footer[_ngcontent-%COMP%]{padding:10px 12px 12px}.current-price[_ngcontent-%COMP%]{font-size:1rem}.old-price[_ngcontent-%COMP%]{font-size:.85rem}.btn-quick-add[_ngcontent-%COMP%]{width:36px!important;height:36px!important;min-width:36px!important;min-height:36px!important;display:flex!important;align-items:center!important;justify-content:center!important;padding:0!important}.btn-quick-add[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important;width:18px!important;height:18px!important;line-height:18px!important;margin:0!important;padding:0!important}}@media (max-width: 480px){.card-image-container[_ngcontent-%COMP%]{height:120px;padding:10px}.combo-title[_ngcontent-%COMP%]{font-size:12px;margin:8px 10px;min-height:2.6em;height:2.4em}.card-footer[_ngcontent-%COMP%]{padding:8px 10px 10px}.current-price[_ngcontent-%COMP%]{font-size:.95rem}.old-price[_ngcontent-%COMP%]{font-size:.8rem}.combo-badge[_ngcontent-%COMP%]{font-size:10px;padding:3px 8px;top:6px;left:6px}.discount-tag[_ngcontent-%COMP%]{font-size:11px;padding:3px 6px;top:6px;right:6px}}"]})};function ne(i,o){i&1&&(n(0,"div",17),u(1,"div",18),n(2,"p"),m(3,"Carregando combos..."),r()())}function ie(i,o){if(i&1&&(n(0,"div",19),m(1),r()),i&2){let e=l();a(),f(" ",e.error," ")}}function re(i,o){i&1&&(n(0,"div",23)(1,"h3"),m(2,"Nenhum combo encontrado"),r(),n(3,"p"),m(4,"Tente ajustar os filtros de busca."),r()())}function ae(i,o){if(i&1){let e=T();n(0,"app-combo-card",24),d("addToCart",function(c){w(e);let p=l(2);return S(p.onAddToCart(c))}),r()}if(i&2){let e=o.$implicit;s("combo",e)}}function me(i,o){if(i&1&&(n(0,"div",20),g(1,re,5,0,"div",21)(2,ae,1,1,"app-combo-card",22),r()),i&2){let e=l();a(),s("ngIf",e.combos.length===0),a(),s("ngForOf",e.combos)("ngForTrackBy",e.trackByComboId)}}var H=class i{constructor(o,e){this.comboService=o;this.cartService=e}combos=[];loading=!0;error=null;searchTerm="";sortBy="name";sortOrder="asc";ngOnInit(){this.loadCombos()}loadCombos(){this.loading=!0,this.error=null;let o={sort_by:this.sortBy,sort_order:this.sortOrder,per_page:20};this.searchTerm.trim()&&(o.search=this.searchTerm.trim()),this.comboService.getCombos(o).subscribe({next:e=>{this.combos=e.data,this.loading=!1},error:e=>{console.error("Erro ao carregar combos:",e),this.error="Erro ao carregar combos",this.loading=!1}})}onSearch(){this.loadCombos()}onSortChange(){this.loadCombos()}onAddToCart(o){this.cartService.addComboToCart(o,1)}trackByComboId(o,e){return e.id}static \u0275fac=function(e){return new(e||i)(y(G),y(Y))};static \u0275cmp=b({type:i,selectors:[["app-combos-page"]],decls:29,vars:6,consts:[[1,"combos-page"],[1,"container"],[1,"page-header"],[1,"filters-section"],[1,"search-box"],["type","text","placeholder","Buscar combos...",1,"search-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-button",3,"click"],[1,"sort-controls"],[1,"sort-select",3,"ngModelChange","change","ngModel"],["value","name"],["value","price"],["value","created_at"],["value","asc"],["value","desc"],["class","loading-container",4,"ngIf"],["class","error-message",4,"ngIf"],["class","combos-grid",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-message"],[1,"combos-grid"],["class","no-combos",4,"ngIf"],[3,"combo","addToCart",4,"ngFor","ngForOf","ngForTrackBy"],[1,"no-combos"],[3,"addToCart","combo"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),m(4,"Combos Especiais"),r(),n(5,"p"),m(6,"Economize com nossos combos selecionados"),r()(),n(7,"div",3)(8,"div",4)(9,"input",5),x("ngModelChange",function(p){return C(t.searchTerm,p)||(t.searchTerm=p),p}),d("keyup.enter",function(){return t.onSearch()}),r(),n(10,"button",6),d("click",function(){return t.onSearch()}),n(11,"span"),m(12,"\u{1F50D}"),r()()(),n(13,"div",7)(14,"select",8),x("ngModelChange",function(p){return C(t.sortBy,p)||(t.sortBy=p),p}),d("change",function(){return t.onSortChange()}),n(15,"option",9),m(16,"Nome"),r(),n(17,"option",10),m(18,"Pre\xE7o"),r(),n(19,"option",11),m(20,"Mais Recentes"),r()(),n(21,"select",8),x("ngModelChange",function(p){return C(t.sortOrder,p)||(t.sortOrder=p),p}),d("change",function(){return t.onSortChange()}),n(22,"option",12),m(23,"Crescente"),r(),n(24,"option",13),m(25,"Decrescente"),r()()()(),g(26,ne,4,0,"div",14)(27,ie,2,1,"div",15)(28,me,3,3,"div",16),r()()),e&2&&(a(9),h("ngModel",t.searchTerm),a(5),h("ngModel",t.sortBy),a(7),h("ngModel",t.sortOrder),a(5),s("ngIf",t.loading),a(),s("ngIf",t.error),a(),s("ngIf",!t.loading&&!t.error))},dependencies:[v,z,_,M,P,V,L,R,F,A,j,q],styles:[".combos-page[_ngcontent-%COMP%]{min-height:100vh;background-color:var(--background);padding:2rem 0}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--secondary);margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#666}.filters-section[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;align-items:center}.search-box[_ngcontent-%COMP%]{display:flex;flex:1;min-width:300px}.search-input[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:1px solid #ddd;border-radius:6px 0 0 6px;font-size:1rem;outline:none}.search-input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.search-button[_ngcontent-%COMP%]{padding:.75rem 1rem;background:var(--primary);color:#fff;border:none;border-radius:0 6px 6px 0;cursor:pointer;font-size:1rem}.search-button[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.sort-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.sort-select[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:6px;font-size:1rem;background:#fff;cursor:pointer}.sort-select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 0}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid var(--primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:1rem;border-radius:6px;text-align:center;margin:2rem 0}.combos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem;margin-top:2rem}.no-combos[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:4rem 0;color:#666}.no-combos[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem;color:var(--secondary)}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.filters-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:auto}.sort-controls[_ngcontent-%COMP%]{justify-content:center}.combos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}"]})};export{H as CombosPageComponent};
