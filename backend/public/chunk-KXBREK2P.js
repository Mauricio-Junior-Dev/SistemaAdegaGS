import{a as vt,b as Et}from"./chunk-NXB367PQ.js";import{a as at,b as ot,c as rt,d as mt,e as lt,f as dt,g as pt,h as st,i as ct,j as _t,k as ut}from"./chunk-HB4FNUQQ.js";import"./chunk-MS4AQ6UA.js";import{d as Mt,h as St,i as wt}from"./chunk-U7CDANII.js";import{a as ft,h as Ct,i as gt,m as xt,n as ht}from"./chunk-RHC5ILWF.js";import"./chunk-XTFDZCPR.js";import{a as Z,b as tt,c as et,f as it,g as nt}from"./chunk-ZHIFTSGJ.js";import"./chunk-HTFI32IU.js";import"./chunk-C4KZ6I4Q.js";import"./chunk-EQKA6Y5K.js";import{b as j,c as U}from"./chunk-OBC24UR6.js";import"./chunk-CEPC3JHI.js";import"./chunk-FIIM6QS2.js";import{a as Q,b as X}from"./chunk-6R7SEWBP.js";import{Y as z,Z as N,_ as Y}from"./chunk-UVGQBODX.js";import{b as q,g as G,j as J,z as K}from"./chunk-M22BVTMS.js";import{d as L,h as W}from"./chunk-4CKO2N7V.js";import{$a as S,$b as D,Bb as a,Cb as n,Db as w,Eb as d,Fb as p,Hb as v,Ic as P,Kb as E,Lb as M,Mc as O,Pc as F,Rc as H,Vb as A,Wa as r,Wb as o,Yb as s,Yc as k,Zc as V,ac as b,bc as y,cd as $,ec as I,fc as R,gb as T,hc as f,jc as C,lb as l,mc as B,sb as u,ta as g,ua as x}from"./chunk-AFGHNMPW.js";var bt=()=>[10,25,50],yt=t=>["/admin/caixa",t];function Tt(t,e){t&1&&(a(0,"th",25),o(1," Abertura "),n())}function At(t,e){if(t&1&&(a(0,"td",26),o(1),f(2,"date"),n()),t&2){let i=e.$implicit;r(),s(" ",C(2,1,i.opened_at,"short")," ")}}function It(t,e){t&1&&(a(0,"th",25),o(1," Funcion\xE1rio "),n())}function Rt(t,e){if(t&1&&(a(0,"td",26),o(1),n()),t&2){let i=e.$implicit;r(),s(" ",i.opened_by||"-"," ")}}function Bt(t,e){t&1&&(a(0,"th",25),o(1," Saldo Inicial "),n())}function Pt(t,e){if(t&1&&(a(0,"td",26),o(1),f(2,"currency"),n()),t&2){let i=e.$implicit;r(),s(" ",C(2,1,i.initial_amount,"BRL")," ")}}function Ot(t,e){t&1&&(a(0,"th",25),o(1," Saldo Atual/Final "),n())}function Ft(t,e){if(t&1&&(a(0,"td",26),o(1),f(2,"currency"),n()),t&2){let i=e.$implicit;r(),s(" ",C(2,1,i.current_amount,"BRL")," ")}}function Ht(t,e){t&1&&(a(0,"th",25),o(1," Entradas "),n())}function kt(t,e){if(t&1&&(a(0,"td",26),o(1),f(2,"currency"),n()),t&2){let i=e.$implicit;r(),s(" ",C(2,1,i.total_income,"BRL")," ")}}function Vt(t,e){t&1&&(a(0,"th",25),o(1," Sa\xEDdas "),n())}function Lt(t,e){if(t&1&&(a(0,"td",26),o(1),f(2,"currency"),n()),t&2){let i=e.$implicit;r(),s(" ",C(2,1,i.total_outcome,"BRL")," ")}}function Wt(t,e){t&1&&(a(0,"th",25),o(1," Status "),n())}function $t(t,e){if(t&1&&(a(0,"td",26),o(1),n()),t&2){let i=e.$implicit,m=M(2);r(),s(" ",m.statusText(i)," ")}}function zt(t,e){t&1&&(a(0,"th",25),o(1," A\xE7\xF5es "),n())}function Nt(t,e){if(t&1&&(a(0,"td",26)(1,"a",27)(2,"mat-icon"),o(3,"list"),n(),o(4," Detalhes "),n()()),t&2){let i=e.$implicit;r(),u("routerLink",R(1,yt,i.id))}}function Yt(t,e){t&1&&w(0,"tr",28)}function jt(t,e){t&1&&w(0,"tr",29)}function Ut(t,e){if(t&1){let i=v();a(0,"div",10)(1,"table",11),d(2,12),l(3,Tt,2,0,"th",13)(4,At,3,4,"td",14),p(),d(5,15),l(6,It,2,0,"th",13)(7,Rt,2,1,"td",14),p(),d(8,16),l(9,Bt,2,0,"th",13)(10,Pt,3,4,"td",14),p(),d(11,17),l(12,Ot,2,0,"th",13)(13,Ft,3,4,"td",14),p(),d(14,18),l(15,Ht,2,0,"th",13)(16,kt,3,4,"td",14),p(),d(17,19),l(18,Vt,2,0,"th",13)(19,Lt,3,4,"td",14),p(),d(20,20),l(21,Wt,2,0,"th",13)(22,$t,2,1,"td",14),p(),d(23,21),l(24,zt,2,0,"th",13)(25,Nt,5,3,"td",14),p(),l(26,Yt,1,0,"tr",22)(27,jt,1,0,"tr",23),n(),a(28,"mat-paginator",24),E("page",function(c){g(i);let h=M();return x(h.load(c))}),n()()}if(t&2){let i=M();r(),u("dataSource",i.rows),r(25),u("matHeaderRowDef",i.displayedColumns),r(),u("matRowDefColumns",i.displayedColumns),r(),u("length",i.total)("pageSize",i.perPage)("pageIndex",i.page)("pageSizeOptions",I(7,bt))}}function qt(t,e){t&1&&(a(0,"div",30)(1,"mat-icon"),o(2,"hourglass_top"),n(),o(3," Carregando... "),n())}var Dt=class t{constructor(e,i){this.http=e;this.snackBar=i}displayedColumns=["opened_at","opened_by","initial_amount","current_amount","total_income","total_outcome","status","actions"];rows=[];loading=!1;filterDate="";filterOpen="all";total=0;perPage=10;page=0;api=`${$.apiUrl}/admin/cash`;ngOnInit(){this.load()}ngOnDestroy(){}load(e){this.loading=!0,e&&(this.page=e.pageIndex,this.perPage=e.pageSize);let i=new k().set("per_page",this.perPage).set("page",this.page+1);this.filterDate&&(i=i.set("date",this.filterDate)),this.filterOpen!=="all"&&(i=i.set("is_open",this.filterOpen==="true"?"1":"0")),this.http.get(`${this.api}/sessions`,{params:i}).subscribe({next:m=>{this.rows=m.data,this.total=m.total,this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Erro ao carregar sess\xF5es de caixa","Fechar",{duration:3e3})}})}statusText(e){return e.is_open?"Aberto":"Fechado"}static \u0275fac=function(i){return new(i||t)(S(V),S(j))};static \u0275cmp=T({type:t,selectors:[["app-caixa-admin"]],decls:27,vars:4,consts:[["loadingTpl",""],[1,"filters"],["appearance","outline"],["matInput","","placeholder","2025-10-30",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","all"],["value","true"],["value","false"],["mat-raised-button","","color","primary",3,"click"],["class","table-wrapper",4,"ngIf","ngIfElse"],[1,"table-wrapper"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","opened_at"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","opened_by"],["matColumnDef","initial_amount"],["matColumnDef","current_amount"],["matColumnDef","total_income"],["matColumnDef","total_outcome"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row",""],[1,"loading"]],template:function(i,m){if(i&1){let c=v();a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),o(3,"Hist\xF3rico de Caixa"),n()(),a(4,"mat-card-content")(5,"div",1)(6,"mat-form-field",2)(7,"mat-label"),o(8,"Data (YYYY-MM-DD)"),n(),a(9,"input",3),y("ngModelChange",function(_){return g(c),b(m.filterDate,_)||(m.filterDate=_),x(_)}),n()(),a(10,"mat-form-field",2)(11,"mat-label"),o(12,"Status"),n(),a(13,"mat-select",4),y("ngModelChange",function(_){return g(c),b(m.filterOpen,_)||(m.filterOpen=_),x(_)}),a(14,"mat-option",5),o(15,"Todos"),n(),a(16,"mat-option",6),o(17,"Abertos"),n(),a(18,"mat-option",7),o(19,"Fechados"),n()()(),a(20,"button",8),E("click",function(){return g(c),x(m.load())}),a(21,"mat-icon"),o(22,"search"),n(),o(23," Buscar "),n()(),l(24,Ut,29,8,"div",9)(25,qt,4,0,"ng-template",null,0,B),n()()}if(i&2){let c=A(26);r(9),D("ngModel",m.filterDate),r(4),D("ngModel",m.filterOpen),r(11),u("ngIf",!m.loading)("ngIfElse",c)}},dependencies:[H,P,F,O,K,q,G,J,nt,Z,et,it,tt,ut,at,rt,pt,mt,ot,st,lt,dt,ct,_t,Y,N,z,X,Q,gt,Ct,ft,ht,xt,wt,St,Mt,U,Et,vt,W,L],styles:[".filters[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:12px}.full-width[_ngcontent-%COMP%]{width:100%}.table-wrapper[_ngcontent-%COMP%]{overflow:auto}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}"]})};export{Dt as CaixaAdminComponent};
