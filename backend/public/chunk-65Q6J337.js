import{f as Qe}from"./chunk-YM3SR4GW.js";import{a as ot}from"./chunk-SMM3PTEC.js";import{a as We,b as Ge,c as Ye}from"./chunk-ZF4X7WAS.js";import{a as Je,b as et}from"./chunk-7P4XSV4R.js";import{a as it}from"./chunk-ABD54CR7.js";import{a as nt}from"./chunk-UIGNPBHV.js";import"./chunk-EYVEXPNH.js";import{a as K,b as J}from"./chunk-ROER2RFV.js";import{a as tt,b as rt}from"./chunk-Q5GVWHJQ.js";import{a as Xe,d as He}from"./chunk-W6W5QBSK.js";import{b as Ke}from"./chunk-AIXKBXYS.js";import{a as Ve}from"./chunk-SEMVXUF2.js";import"./chunk-MS4AQ6UA.js";import{i as Le}from"./chunk-U7CDANII.js";import{a as De,b as Be,c as qe,h as Re,i as Ue,m as je,n as Ze}from"./chunk-RHC5ILWF.js";import"./chunk-XTFDZCPR.js";import{g as H}from"./chunk-ZHIFTSGJ.js";import"./chunk-HTFI32IU.js";import"./chunk-C4KZ6I4Q.js";import{b as be,c as Pe}from"./chunk-OBC24UR6.js";import"./chunk-CEPC3JHI.js";import"./chunk-FIIM6QS2.js";import{a as Ne}from"./chunk-AFZTW5RE.js";import{a as X}from"./chunk-QKFIFL5Q.js";import{a as G,b as Y}from"./chunk-6R7SEWBP.js";import{Y as Q,_ as W}from"./chunk-UVGQBODX.js";import{h as Z}from"./chunk-LKPJNKVD.js";import{a as ye}from"./chunk-6CSLPSMF.js";import{A as $e,b as Oe,d as k,g as Me,h as Se,k as we,l as Ee,m as Ie,p as ke,u as Fe,x as Te,y as ze,z as Ae}from"./chunk-M22BVTMS.js";import{c as xe,h as Ce}from"./chunk-4CKO2N7V.js";import{$a as C,Bb as o,Cb as n,Db as _,E as se,Eb as pe,Fb as ge,Hb as z,Hc as q,Ic as R,Kb as S,Kc as he,Lb as c,Oc as U,Rc as j,Ua as $,Vb as ue,Wa as s,Wb as a,Xb as F,Yb as h,Zb as D,_b as B,a as ie,aa as de,ba as le,bd as ve,ca as ce,cd as L,da as me,f as oe,gb as N,hc as y,ic as A,jc as I,l as re,lb as g,mc as fe,qc as _e,sb as l,ta as P,ua as O,ub as T,v as ne,w as ae}from"./chunk-AFGHNMPW.js";function ft(i,t){if(i&1&&(o(0,"div",22)(1,"span"),a(2),n()()),i&2){let e=c().$implicit,r=c(3);s(2),h("-",r.getDiscountPercentage(e),"%")}}function _t(i,t){if(i&1&&(o(0,"span",23),a(1),y(2,"number"),n()),i&2){let e=c().$implicit,r=c(3);s(),h(" R$ ",I(2,1,r.getOriginalPrice(e),"1.2-2")," ")}}function ht(i,t){i&1&&(o(0,"span"),a(1,"Em estoque"),n())}function vt(i,t){if(i&1&&(o(0,"span"),a(1),n()),i&2){let e=c().$implicit;s(),h(" \xDAltimas ",e.current_stock," unidades ")}}function xt(i,t){i&1&&(o(0,"span",24),a(1,"Indispon\xEDvel"),n())}function Ct(i,t){if(i&1){let e=z();o(0,"div",7)(1,"div",8),_(2,"img",9),g(3,ft,3,1,"div",10),n(),o(4,"div",11)(5,"h4",12),a(6),n(),o(7,"p",13),a(8),n(),o(9,"div",14)(10,"span",15),a(11),y(12,"number"),n(),g(13,_t,3,4,"span",16),n(),o(14,"div",17)(15,"mat-icon"),a(16,"inventory"),n(),g(17,ht,2,0,"span",18)(18,vt,2,1,"span",18)(19,xt,2,0,"span",19),n()(),o(20,"div",20)(21,"button",21),S("click",function(){let d=P(e).$implicit,m=c(3);return O(m.addToCart(d))}),a(22," Adicionar "),n()()()}if(i&2){let e=t.$implicit,r=c(3);s(2),l("src",r.getImageUrl(e),$)("alt",e.name),s(),l("ngIf",r.hasOffer(e)),s(3),F(e.name),s(2),F((e.category==null?null:e.category.name)||"Categoria"),s(3),h("R$ ",I(12,13,e.price,"1.2-2"),""),s(2),l("ngIf",r.hasOffer(e)),s(),T("low-stock",e.current_stock<=5),s(3),l("ngIf",e.current_stock>5),s(),l("ngIf",e.current_stock<=5&&e.current_stock>0),s(),l("ngIf",e.current_stock===0),s(2),l("disabled",e.current_stock===0)}}function yt(i,t){if(i&1&&(o(0,"div",5),g(1,Ct,23,16,"div",6),n()),i&2){let e=c(2);s(),l("ngForOf",e.suggestions)}}function bt(i,t){i&1&&(o(0,"div",25),_(1,"mat-spinner",26),o(2,"p"),a(3,"Carregando sugest\xF5es..."),n()())}function Pt(i,t){if(i&1&&(o(0,"div",2)(1,"div",3)(2,"h3")(3,"mat-icon"),a(4,"shopping_bag"),n(),a(5," Produtos que voc\xEA pode gostar "),n(),o(6,"p"),a(7,"Complete seu pedido com estes produtos complementares"),n()(),g(8,yt,2,1,"div",4)(9,bt,4,0,"ng-template",null,0,fe),n()),i&2){let e=ue(10),r=c();s(8),l("ngIf",!r.loading)("ngIfElse",e)}}var ee=class i{constructor(t,e,r){this.productService=t;this.cartService=e;this.toastr=r}cartItems$;suggestions=[];loading=!1;destroy$=new re;ngOnInit(){this.loadSuggestions()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadSuggestions(){this.loading=!0,this.cartItems$.pipe(le(this.destroy$)).subscribe(t=>{if(t.length===0){this.suggestions=[],this.loading=!1;return}let e=t.filter(r=>r.product&&!r.isCombo).map(r=>r.product.id);this.productService.getSuggestions(e,6).subscribe({next:r=>{this.suggestions=r,this.loading=!1},error:r=>{console.error("Erro ao carregar sugest\xF5es:",r),this.loading=!1}})})}addToCart(t){let e=this.getCurrentQuantity(t);if(this.cartService.addItem(t,1),e===0){let r=t.name,m=r.toLowerCase().endsWith("a")||r.toLowerCase().endsWith("\xE3o")||r.toLowerCase().endsWith("ade")?`${r} adicionada!`:`${r} adicionado!`;this.toastr.success(m,"",{timeOut:1500,positionClass:"toast-bottom-center",progressBar:!1})}}getCurrentQuantity(t){let d=(this.cartService.getCartState()?.items||[]).find(m=>m.id===t.id);return d?d.quantity:0}getImageUrl(t){let e=t.image_url;if(!e)return"assets/images/no-image.png";if(e.startsWith("http://")||e.startsWith("https://"))return`${e}?v=${encodeURIComponent(t.updated_at||"")}`;if(e.startsWith("/storage/")||e.startsWith("storage/")){let r=L.apiUrl.replace(/\/api$/,""),d=e.startsWith("/")?e:`/${e}`;return`${r}${d}?v=${encodeURIComponent(t.updated_at||"")}`}return`${e}?v=${encodeURIComponent(t.updated_at||"")}`}hasOffer(t){return this.productService.hasOffer(t)}getOriginalPrice(t){return this.productService.getOriginalPrice(t)}getDiscountPercentage(t){return this.productService.getDiscountPercentage(t)}static \u0275fac=function(e){return new(e||i)(C(Ne),C(X),C(Z))};static \u0275cmp=N({type:i,selectors:[["app-product-suggestions"]],inputs:{cartItems$:"cartItems$"},decls:1,vars:1,consts:[["loadingTemplate",""],["class","product-suggestions",4,"ngIf"],[1,"product-suggestions"],[1,"suggestions-header"],["class","suggestions-grid",4,"ngIf","ngIfElse"],[1,"suggestions-grid"],["class","suggestion-card",4,"ngFor","ngForOf"],[1,"suggestion-card"],[1,"product-image"],["loading","lazy",3,"src","alt"],["class","offer-badge",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-category"],[1,"product-price"],[1,"current-price"],["class","original-price",4,"ngIf"],[1,"product-stock"],[4,"ngIf"],["class","out-of-stock",4,"ngIf"],[1,"product-actions"],["mat-raised-button","","color","primary",1,"add-button",3,"click","disabled"],[1,"offer-badge"],[1,"original-price"],[1,"out-of-stock"],[1,"loading-container"],["diameter","40"]],template:function(e,r){e&1&&g(0,Pt,11,2,"div",1),e&2&&l("ngIf",r.suggestions.length>0)},dependencies:[j,q,R,U,H,W,Q,Y,G,J,K],styles:[".product-suggestions[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:8px;border:1px solid #dee2e6}.suggestions-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem}.suggestions-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;color:#2c3e50;font-size:1.1rem;font-weight:600;margin:0 0 .25rem}.suggestions-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem;margin:0}.suggestions-grid[_ngcontent-%COMP%]{display:flex;overflow-x:auto;overflow-y:hidden;gap:12px;padding:8px 0 16px;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}.suggestions-grid[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.suggestions-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f0f0f0;border-radius:2px}.suggestions-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--primary);border-radius:2px}.suggestion-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #00000014;transition:all .2s ease;border:1px solid #e9ecef;display:flex;flex-direction:column;padding:12px;text-align:center;min-width:160px;max-width:160px;flex-shrink:0}.suggestion-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.product-image[_ngcontent-%COMP%]{position:relative;width:80px;height:80px;overflow:hidden;background:#f8f9fa;border-radius:8px;margin:0 auto .75rem;flex-shrink:0}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .2s ease}.suggestion-card[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.offer-badge[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;background:#e74c3c;color:#fff;padding:.25rem .5rem;border-radius:6px;font-size:.7rem;font-weight:600;box-shadow:0 2px 4px #0003}.product-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:space-between;height:100%}.product-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#2c3e50;margin:0 0 .25rem;line-height:1.2;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-category[_ngcontent-%COMP%]{color:#6c757d;font-size:.7rem;margin:0 0 .5rem;text-transform:uppercase;letter-spacing:.3px}.product-price[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:.5rem}.current-price[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#27ae60}.original-price[_ngcontent-%COMP%]{font-size:.85rem;color:#95a5a6;text-decoration:line-through}.product-stock[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.25rem;font-size:.7rem;margin-bottom:.75rem;color:#27ae60}.product-stock.low-stock[_ngcontent-%COMP%]{color:#e67e22}.product-stock[_ngcontent-%COMP%]   .out-of-stock[_ngcontent-%COMP%]{color:#e74c3c}.product-actions[_ngcontent-%COMP%]{margin-top:auto}.add-button[_ngcontent-%COMP%]{width:100%;height:36px;font-weight:600;font-size:.85rem;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:.25rem}.add-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #0003}.add-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#6c757d}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;font-size:.95rem}@media (max-width: 768px){.product-suggestions[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem}.suggestions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.5rem}.suggestion-card[_ngcontent-%COMP%]{padding:.5rem}.product-image[_ngcontent-%COMP%]{width:60px;height:60px;margin:0 auto .5rem}.product-name[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:.25rem}.product-category[_ngcontent-%COMP%]{font-size:.65rem;margin-bottom:.25rem}.current-price[_ngcontent-%COMP%]{font-size:1rem}.add-button[_ngcontent-%COMP%]{height:32px;font-size:.8rem}.suggestions-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.suggestions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:.5rem}.suggestion-card[_ngcontent-%COMP%]{padding:.5rem}.product-image[_ngcontent-%COMP%]{width:50px;height:50px;margin:0 auto .5rem}.product-name[_ngcontent-%COMP%]{font-size:.75rem;line-height:1.1}.product-category[_ngcontent-%COMP%]{font-size:.6rem}.current-price[_ngcontent-%COMP%]{font-size:.9rem}.add-button[_ngcontent-%COMP%]{height:28px;font-size:.75rem}.suggestions-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem}.suggestions-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}}"]})};function Ot(i,t){if(i&1&&_(0,"img",16),i&2){let e=c(2);l("src",e.safeQrCodeUrl,$)}}function Mt(i,t){if(i&1){let e=z();o(0,"div",3)(1,"div",4)(2,"h2"),a(3,"Pague com PIX para Concluir"),n(),o(4,"p",5),a(5,"Seu pedido s\xF3 ser\xE1 confirmado ap\xF3s o pagamento."),n(),o(6,"p",6),a(7,"Escaneie o QR Code abaixo com o app do seu banco:"),n(),g(8,Ot,1,1,"img",7),o(9,"div",8)(10,"span",9),a(11,"Ou use o Copia e Cola:"),n(),o(12,"div",10),_(13,"input",11),o(14,"button",12),S("click",function(){P(e);let d=c();return O(d.copiarPix())}),o(15,"mat-icon"),a(16,"content_copy"),n(),o(17,"span"),a(18,"Copiar"),n()()()(),o(19,"p",13),a(20),n(),_(21,"mat-progress-bar",14),o(22,"p",15),a(23," N\xE3o feche esta p\xE1gina. Voc\xEA ser\xE1 redirecionado automaticamente assim que o pagamento for aprovado. "),n()()()}if(i&2){let e=c();s(8),l("ngIf",e.safeQrCodeUrl),s(5),l("value",e.pixCopiaECola||""),s(),l("disabled",!e.pixCopiaECola),s(6),h(" ",e.loadingMessage," ")}}function St(i,t){if(i&1&&(o(0,"span"),a(1),n()),i&2){let e=c(2).$implicit;s(),h(" - ",e.complement,"")}}function wt(i,t){if(i&1&&(o(0,"p",51)(1,"strong"),a(2),n(),g(3,St,2,1,"span",2),_(4,"br"),a(5),_(6,"br"),a(7),n()),i&2){let e=c().$implicit;s(2),D("",e.street,", ",e.number,""),s(),l("ngIf",e.complement),s(2),B(" ",e.neighborhood,", ",e.city,"/",e.state,""),s(2),h(" CEP: ",e.zipcode," ")}}function Et(i,t){if(i&1&&(pe(0),g(1,wt,8,7,"p",23),ge()),i&2){let e=t.$implicit,r=c(3);s(),l("ngIf",e.id===r.selectedAddressId)}}function It(i,t){if(i&1&&(o(0,"div"),g(1,Et,2,1,"ng-container",50),n()),i&2){let e=c(2);s(),l("ngForOf",e.addresses)}}function kt(i,t){if(i&1&&(o(0,"span"),a(1),n()),i&2){let e,r=c(3);s(),h(" - ",(e=r.deliveryForm.get("complement"))==null?null:e.value,"")}}function Ft(i,t){if(i&1&&(o(0,"div",51)(1,"strong"),a(2),n(),g(3,kt,2,1,"span",2),_(4,"br"),a(5),_(6,"br"),a(7),n()),i&2){let e,r,d,m,u=c(2);s(2),D("",(e=u.deliveryForm.get("address"))==null?null:e.value,", ",(e=u.deliveryForm.get("number"))==null?null:e.value,""),s(),l("ngIf",(r=u.deliveryForm.get("complement"))==null?null:r.value),s(2),B(" ",(d=u.deliveryForm.get("neighborhood"))==null?null:d.value,", ",(d=u.deliveryForm.get("city"))==null?null:d.value,"/",(d=u.deliveryForm.get("state"))==null?null:d.value,""),s(2),h(" CEP: ",(m=u.deliveryForm.get("zipcode"))==null?null:m.value," ")}}function Tt(i,t){i&1&&(o(0,"p",52),a(1," Endere\xE7o n\xE3o informado "),n())}function zt(i,t){i&1&&(o(0,"mat-radio-button",63)(1,"div",64)(2,"mat-icon"),a(3,"bookmark"),n(),o(4,"span"),a(5,"Usar endere\xE7o salvo"),n()()()),i&2&&l("value",!0)}function At(i,t){i&1&&(o(0,"mat-chip",72)(1,"mat-icon"),a(2,"star"),n(),a(3," Padr\xE3o "),n())}function $t(i,t){if(i&1&&(o(0,"p"),a(1),n()),i&2){let e=c().$implicit;s(),F(e.complement)}}function Vt(i,t){if(i&1){let e=z();o(0,"div",68),S("click",function(){let d=P(e).$implicit,m=c(5);return O(m.selectAddress(d.id))}),o(1,"div",69)(2,"h4"),a(3),n(),g(4,At,4,0,"mat-chip",70),n(),o(5,"div",71)(6,"p")(7,"strong"),a(8),n()(),g(9,$t,2,1,"p",2),o(10,"p"),a(11),n(),o(12,"p"),a(13),n()()()}if(i&2){let e=t.$implicit,r=c(5);T("selected",r.selectedAddressId===e.id),s(3),F(e.name||"Endere\xE7o"),s(),l("ngIf",e.is_default),s(4),D("",e.street,", ",e.number,""),s(),l("ngIf",e.complement),s(2),B("",e.neighborhood,", ",e.city,"/",e.state,""),s(2),h("CEP: ",e.zipcode,"")}}function Nt(i,t){if(i&1&&(o(0,"div",66),g(1,Vt,14,11,"div",67),n()),i&2){let e=c(4);s(),l("ngForOf",e.addresses)}}function Dt(i,t){if(i&1){let e=z();o(0,"div",59)(1,"div",60)(2,"mat-radio-group",61),S("change",function(d){P(e);let m=c(3);return O(m.onAddressOptionChange(d))}),g(3,zt,6,1,"mat-radio-button",62),o(4,"mat-radio-button",63)(5,"div",64)(6,"mat-icon"),a(7,"add_location"),n(),o(8,"span"),a(9,"Novo endere\xE7o"),n()()()()(),g(10,Nt,2,1,"div",65),n()}if(i&2){let e=c(3);s(2),l("value",e.useSavedAddress),s(),l("ngIf",e.addresses.length>0),s(),l("value",!1),s(6),l("ngIf",e.useSavedAddress)}}function Bt(i,t){i&1&&(o(0,"mat-error"),a(1,"CEP \xE9 obrigat\xF3rio"),n())}function qt(i,t){i&1&&(o(0,"mat-error"),a(1,"CEP inv\xE1lido"),n())}function Rt(i,t){i&1&&(o(0,"span"),a(1,"Buscar"),n())}function Ut(i,t){i&1&&(o(0,"span"),a(1,"Buscando..."),n())}function jt(i,t){i&1&&(o(0,"mat-error"),a(1,"Endere\xE7o \xE9 obrigat\xF3rio"),n())}function Zt(i,t){i&1&&(o(0,"mat-error"),a(1,"N\xFAmero \xE9 obrigat\xF3rio"),n())}function Lt(i,t){i&1&&(o(0,"mat-error"),a(1,"Bairro \xE9 obrigat\xF3rio"),n())}function Qt(i,t){i&1&&(o(0,"mat-error"),a(1,"Cidade \xE9 obrigat\xF3ria"),n())}function Wt(i,t){i&1&&(o(0,"mat-error"),a(1,"Estado \xE9 obrigat\xF3rio"),n())}function Gt(i,t){i&1&&(o(0,"mat-error"),a(1,"Telefone \xE9 obrigat\xF3rio"),n())}function Yt(i,t){i&1&&(o(0,"mat-error"),a(1,"Telefone inv\xE1lido"),n())}function Xt(i,t){if(i&1){let e=z();o(0,"div",73)(1,"div",74)(2,"mat-form-field",75)(3,"mat-label"),a(4,"CEP"),n(),o(5,"input",76),S("input",function(d){P(e);let m=c(3);return m.formatZipcode(d),O(m.clearError())})("blur",function(){P(e);let d=c(3);return O(d.calculateFreteFromCep())}),n(),g(6,Bt,2,0,"mat-error",2)(7,qt,2,0,"mat-error",2),n(),o(8,"button",77),S("click",function(){P(e);let d=c(3);return O(d.searchCep())}),o(9,"mat-icon"),a(10,"search"),n(),g(11,Rt,2,0,"span",2)(12,Ut,2,0,"span",2),n()(),o(13,"div",78)(14,"mat-form-field",79)(15,"mat-label"),a(16,"Endere\xE7o"),n(),_(17,"input",80),g(18,jt,2,0,"mat-error",2),n(),o(19,"mat-form-field",81)(20,"mat-label"),a(21,"N\xFAmero"),n(),_(22,"input",82),g(23,Zt,2,0,"mat-error",2),n()(),o(24,"div",83)(25,"mat-form-field",84)(26,"mat-label"),a(27,"Bairro"),n(),o(28,"input",85),S("input",function(){P(e);let d=c(3);return O(d.onNeighborhoodChange())}),n(),g(29,Lt,2,0,"mat-error",2),n(),o(30,"mat-form-field",86)(31,"mat-label"),a(32,"Complemento"),n(),_(33,"input",87),n()(),o(34,"div",88)(35,"mat-form-field",89)(36,"mat-label"),a(37,"Cidade"),n(),_(38,"input",90),g(39,Qt,2,0,"mat-error",2),n(),o(40,"mat-form-field",91)(41,"mat-label"),a(42,"Estado"),n(),_(43,"input",92),g(44,Wt,2,0,"mat-error",2),n()(),o(45,"div",93)(46,"mat-form-field",94)(47,"mat-label"),a(48,"Telefone"),n(),o(49,"input",95),S("input",function(d){P(e);let m=c(3);return O(m.formatPhone(d))}),n(),g(50,Gt,2,0,"mat-error",2)(51,Yt,2,0,"mat-error",2),n()(),o(52,"div",93)(53,"mat-form-field",96)(54,"mat-label"),a(55,"Instru\xE7\xF5es para entrega"),n(),_(56,"textarea",97),n()()()}if(i&2){let e,r,d,m,u,v,w,p,E,M,x=c(3);s(6),l("ngIf",(e=x.deliveryForm.get("zipcode"))==null||e.errors==null?null:e.errors.required),s(),l("ngIf",(r=x.deliveryForm.get("zipcode"))==null||r.errors==null?null:r.errors.pattern),s(),l("disabled",!((d=x.deliveryForm.get("zipcode"))!=null&&d.value)||((d=x.deliveryForm.get("zipcode"))==null?null:d.errors)||x.loading),s(3),l("ngIf",!x.loading),s(),l("ngIf",x.loading),s(6),l("ngIf",(m=x.deliveryForm.get("address"))==null||m.errors==null?null:m.errors.required),s(5),l("ngIf",(u=x.deliveryForm.get("number"))==null||u.errors==null?null:u.errors.required),s(6),l("ngIf",(v=x.deliveryForm.get("neighborhood"))==null||v.errors==null?null:v.errors.required),s(10),l("ngIf",(w=x.deliveryForm.get("city"))==null||w.errors==null?null:w.errors.required),s(5),l("ngIf",(p=x.deliveryForm.get("state"))==null||p.errors==null?null:p.errors.required),s(6),l("ngIf",(E=x.deliveryForm.get("phone"))==null||E.errors==null?null:E.errors.required),s(),l("ngIf",(M=x.deliveryForm.get("phone"))==null||M.errors==null?null:M.errors.pattern)}}function Ht(i,t){if(i&1&&(o(0,"div",106)(1,"mat-icon"),a(2,"schedule"),n(),o(3,"span"),a(4),n()()),i&2){let e=c(4);s(4),F(e.estimatedTime)}}function Kt(i,t){if(i&1&&(o(0,"div",98)(1,"div",99)(2,"div",100)(3,"mat-icon"),a(4,"local_shipping"),n(),o(5,"h4"),a(6),n()(),o(7,"div",101)(8,"div",102)(9,"span",103),a(10,"Valor do frete:"),n(),o(11,"span",104),a(12),y(13,"number"),n()(),g(14,Ht,5,1,"div",105),n()()()),i&2){let e=c(3);s(6),h("Frete para ",e.selectedNeighborhood,""),s(6),h("R$ ",I(13,3,e.deliveryFee*1,"1.2-2"),""),s(2),l("ngIf",e.estimatedTime)}}function Jt(i,t){i&1&&(o(0,"div",107)(1,"mat-icon",108),a(2,"warning"),n(),o(3,"span"),a(4,"Fora da \xE1rea de entrega"),n()())}function en(i,t){if(i&1&&(o(0,"div",53)(1,"form",54),g(2,Dt,11,4,"div",55)(3,Xt,57,12,"div",56)(4,Kt,15,6,"div",57)(5,Jt,5,0,"div",58),n()()),i&2){let e,r=c(2);s(),l("formGroup",r.deliveryForm),s(),l("ngIf",r.addresses.length>0),s(),l("ngIf",!r.useSavedAddress),s(),l("ngIf",r.selectedNeighborhood&&r.isDeliveryAreaValid),s(),l("ngIf",!r.isDeliveryAreaValid&&!r.loadingDeliveryZones&&(((e=r.deliveryForm.get("zipcode"))==null?null:e.value)||r.selectedAddressId))}}function tn(i,t){if(i&1&&(o(0,"div",112)(1,"mat-icon"),a(2,"info"),n(),o(3,"span"),a(4),y(5,"async"),y(6,"number"),n()()),i&2){let e,r=c(3);s(4),h("Troco: R$ ",I(6,3,(((e=r.paymentForm.get("received_amount"))==null?null:e.value)||0)*1-(A(5,1,r.cartTotal$)||0)*1-r.deliveryFee*1,"1.2-2"),"")}}function nn(i,t){if(i&1&&(o(0,"div",109)(1,"mat-form-field",96)(2,"mat-label"),a(3,"Valor a ser pago"),n(),_(4,"input",110),o(5,"mat-hint"),a(6,"Informe o valor que voc\xEA vai usar para pagar"),n()(),g(7,tn,7,6,"div",111),y(8,"async"),n()),i&2){let e,r=c(2);s(7),l("ngIf",((e=r.paymentForm.get("received_amount"))==null?null:e.value)&&((e=r.paymentForm.get("received_amount"))==null?null:e.value)>(A(8,1,r.cartTotal$)||0)*1+r.deliveryFee*1)}}function on(i,t){if(i&1&&(o(0,"div",113)(1,"mat-icon"),a(2,"error"),n(),o(3,"span"),a(4),n()()),i&2){let e=c(2);s(4),F(e.error)}}function rn(i,t){if(i&1&&(o(0,"div",120)(1,"div",121),_(2,"img",122),n(),o(3,"div",123)(4,"h4",124),a(5),n(),o(6,"div",125)(7,"span",126),a(8),n(),o(9,"span",127),a(10),y(11,"number"),n()()(),o(12,"div",128),a(13),y(14,"number"),n()()),i&2){let e=t.$implicit,r=c(3);s(2),l("src",r.getImageUrl(e),$)("alt",r.getItemName(e)),s(3),F(r.getItemName(e)),s(3),h("",e.quantity,"x"),s(2),h("R$ ",I(11,6,e.price*1,"1.2-2"),""),s(3),h(" R$ ",I(14,9,e.price*1*e.quantity*1,"1.2-2")," ")}}function an(i,t){if(i&1&&(o(0,"span"),a(1),y(2,"number"),n()),i&2){let e=c(3);s(),h("R$ ",I(2,1,e.deliveryFee*1,"1.2-2"),"")}}function sn(i,t){i&1&&(o(0,"span",129),a(1,"Gr\xE1tis"),n())}function dn(i,t){if(i&1&&(o(0,"div",114)(1,"div",115),g(2,rn,15,12,"div",116),y(3,"async"),n(),o(4,"div",117)(5,"div",118)(6,"span"),a(7,"Subtotal"),n(),o(8,"span"),a(9),y(10,"async"),y(11,"number"),n()(),o(12,"div",118)(13,"span"),a(14,"Taxa de entrega"),n(),g(15,an,3,4,"span",2)(16,sn,2,0,"span",119),n()()()),i&2){let e=c(2);s(2),l("ngForOf",A(3,4,e.cartItems$)),s(7),h("R$ ",I(11,8,(A(10,6,e.cartTotal$)||0)*1,"1.2-2"),""),s(6),l("ngIf",e.deliveryFee>0),s(),l("ngIf",e.deliveryFee===0)}}function ln(i,t){i&1&&_(0,"mat-spinner",130)}function cn(i,t){i&1&&(o(0,"mat-icon"),a(1,"shopping_cart"),n())}function mn(i,t){i&1&&(o(0,"span"),a(1,"Fazer Pedido"),n())}function pn(i,t){i&1&&(o(0,"span"),a(1,"Processando..."),n())}function gn(i,t){if(i&1){let e=z();o(0,"div")(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20)(5,"div",21)(6,"mat-icon"),a(7,"place"),n(),o(8,"div",22)(9,"h3"),a(10,"Endere\xE7o de entrega"),n(),g(11,It,2,1,"div",2)(12,Ft,8,7,"div",23)(13,Tt,2,0,"p",24),n()(),o(14,"button",25),S("click",function(){P(e);let d=c();return O(d.showAddressForm=!d.showAddressForm)}),o(15,"mat-icon"),a(16,"edit"),n(),a(17," Alterar "),n()(),g(18,en,6,5,"div",26),n(),o(19,"div",27)(20,"h2",28)(21,"mat-icon"),a(22,"shopping_bag"),n(),a(23," N\xE3o esqueceu de nada? "),n(),_(24,"app-product-suggestions",29),n(),o(25,"div",30)(26,"h2",28)(27,"mat-icon"),a(28,"payment"),n(),a(29," Forma de pagamento "),n(),o(30,"form",31)(31,"div",32)(32,"button",33),S("click",function(){P(e);let d=c();return O(d.paymentForm.patchValue({method:"pix"}))}),o(33,"div",34)(34,"mat-icon"),a(35,"qr_code"),n()(),o(36,"div",35)(37,"h3"),a(38,"PIX"),n(),o(39,"p"),a(40,"Pagamento online via QR Code"),n()()(),o(41,"button",33),S("click",function(){P(e);let d=c();return O(d.paymentForm.patchValue({method:"cash"}))}),o(42,"div",34)(43,"mat-icon"),a(44,"money"),n()(),o(45,"div",35)(46,"h3"),a(47,"Dinheiro"),n(),o(48,"p"),a(49,"Pagamento na entrega"),n()()(),o(50,"button",33),S("click",function(){P(e);let d=c();return O(d.paymentForm.patchValue({method:"card"}))}),o(51,"div",34)(52,"mat-icon"),a(53,"credit_card"),n()(),o(54,"div",35)(55,"h3"),a(56,"Cart\xE3o"),n(),o(57,"p"),a(58,"Cart\xE3o na entrega"),n()()()(),g(59,nn,9,3,"div",36)(60,on,5,1,"div",37),n()(),o(61,"div",38)(62,"button",39),S("click",function(){P(e);let d=c();return O(d.showOrderSummary=!d.showOrderSummary)}),o(63,"div",40)(64,"div")(65,"h3"),a(66,"Resumo do pedido"),n(),o(67,"p"),a(68),y(69,"async"),n()(),o(70,"mat-icon"),a(71,"expand_more"),n()()(),g(72,dn,17,11,"div",41),n(),_(73,"div",42),n()(),o(74,"div",43)(75,"div",44)(76,"div",45)(77,"span",46),a(78,"Total"),n(),o(79,"span",47),a(80),y(81,"async"),y(82,"number"),n()(),o(83,"button",48),y(84,"async"),S("click",function(){P(e);let d=c();return O(d.onSubmit())}),g(85,ln,1,0,"mat-spinner",49)(86,cn,2,0,"mat-icon",2)(87,mn,2,0,"span",2)(88,pn,2,0,"span",2),n()()()()}if(i&2){let e,r,d,m,u,v,w,p=c();s(11),l("ngIf",p.useSavedAddress&&p.selectedAddressId),s(),l("ngIf",!p.useSavedAddress&&((e=p.deliveryForm.get("address"))==null?null:e.value)),s(),l("ngIf",!p.useSavedAddress&&!((r=p.deliveryForm.get("address"))!=null&&r.value)),s(5),l("ngIf",p.showAddressForm),s(6),l("cartItems$",p.cartItems$),s(6),l("formGroup",p.paymentForm),s(2),T("selected",((d=p.paymentForm.get("method"))==null?null:d.value)==="pix"),s(9),T("selected",((m=p.paymentForm.get("method"))==null?null:m.value)==="cash"),s(9),T("selected",((u=p.paymentForm.get("method"))==null?null:u.value)==="card"),s(9),l("ngIf",((v=p.paymentForm.get("method"))==null?null:v.value)==="cash"),s(),l("ngIf",p.error),s(8),h("",((w=A(69,24,p.cartItems$))==null?null:w.length)||0," itens"),s(2),T("rotated",p.showOrderSummary),s(2),l("ngIf",p.showOrderSummary),s(8),h("R$ ",I(82,28,(A(81,26,p.cartTotal$)||0)*1+p.deliveryFee*1,"1.2-2"),""),s(3),l("disabled",p.loading||p.isProcessingPayment||!p.isDeliveryAreaValid||!A(84,31,p.isStoreOpen$)),s(2),l("ngIf",p.loading||p.isProcessingPayment),s(),l("ngIf",!(p.loading||p.isProcessingPayment)),s(),l("ngIf",!(p.loading||p.isProcessingPayment)),s(),l("ngIf",p.loading||p.isProcessingPayment)}}var at=class i{constructor(t,e,r,d,m,u,v,w,p,E,M,x,V,te){this.fb=t;this.cartService=e;this.authService=r;this.orderService=d;this.cepService=m;this.addressService=u;this.deliveryZoneService=v;this.storeStatusService=w;this.snackBar=p;this.router=E;this.cdr=M;this.toastr=x;this.clipboard=V;this.sanitizer=te;this.deliveryForm=this.fb.group({address:["",k.required],number:["",k.required],complement:[""],neighborhood:["",k.required],city:["",k.required],state:["",k.required],zipcode:["",[k.required,k.pattern(/^\d{5}-\d{3}$/)]],phone:["",[k.required,k.pattern(/^\(\d{2}\) \d{5}-\d{4}$/)]],instructions:[""]}),this.paymentForm=this.fb.group({method:["cash",k.required],received_amount:[""],change:[""]}),this.isStoreOpen$=this.storeStatusService.status$}deliveryForm;paymentForm;cartItems$;cartTotal$;user$;isStoreOpen$;loading=!1;error=null;checkoutState="form";pixQrCodeBase64=null;pixCopiaECola=null;safeQrCodeUrl=null;isProcessingPayment=!1;loadingMessage="Aguardando pagamento...";paymentPollingSub;addresses=[];selectedAddressId=null;useSavedAddress=!1;loadingAddresses=!1;deliveryZones=[];selectedNeighborhood="";deliveryFee=0;estimatedTime="";loadingDeliveryZones=!1;isDeliveryAreaValid=!1;currentStep=1;showAddressForm=!1;showOrderSummary=!1;updateCartTotals(){this.cartTotal$=this.cartItems$.pipe(ae(t=>{let e=t.reduce((d,m)=>{let u=Number(m.quantity)||0,v=Number(m.price)||0;return d+u*v},0);if(!Number.isFinite(e))return 0;let r=Number(e.toFixed(2));return Number.isFinite(r)?r:0}))}_fetchFrete(t){if(!t||t.replace(/\D/g,"").length<8){this.deliveryFee=0,this.estimatedTime="",this.isDeliveryAreaValid=!1;return}this.loadingDeliveryZones=!0,this.deliveryZoneService.calculateFrete(t).subscribe({next:e=>{this.deliveryFee=parseFloat(String(e?.valor_frete??"0"))||0,this.estimatedTime=e?.tempo_estimado||"",this.isDeliveryAreaValid=!0,this.loadingDeliveryZones=!1,this.updateCartTotals()},error:e=>{console.error("Erro ao calcular frete:",e),this.deliveryFee=0,this.estimatedTime="N\xE3o dispon\xEDvel",this.isDeliveryAreaValid=!1,this.loadingDeliveryZones=!1,e.status===404&&this.snackBar.open("Infelizmente, ainda n\xE3o atendemos este CEP.","Fechar",{duration:5e3})}})}ngOnInit(){this.cartItems$=this.cartService.cartItems$,this.updateCartTotals(),this.user$=this.authService.user$,this.user$.subscribe(t=>{t&&this.deliveryForm.patchValue({phone:t.phone})}),this.loadAddresses(),this.loadDeliveryZones()}loadAddresses(){this.loadingAddresses=!0,this.addressService.getAddresses().subscribe({next:t=>{if(this.addresses=t,this.loadingAddresses=!1,t.length>0){this.useSavedAddress=!0;let e=t.find(r=>r.is_default);e?this.selectAddress(e.id):this.selectAddress(t[0].id)}else this.useSavedAddress=!1},error:t=>{console.error("Erro ao carregar endere\xE7os:",t),this.loadingAddresses=!1,this.useSavedAddress=!1}})}selectAddress(t){this.selectedAddressId=t,this.useSavedAddress=!0;let e=this.addresses.find(r=>r.id===t);e&&(this.deliveryForm.patchValue({zipcode:e.zipcode,address:e.street,number:e.number,complement:e.complement,neighborhood:e.neighborhood,city:e.city,state:e.state,instructions:e.notes}),e.zipcode?this._fetchFrete(e.zipcode):this.isDeliveryAreaValid=!1)}onAddressOptionChange(t){let e=t.value;if(console.log("Address option changed:",e),this.useSavedAddress=e,this.useSavedAddress){if(this.addresses.length>0&&!this.selectedAddressId){let r=this.addresses.find(d=>d.is_default);r?this.selectAddress(r.id):this.selectAddress(this.addresses[0].id)}}else this.useNewAddress();this.cdr.detectChanges()}useNewAddress(){console.log("Using new address"),this.useSavedAddress=!1,this.selectedAddressId=null,this.deliveryForm.reset(),this.isDeliveryAreaValid=!1;let t=this.deliveryForm.get("phone")?.value;this.deliveryForm.patchValue({phone:t}),this.cdr.detectChanges(),console.log("New address setup complete:",{useSavedAddress:this.useSavedAddress,selectedAddressId:this.selectedAddressId,formValue:this.deliveryForm.value})}isDeliveryFormValid(){return console.log("Validating delivery form:",{useSavedAddress:this.useSavedAddress,selectedAddressId:this.selectedAddressId,formValid:this.deliveryForm.valid,formValue:this.deliveryForm.value}),this.useSavedAddress?this.selectedAddressId!==null:this.deliveryForm.valid}formatPhone(t){let e=t.target.value.replace(/\D/g,"");e.length<=11&&(e=e.replace(/^(\d{2})(\d{5})(\d{4}).*/,"($1) $2-$3"),this.deliveryForm.get("phone")?.setValue(e,{emitEvent:!1}))}formatZipcode(t){let e=t.target.value.replace(/\D/g,"");e.length<=8&&(e=e.replace(/^(\d{5})(\d{3}).*/,"$1-$2"),this.deliveryForm.get("zipcode")?.setValue(e,{emitEvent:!1}))}searchCep(){let t=this.deliveryForm.get("zipcode")?.value;!t||!this.cepService.isValidCep(t)||(this.loading=!0,this.cepService.searchCep(t).subscribe({next:e=>{let r=this.deliveryZones.find(u=>u.nome_bairro.toLowerCase().includes(e.neighborhood.toLowerCase())||e.neighborhood.toLowerCase().includes(u.nome_bairro.toLowerCase())),d={address:e.street||"",city:e.city||"",state:e.state||""};r?(d.neighborhood=r.nome_bairro,this.selectedNeighborhood=r.nome_bairro):(d.neighborhood=e.neighborhood||"",this.selectedNeighborhood=e.neighborhood||""),this.deliveryForm.patchValue(d);let m=this.deliveryForm.get("neighborhood");m&&d.neighborhood&&m.setValue(d.neighborhood,{emitEvent:!0}),this.calculateFreteFromCep(),this.loading=!1,this.cdr.detectChanges()},error:e=>{console.error("Erro ao buscar CEP:",e),this.error=e.message||"Erro ao buscar CEP",this.loading=!1}}))}onNeighborhoodChange(){let t=this.deliveryForm.get("neighborhood")?.value;if(t){this.selectedNeighborhood=t;let e=this.deliveryZones.find(d=>d.nome_bairro.toLowerCase()===t.toLowerCase()||d.nome_bairro.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(d.nome_bairro.toLowerCase()));e&&(this.selectedNeighborhood=e.nome_bairro,this.deliveryForm.patchValue({neighborhood:e.nome_bairro}));let r=this.deliveryForm.get("zipcode")?.value;r&&this.cepService.isValidCep(r)&&this.calculateFreteFromCep()}}clearError(){this.error=null}loadDeliveryZones(){this.loadingDeliveryZones=!0,this.deliveryZoneService.getDeliveryZones().subscribe({next:t=>{this.deliveryZones=t,this.loadingDeliveryZones=!1},error:t=>{console.error("Erro ao carregar zonas de entrega:",t),this.loadingDeliveryZones=!1}})}calculateFreteFromCep(){let t=this.deliveryForm.get("zipcode");t&&t.valid&&t.value?this._fetchFrete(t.value):(this.deliveryFee=0,this.estimatedTime="",this.isDeliveryAreaValid=!1)}nextStep(){this.currentStep<4&&(this.currentStep++,this.scrollToTop())}prevStep(){this.currentStep>1&&(this.currentStep--,this.scrollToTop())}scrollToTop(){let t=document.querySelector(".checkout-container")||document.body;if(t){let d=t.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:d,behavior:"smooth"})}}scrollToCashInput(){setTimeout(()=>{let t=document.getElementById("received-amount-input");t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus())},100)}scrollToFirstInvalidField(){setTimeout(()=>{let t=["zipcode","address","number","neighborhood","complement","city","state","phone","instructions"];for(let d of t){let m=this.deliveryForm.get(d);if(m&&m.invalid){let u=document.querySelector(`[formControlName="${d}"]`);if(u){let v=u,E=v.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:E,behavior:"smooth"});let M=v.querySelector("input")||v.querySelector("textarea")||v;M&&M.focus&&setTimeout(()=>M.focus(),300);return}}}let e=["method","received_amount"];for(let d of e){let m=this.paymentForm.get(d);if(m&&m.invalid){let u=document.querySelector(`[formControlName="${d}"]`);if(u){let v=u,E=v.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:E,behavior:"smooth"});let M=v.querySelector("input")||v.querySelector("textarea")||v;M&&M.focus&&setTimeout(()=>M.focus(),300);return}}}let r=document.querySelector(".address-form-expandable");if(r){let u=r.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:u,behavior:"smooth"})}},100)}onSubmit(){return oe(this,null,function*(){if(console.log("--- DEBUG CHECKOUT: In\xEDcio do onSubmit ---"),!this.storeStatusService.getCurrentStatus()){this.toastr.error("Desculpe, a adega est\xE1 fechada no momento. N\xE3o \xE9 poss\xEDvel realizar pedidos.","Loja Fechada");return}let e=typeof this.authService.getCurrentUser=="function"?this.authService.getCurrentUser():typeof this.authService.getUser=="function"?this.authService.getUser():null;if(console.log("Usu\xE1rio logado (segundo o AuthService):",e),!e){console.error("ERRO GRAVE: O usu\xE1rio n\xE3o est\xE1 logado no Angular, mas o checkout foi permitido!"),this.loading=!1,this.isProcessingPayment=!1;return}if(!this.isDeliveryFormValid()||this.paymentForm.invalid){this.showAddressForm||(this.showAddressForm=!0),this.deliveryForm.markAllAsTouched(),this.paymentForm.markAllAsTouched(),this.toastr.warning("Por favor, preencha todos os campos obrigat\xF3rios (ex: Telefone, N\xFAmero).","Campos Obrigat\xF3rios"),setTimeout(()=>{this.scrollToFirstInvalidField()},200);return}if(!this.isDeliveryAreaValid){this.toastr.warning("Infelizmente n\xE3o entregamos neste endere\xE7o. Por favor, escolha outro endere\xE7o ou CEP.","Fora da \xC1rea de Entrega");return}this.isProcessingPayment=!0,this.loading=!0,this.error=null,this.checkoutState="form";try{let r=yield ne(this.cartItems$);if(!r||r.length===0){this.error="Seu carrinho est\xE1 vazio",this.isProcessingPayment=!1,this.loading=!1;return}let d=yield ne(this.cartTotal$),u=(Number.isFinite(d)?Number(d):0)+this.deliveryFee,v={cash:"dinheiro",card:"cart\xE3o de d\xE9bito",pix:"pix"},w=this.paymentForm.value.method||"cash",p=v[w]||"dinheiro",E=p==="dinheiro";if(E){let f=this.paymentForm.value.received_amount||this.paymentForm.value.change;if(!f||f===""||f===null||f===void 0){this.isProcessingPayment=!1,this.loading=!1,this.toastr.warning("Informe o valor para troco","Valor Obrigat\xF3rio"),this.scrollToCashInput();return}let b=Number(f);if(!Number.isFinite(b)||b<=0){this.isProcessingPayment=!1,this.loading=!1,this.toastr.warning("Informe um valor v\xE1lido para troco","Valor Inv\xE1lido"),this.scrollToCashInput();return}if(b<u){this.isProcessingPayment=!1,this.loading=!1,this.toastr.warning(`O valor informado (R$ ${b.toFixed(2)}) \xE9 menor que o total do pedido (R$ ${u.toFixed(2)})`,"Valor Insuficiente"),this.scrollToCashInput();return}}let M,x;if(E){let f=this.paymentForm.value.received_amount||this.paymentForm.value.change,b=Number(f);Number.isFinite(b)&&b>0&&(M=b,x=b>=u?b-u:0)}else M=void 0,x=void 0;let V=this.useSavedAddress&&this.selectedAddressId?{address_id:this.selectedAddressId,phone:this.deliveryForm.value.phone,instructions:""}:ie({name:"Endere\xE7o de Entrega"},this.deliveryForm.value),te={type:"online",delivery:V,payment_method:p,customer_name:V.address,customer_phone:V.phone,items:r.map(f=>f.isCombo&&f.combo?{combo_id:f.combo.id,quantity:f.quantity,sale_type:"garrafa"}:f.product?{product_id:f.product.id,quantity:f.quantity,sale_type:"garrafa"}:null).filter(f=>f!==null),delivery_fee:this.deliveryFee,received_amount:M,change_amount:x};console.log("Payload que ser\xE1 enviado para 'createOrder':",te),this.orderService.createOrder(te).subscribe({next:f=>{if(this.cartService.clearCart(),w!=="pix"){this.loading=!1,this.isProcessingPayment=!1,this.toastr.success("Pedido recebido! (Pagamento na entrega)"),this.router.navigate(["/pedidos"]);return}this.pixQrCodeBase64=null,this.pixCopiaECola=null,this.safeQrCodeUrl=null,this.orderService.createPixPayment(f.id).subscribe({next:b=>{this.pixQrCodeBase64=b.pix_qr_code_base64,this.pixCopiaECola=b.pix_copia_e_cola,this.pixQrCodeBase64&&(this.safeQrCodeUrl=this.sanitizer.bypassSecurityTrustUrl("data:image/png;base64,"+this.pixQrCodeBase64)),this.checkoutState="awaiting_payment",this.isProcessingPayment=!1,this.loading=!1,window.scrollTo({top:0,behavior:"smooth"}),this.startPaymentPolling(f.id)},error:b=>{console.error("Erro ao gerar PIX:",b),this.toastr.error("Erro ao gerar o PIX. Tente novamente.","Falha no Pagamento"),this.isProcessingPayment=!1,this.loading=!1,this.checkoutState="form"}})},error:f=>{console.error("Erro ao criar pedido:",f);let b=f?.error?.error||f?.error?.message||"Erro ao criar seu pedido. Verifique os dados.";this.toastr.error(b,"Falha"),this.isProcessingPayment=!1,this.loading=!1}})}catch(r){console.error("Erro ao processar pedido:",r),this.loading=!1,this.isProcessingPayment=!1,this.toastr.error("Erro ao processar pedido.","Falha")}})}getImageUrl(t){if(t.isCombo&&t.combo)return t.combo.images&&t.combo.images.length>0?t.combo.images[0]:"assets/images/default-combo.jpg";if(t.product){let e=t.product.image_url;if(!e)return"assets/images/no-image.png";if(e.startsWith("http://")||e.startsWith("https://"))return`${e}?v=${encodeURIComponent(t.product.updated_at||"")}`;if(e.startsWith("/storage/")||e.startsWith("storage/")){let r=L.apiUrl.replace(/\/api$/,""),d=e.startsWith("/")?e:`/${e}`;return`${r}${d}?v=${encodeURIComponent(t.product.updated_at||"")}`}return`${e}?v=${encodeURIComponent(t.product.updated_at||"")}`}return"assets/images/no-image.png"}getItemName(t){return t.isCombo&&t.combo?t.combo.name:t.product?t.product.name:"Item"}getItemCategory(t){return t.isCombo&&t.combo?"Combo":t.product&&t.product.category?t.product.category.name:"Categoria"}copiarPix(){this.pixCopiaECola&&(this.clipboard.copy(this.pixCopiaECola),this.toastr.success("C\xF3digo PIX copiado!"))}startPaymentPolling(t){this.stopPaymentPolling(),this.loadingMessage="Aguardando pagamento...",this.paymentPollingSub=se(0,5e3).pipe(de(()=>this.orderService.getOrderById(t)),me(e=>{let r=e.payment||e.payments||[],d=r.length>0?r[0].status:"unknown";console.log(`[Polling] Status do pedido: ${e.status}, Status do pagamento: ${d}`)}),ce(e=>{let d=(e.payment||e.payments||[]).some(m=>["completed","failed","cancelled","refunded"].includes(m.status));return e.status==="pending"&&!d},!0)).subscribe({next:e=>{let r=e.payment||e.payments||[],d=Array.isArray(r)?r[0]:r;d&&d.status==="completed"||e.status==="processing"?(this.stopPaymentPolling(),this.loadingMessage="Pagamento Aprovado!",this.toastr.success("Pagamento aprovado! Redirecionando...","Sucesso!"),this.cartService.clearCart(),setTimeout(()=>{this.router.navigate(["/pedidos"])},2500)):d&&(d.status==="failed"||d.status==="cancelled")&&(this.stopPaymentPolling(),this.loadingMessage="Pagamento n\xE3o aprovado",this.toastr.error("O pagamento falhou ou foi cancelado. Tente novamente.","Erro"),setTimeout(()=>{this.checkoutState="form",this.loadingMessage="Aguardando pagamento..."},3e3))},error:e=>{console.error("Erro durante o polling do pagamento",e),this.toastr.error("Houve um erro ao verificar seu pagamento. Tente recarregar a p\xE1gina.","Erro")}})}stopPaymentPolling(){this.paymentPollingSub&&(this.paymentPollingSub.unsubscribe(),this.paymentPollingSub=void 0,console.log("[Polling] Verifica\xE7\xE3o de pagamento interrompida."))}ngOnDestroy(){this.stopPaymentPolling()}static \u0275fac=function(e){return new(e||i)(C(ze),C(X),C(ye),C(tt),C(nt),C(it),C(ot),C(Ve),C(be),C(xe),C(_e),C(Z),C(rt),C(ve))};static \u0275cmp=N({type:i,selectors:[["app-checkout"]],decls:3,vars:2,consts:[[1,"checkout-page"],["class","pix-payment-container",4,"ngIf"],[4,"ngIf"],[1,"pix-payment-container"],[1,"pix-container"],[1,"subtitle-text"],[1,"instruction-text"],["alt","QR Code PIX","class","qr-code-image",3,"src",4,"ngIf"],[1,"copia-cola-container"],[1,"small-label"],[1,"input-group-compact"],["type","text","readonly","",1,"pix-input-compact",3,"value"],["mat-raised-button","","color","primary",1,"btn-copy-compact",3,"click","disabled"],[1,"loading-message"],["mode","indeterminate"],[1,"warning-text"],["alt","QR Code PIX",1,"qr-code-image",3,"src"],[1,"checkout-container"],[1,"checkout-content"],[1,"address-block","card"],[1,"address-header"],[1,"address-info"],[1,"address-text"],["class","address-display",4,"ngIf"],["class","address-empty",4,"ngIf"],["mat-button","",1,"alter-address-btn",3,"click"],["class","address-form-expandable",4,"ngIf"],[1,"suggestions-block"],[1,"section-title"],[3,"cartItems$"],[1,"payment-block","card"],[3,"formGroup"],[1,"payment-cards"],["type","button",1,"payment-card-selectable",3,"click"],[1,"payment-icon-large"],[1,"payment-text"],["class","change-field-expandable",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"order-summary-block","card"],["type","button",1,"summary-toggle",3,"click"],[1,"summary-header-toggle"],["class","summary-content",4,"ngIf"],[1,"bottom-spacer"],[1,"sticky-footer"],[1,"footer-content"],[1,"footer-total"],[1,"total-label"],[1,"total-value"],["mat-raised-button","","color","primary",1,"finalize-button",3,"click","disabled"],["diameter","20","style","display: inline-block; margin-right: 8px;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"address-display"],[1,"address-empty"],[1,"address-form-expandable"],[1,"delivery-form",3,"formGroup"],["class","address-selection",4,"ngIf"],["class","address-form",4,"ngIf"],["class","delivery-fee-section",4,"ngIf"],["class","delivery-area-warning",4,"ngIf"],[1,"address-selection"],[1,"address-options"],[3,"change","value"],["class","address-option",3,"value",4,"ngIf"],[1,"address-option",3,"value"],[1,"option-content"],["class","saved-addresses",4,"ngIf"],[1,"saved-addresses"],["class","address-card-small",3,"selected","click",4,"ngFor","ngForOf"],[1,"address-card-small",3,"click"],[1,"address-header-small"],["color","primary","class","default-chip",4,"ngIf"],[1,"address-details-small"],["color","primary",1,"default-chip"],[1,"address-form"],[1,"form-row","cep-row"],[1,"cep-input"],["matInput","","formControlName","zipcode","placeholder","00000-000",3,"input","blur"],["mat-raised-button","","color","primary",1,"cep-button",3,"click","disabled"],[1,"form-row","address-number-row"],[1,"address-field"],["matInput","","formControlName","address","placeholder","Rua, Avenida, etc"],[1,"number-field"],["matInput","","formControlName","number","placeholder","123"],[1,"form-row","neighborhood-complement-row"],[1,"neighborhood-field"],["matInput","","formControlName","neighborhood","placeholder","Seu bairro",3,"input"],[1,"complement-field"],["matInput","","formControlName","complement","placeholder","Apto, Bloco, etc"],[1,"form-row","city-state-row"],[1,"city-field"],["matInput","","formControlName","city","placeholder","Sua cidade"],[1,"state-field"],["matInput","","formControlName","state","placeholder","UF","maxlength","2"],[1,"form-row"],[1,"phone-field"],["matInput","","formControlName","phone","placeholder","(00) 00000-0000",3,"input"],[1,"full-width"],["matInput","","formControlName","instructions","placeholder","Instru\xE7\xF5es especiais para entrega"],[1,"delivery-fee-section"],[1,"fee-card"],[1,"fee-header"],[1,"fee-details"],[1,"fee-amount"],[1,"fee-label"],[1,"fee-value"],["class","delivery-time",4,"ngIf"],[1,"delivery-time"],[1,"delivery-area-warning"],["color","warn"],[1,"change-field-expandable"],["id","received-amount-input","matInput","","formControlName","received_amount","type","number","step","0.01","min","0","placeholder","0.00"],["class","change-info",4,"ngIf"],[1,"change-info"],[1,"error-message"],[1,"summary-content"],[1,"cart-items-summary"],["class","cart-item-summary",4,"ngFor","ngForOf"],[1,"order-totals-summary"],[1,"total-row-summary"],["class","free-delivery",4,"ngIf"],[1,"cart-item-summary"],[1,"item-image-small"],[3,"src","alt"],[1,"item-details-summary"],[1,"item-name-summary"],[1,"item-info-summary"],[1,"item-quantity-summary"],[1,"item-price-summary"],[1,"item-total-summary"],[1,"free-delivery"],["diameter","20",2,"display","inline-block","margin-right","8px"]],template:function(e,r){e&1&&(o(0,"div",0),g(1,Mt,24,4,"div",1)(2,gn,89,33,"div",2),n()),e&2&&(s(),l("ngIf",r.checkoutState==="awaiting_payment"),s(),l("ngIf",r.checkoutState==="form"))},dependencies:[j,q,R,he,U,Ce,$e,we,Oe,Ee,Me,Se,Te,Fe,Ie,ke,Ae,Qe,W,Q,Ue,Re,De,qe,Be,Ze,je,Ye,We,Ge,J,K,Y,G,H,He,Xe,Ke,Pe,Le,ee,et,Je],styles:[".checkout-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5;padding:0 0 100px}.checkout-page[_ngcontent-%COMP%]:has(.pix-payment-container){padding-top:0}.checkout-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:16px}.checkout-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px #00000014}.address-block[_ngcontent-%COMP%]{margin-bottom:0}.address-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:16px}.address-info[_ngcontent-%COMP%]{display:flex;gap:12px;flex:1}.address-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary);font-size:24px;width:24px;height:24px;margin-top:2px}.address-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin:0 0 8px}.address-display[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);line-height:1.5;margin:0}.address-display[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.address-empty[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);font-style:italic;margin:0}.alter-address-btn[_ngcontent-%COMP%]{color:var(--primary);min-width:auto;padding:0;white-space:nowrap}.alter-address-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.address-form-expandable[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid #e0e0e0;animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0;transform:translateY(-10px)}to{opacity:1;max-height:1000px;transform:translateY(0)}}.address-card-small[_ngcontent-%COMP%]{padding:16px;border:2px solid #e0e0e0;border-radius:12px;margin-bottom:12px;cursor:pointer;transition:all .2s ease}.address-card-small[_ngcontent-%COMP%]:hover{border-color:var(--primary)}.address-card-small.selected[_ngcontent-%COMP%]{border-color:var(--primary);background:#ffcc000d}.address-header-small[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.address-header-small[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary);margin:0}.address-details-small[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);margin:4px 0;line-height:1.4}.address-details-small[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary)}.default-chip[_ngcontent-%COMP%]{font-size:10px;height:20px}.delivery-fee-section[_ngcontent-%COMP%]{margin-top:16px}.fee-card[_ngcontent-%COMP%]{background:#fff8e1;border:1px solid var(--primary);border-radius:12px;padding:16px}.fee-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px}.fee-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary);font-size:20px}.fee-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary);margin:0}.fee-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.fee-value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary)}.delivery-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:var(--primary);font-size:13px}.delivery-area-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:#fff3cd;border:1px solid #ffc107;border-radius:8px;color:#856404;font-size:14px;margin-top:16px}.address-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:16px}.cep-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:12px;align-items:start}.cep-input[_ngcontent-%COMP%]{flex:1}.cep-button[_ngcontent-%COMP%]{white-space:nowrap;min-width:120px;height:56px}.form-row.address-number-row[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr}.address-field[_ngcontent-%COMP%]{flex:1}.number-field[_ngcontent-%COMP%]{min-width:100px}.form-row.neighborhood-complement-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.neighborhood-field[_ngcontent-%COMP%], .complement-field[_ngcontent-%COMP%]{flex:1}.form-row.city-state-row[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr}.city-field[_ngcontent-%COMP%]{flex:1}.state-field[_ngcontent-%COMP%]{min-width:80px}.phone-field[_ngcontent-%COMP%], .full-width[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.cep-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.cep-button[_ngcontent-%COMP%]{width:100%}.form-row.address-number-row[_ngcontent-%COMP%], .form-row.neighborhood-complement-row[_ngcontent-%COMP%], .form-row.city-state-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.suggestions-block[_ngcontent-%COMP%]{margin-bottom:0}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;color:var(--text-primary);margin:0 0 16px}.section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary);font-size:24px;width:24px;height:24px}.payment-block[_ngcontent-%COMP%]{margin-bottom:0}.payment-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:16px}.payment-card-selectable[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;background:#fff;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s ease;text-align:left;width:100%;min-height:80px}.payment-card-selectable[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:#ffcc000d}.payment-card-selectable.selected[_ngcontent-%COMP%]{border:3px solid var(--primary);background:#ffcc001a;box-shadow:0 4px 12px #fc03}.payment-icon-large[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;background:#ffcc0026;display:flex;align-items:center;justify-content:center;flex-shrink:0}.payment-card-selectable.selected[_ngcontent-%COMP%]   .payment-icon-large[_ngcontent-%COMP%]{background:var(--primary)}.payment-icon-large[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:var(--primary)}.payment-card-selectable.selected[_ngcontent-%COMP%]   .payment-icon-large[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--secondary)}.payment-text[_ngcontent-%COMP%]{flex:1}.payment-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin:0 0 4px}.payment-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);margin:0}.change-field-expandable[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e0e0e0;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.change-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:12px;padding:12px;background:#e8f5e9;border:1px solid #4caf50;border-radius:8px;color:#2e7d32;font-weight:500;font-size:14px}.change-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:20px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:#ffebee;border:1px solid #f44336;border-radius:8px;color:#c62828;font-size:14px;margin-top:16px}.order-summary-block[_ngcontent-%COMP%]{margin-bottom:0}.summary-toggle[_ngcontent-%COMP%]{width:100%;background:none;border:none;padding:0;cursor:pointer;text-align:left}.summary-header-toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.summary-header-toggle[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin:0 0 4px}.summary-header-toggle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);margin:0}.summary-header-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:24px;width:24px;height:24px;transition:transform .3s ease}.summary-header-toggle[_ngcontent-%COMP%]   mat-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.summary-content[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e0e0e0;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.cart-items-summary[_ngcontent-%COMP%]{margin-bottom:16px}.cart-item-summary[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px 0;border-bottom:1px solid #f0f0f0}.cart-item-summary[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-image-small[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;overflow:hidden;flex-shrink:0}.item-image-small[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.item-details-summary[_ngcontent-%COMP%]{flex:1;min-width:0}.item-name-summary[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-primary);margin:0 0 4px;line-height:1.3}.item-info-summary[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:12px;color:var(--text-secondary)}.item-total-summary[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary);white-space:nowrap}.order-totals-summary[_ngcontent-%COMP%]{padding-top:12px;border-top:1px solid #e0e0e0}.total-row-summary[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:14px;color:var(--text-secondary)}.free-delivery[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:500}.sticky-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#fff;box-shadow:0 -2px 12px #0000001a;z-index:1000;padding:16px;border-top:1px solid #e0e0e0}.footer-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:16px}.footer-total[_ngcontent-%COMP%]{display:flex;flex-direction:column}.total-label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);margin-bottom:2px}.total-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-primary)}.finalize-button[_ngcontent-%COMP%]{background:var(--primary);color:var(--secondary);padding:14px 32px;border-radius:12px;font-weight:600;font-size:16px;min-width:160px;height:56px;box-shadow:0 4px 12px #ffcc004d}.finalize-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-dark);box-shadow:0 6px 16px #fc06;transform:translateY(-1px)}.finalize-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.bottom-spacer[_ngcontent-%COMP%]{height:80px}.pix-payment-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;padding:1rem 1rem 2rem;max-width:100%;margin:0 auto}.pix-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;border:1px solid #eee;border-radius:12px;padding:1rem 1.25rem;box-shadow:0 4px 12px #0000000d;width:100%;max-width:450px;background:#fff;margin-top:0}.pix-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;margin-top:0!important;margin-bottom:.5rem;padding-top:0;color:var(--text-primary);font-weight:600}.pix-container[_ngcontent-%COMP%]   .subtitle-text[_ngcontent-%COMP%]{font-size:.85rem;color:#888;margin-bottom:.75rem}.pix-container[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin-bottom:.75rem}.qr-code-image[_ngcontent-%COMP%]{width:100%;max-width:180px;height:auto;border:1px solid #ddd;border-radius:4px;margin:.5rem 0}.copia-cola-container[_ngcontent-%COMP%]{margin-top:.75rem;width:100%;text-align:left}.copia-cola-container[_ngcontent-%COMP%]   .small-label[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#666;margin-bottom:.5rem}.input-group-compact[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:stretch;width:100%}.pix-input-compact[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;border:1px solid #ccc;border-radius:4px;font-family:monospace;font-size:.75rem;background:#f9f9f9;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-copy-compact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:.5rem .75rem;white-space:nowrap;min-width:auto;flex-shrink:0}.btn-copy-compact[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.btn-copy-compact[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem}.pix-container[_ngcontent-%COMP%]   .loading-message[_ngcontent-%COMP%]{font-weight:700;font-size:.9rem;margin-top:1rem;margin-bottom:.5rem;color:var(--text-primary)}.pix-container[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{font-size:.8rem;color:#666;margin-top:.5rem;margin-bottom:0}  .product-suggestions{margin:0!important;padding:0!important;background:transparent!important;border:none!important}  .suggestions-header{display:none!important}  .suggestions-grid{display:flex!important;overflow-x:auto!important;overflow-y:hidden!important;gap:12px!important;padding:8px 0 16px!important;scroll-behavior:smooth!important;-webkit-overflow-scrolling:touch!important}  .suggestions-grid::-webkit-scrollbar{height:4px}  .suggestions-grid::-webkit-scrollbar-track{background:#f0f0f0;border-radius:2px}  .suggestions-grid::-webkit-scrollbar-thumb{background:var(--primary);border-radius:2px}  .suggestion-card{min-width:160px!important;max-width:160px!important;flex-shrink:0!important;background:#fff!important;border-radius:12px!important;padding:12px!important;box-shadow:0 2px 8px #00000014!important;display:flex!important;flex-direction:column!important}  .product-image{width:80px!important;height:80px!important;margin:0 auto 8px!important}  .product-name{font-size:13px!important;margin-bottom:4px!important;text-align:center!important}  .product-category{font-size:11px!important;text-align:center!important;margin-bottom:8px!important}  .product-price{margin-bottom:8px!important}  .current-price{font-size:16px!important;font-weight:700!important;color:var(--text-primary)!important}  .add-button{width:100%!important;height:36px!important;font-size:13px!important;border-radius:8px!important;background:var(--primary)!important;color:var(--secondary)!important}@media (max-width: 768px){.checkout-container[_ngcontent-%COMP%]{padding:12px}.card[_ngcontent-%COMP%]{padding:16px}.payment-card-selectable[_ngcontent-%COMP%]{padding:16px;min-height:70px}.payment-icon-large[_ngcontent-%COMP%]{width:40px;height:40px}.payment-icon-large[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.footer-content[_ngcontent-%COMP%]{padding:0 12px}.total-value[_ngcontent-%COMP%]{font-size:20px}.finalize-button[_ngcontent-%COMP%]{padding:12px 24px;font-size:14px;min-width:140px;height:48px}}@media (max-width: 480px){.checkout-container[_ngcontent-%COMP%]{padding:8px}.card[_ngcontent-%COMP%]{padding:12px;border-radius:8px}.address-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.alter-address-btn[_ngcontent-%COMP%]{align-self:flex-end}.payment-card-selectable[_ngcontent-%COMP%]{padding:12px;gap:12px;min-height:60px}.payment-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.payment-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.total-value[_ngcontent-%COMP%]{font-size:18px}.finalize-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px;min-width:120px;height:44px}  .suggestion-card{min-width:140px!important;max-width:140px!important;padding:10px!important}  .product-image{width:60px!important;height:60px!important}.pix-payment-container[_ngcontent-%COMP%]{padding:.5rem .75rem 1.5rem}.pix-container[_ngcontent-%COMP%]{padding:.75rem 1rem;margin-top:0}.pix-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;margin-top:0!important;margin-bottom:.4rem;padding-top:0}.pix-container[_ngcontent-%COMP%]   .subtitle-text[_ngcontent-%COMP%]{font-size:.75rem;margin-bottom:.6rem}.pix-container[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:.6rem}.qr-code-image[_ngcontent-%COMP%]{max-width:160px;margin:.4rem 0}.copia-cola-container[_ngcontent-%COMP%]{margin-top:.6rem}.copia-cola-container[_ngcontent-%COMP%]   .small-label[_ngcontent-%COMP%]{font-size:.75rem;margin-bottom:.4rem}.pix-input-compact[_ngcontent-%COMP%]{font-size:.7rem;padding:.4rem .6rem}.btn-copy-compact[_ngcontent-%COMP%]{padding:.4rem .6rem}.btn-copy-compact[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}.pix-container[_ngcontent-%COMP%]   .loading-message[_ngcontent-%COMP%]{font-size:.85rem;margin-top:.75rem;margin-bottom:.4rem}.pix-container[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{font-size:.75rem;margin-top:.4rem}}"]})};export{at as CheckoutComponent};
