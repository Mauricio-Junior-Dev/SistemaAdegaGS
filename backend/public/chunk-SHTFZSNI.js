import{a as ne}from"./chunk-PGYBCOB3.js";import{b as ze,c as Le,d as Ae}from"./chunk-4JC344WS.js";import{a as $,b as ee}from"./chunk-2AYT26RD.js";import{a as Ie,b as Oe}from"./chunk-AZNECWMR.js";import"./chunk-DSBPOWF5.js";import{a as we,b as ye}from"./chunk-UZCBXNKU.js";import{a as Fe,b as Ve,c as Te,e as De,f as We,g as Ge,h as te}from"./chunk-ESHAXR7Y.js";import{a as Pe,d as Ee}from"./chunk-Z5I7IYIZ.js";import"./chunk-F5X5MWHG.js";import{a as ke,b as Be}from"./chunk-JA72YPWQ.js";import{a as _e}from"./chunk-272E3S6K.js";import{a as q,c as Me,e as ve,h as H,i as J,m as K,n as Q}from"./chunk-A7QNIJLU.js";import"./chunk-J3TQETGC.js";import{a as j,b as he,c as N,d as be,e as U,f as Ce,g as R}from"./chunk-RQVK44YC.js";import{a as Se,b as xe}from"./chunk-XQ665L5U.js";import{b as D,c as W}from"./chunk-CDWAOTFZ.js";import"./chunk-OELRWU3S.js";import"./chunk-HCRJH4BX.js";import{a as E,b as k}from"./chunk-OZHJ4RLB.js";import{T as de,Y as V,_ as T}from"./chunk-E25F7JMY.js";import{b as G,g as z,j as L,l as ge,u as pe,v as ue,w as fe,z as A}from"./chunk-O2P35CN4.js";import{$a as S,$b as h,Bb as i,Cb as a,Da as Z,Db as M,Hb as x,Hc as me,Ic as y,Kb as u,Lb as f,Rc as P,Ua as B,Vb as F,Wa as o,Wb as r,Xb as v,Yb as X,a as I,ac as b,bc as C,gb as w,lb as _,sb as p,ta as d,ua as g,ub as O,vb as ce}from"./chunk-G6OUGGHL.js";function Ye(s,n){if(s&1&&M(0,"img",22),s&2){let t=f();p("src",t.getImageUrl(t.bannerForm.desktop_image),B)}}function Ze(s,n){s&1&&M(0,"mat-progress-bar",23)}function Ue(s,n){if(s&1&&M(0,"img",24),s&2){let t=f();p("src",t.getImageUrl(t.bannerForm.mobile_image),B)}}function $e(s,n){s&1&&M(0,"mat-progress-bar",23)}var Y=class s{constructor(n,t,e){this.dialogRef=n;this.data=t;this.snackBar=e}bannerForm={link:"",desktop_image:"",mobile_image:"",order:1,is_active:!0};uploadingDesktop=!1;uploadingMobile=!1;isEdit=!1;ngOnInit(){this.data.banner&&(this.isEdit=!0,this.bannerForm={link:this.data.banner.link||"",desktop_image:this.data.banner.desktop_image||"",mobile_image:this.data.banner.mobile_image||"",order:this.data.banner.order||1,is_active:this.data.banner.is_active})}onDesktopImageSelected(n){let t=n.target.files?.[0];t&&(this.uploadingDesktop=!0,this.data.uploadImage(t).subscribe({next:e=>{this.bannerForm.desktop_image=e.image_url||e.desktop_image||"",this.uploadingDesktop=!1,this.snackBar.open("Imagem Desktop enviada com sucesso!","Fechar",{duration:3e3})},error:e=>{console.error("Erro ao fazer upload da imagem:",e),this.snackBar.open("Erro ao fazer upload da imagem Desktop","Fechar",{duration:3e3}),this.uploadingDesktop=!1}}))}onMobileImageSelected(n){let t=n.target.files?.[0];t&&(this.uploadingMobile=!0,this.data.uploadImage(t).subscribe({next:e=>{this.bannerForm.mobile_image=e.image_url||e.mobile_image||"",this.uploadingMobile=!1,this.snackBar.open("Imagem Mobile enviada com sucesso!","Fechar",{duration:3e3})},error:e=>{console.error("Erro ao fazer upload da imagem:",e),this.snackBar.open("Erro ao fazer upload da imagem Mobile","Fechar",{duration:3e3}),this.uploadingMobile=!1}}))}getImageUrl(n){return n?n.startsWith("http://")||n.startsWith("https://")?n:n.startsWith("/storage/")?"http://localhost:8000"+n:n.startsWith("storage/")?"http://localhost:8000/"+n:"http://localhost:8000/storage/"+n:""}saveBanner(){if(!this.bannerForm.desktop_image){this.snackBar.open("Por favor, selecione a imagem Desktop","Fechar",{duration:3e3});return}if(this.isEdit&&this.data.banner){let n=I({id:this.data.banner.id},this.bannerForm);this.data.updateBanner(n).subscribe({next:t=>{this.snackBar.open("Banner atualizado com sucesso!","Fechar",{duration:3e3}),this.dialogRef.close(t)},error:t=>{console.error("Erro ao atualizar banner:",t),this.snackBar.open("Erro ao atualizar banner","Fechar",{duration:3e3})}})}else{let n=I({},this.bannerForm);this.data.createBanner(n).subscribe({next:t=>{this.snackBar.open("Banner criado com sucesso!","Fechar",{duration:3e3}),this.dialogRef.close(t)},error:t=>{console.error("Erro ao criar banner:",t),this.snackBar.open("Erro ao criar banner","Fechar",{duration:3e3})}})}}static \u0275fac=function(t){return new(t||s)(S(Fe),S(Ve),S(D))};static \u0275cmp=w({type:s,selectors:[["app-banner-dialog"]],decls:47,vars:18,consts:[["desktopInput",""],["mobileInput",""],["mat-dialog-title",""],[1,"banner-form"],[1,"image-upload-section"],[1,"image-label"],[1,"current-image",3,"click"],["alt","Preview Desktop",3,"src",4,"ngIf"],[1,"overlay"],["type","file","accept","image/*",2,"display","none",3,"change"],["mode","indeterminate",4,"ngIf"],["alt","Preview Mobile",3,"src",4,"ngIf"],[1,"form-fields"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Ex: /produtos ou https://exemplo.com",3,"ngModelChange","ngModel"],["appearance","outline"],["matInput","","type","number","min","1",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[3,"ngModelChange","ngModel"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["alt","Preview Desktop",3,"src"],["mode","indeterminate"],["alt","Preview Mobile",3,"src"]],template:function(t,e){if(t&1){let l=x();i(0,"h2",2),r(1),a(),i(2,"mat-dialog-content")(3,"div",3)(4,"div",4)(5,"label",5),r(6,"Imagem Desktop"),a(),i(7,"div",6),u("click",function(){d(l);let c=F(15);return g(c.click())}),_(8,Ye,1,1,"img",7),i(9,"div",8)(10,"mat-icon"),r(11),a(),i(12,"span"),r(13),a()()(),i(14,"input",9,0),u("change",function(c){return d(l),g(e.onDesktopImageSelected(c))}),a(),_(16,Ze,1,0,"mat-progress-bar",10),a(),i(17,"div",4)(18,"label",5),r(19,"Imagem Mobile"),a(),i(20,"div",6),u("click",function(){d(l);let c=F(28);return g(c.click())}),_(21,Ue,1,1,"img",11),i(22,"div",8)(23,"mat-icon"),r(24),a(),i(25,"span"),r(26),a()()(),i(27,"input",9,1),u("change",function(c){return d(l),g(e.onMobileImageSelected(c))}),a(),_(29,$e,1,0,"mat-progress-bar",10),a(),i(30,"div",12)(31,"mat-form-field",13)(32,"mat-label"),r(33,"Link (opcional)"),a(),i(34,"input",14),C("ngModelChange",function(c){return d(l),b(e.bannerForm.link,c)||(e.bannerForm.link=c),g(c)}),a()(),i(35,"mat-form-field",15)(36,"mat-label"),r(37,"Ordem de Exibi\xE7\xE3o"),a(),i(38,"input",16),C("ngModelChange",function(c){return d(l),b(e.bannerForm.order,c)||(e.bannerForm.order=c),g(c)}),a()(),i(39,"div",17)(40,"mat-checkbox",18),C("ngModelChange",function(c){return d(l),b(e.bannerForm.is_active,c)||(e.bannerForm.is_active=c),g(c)}),r(41," Banner Ativo "),a()()()()(),i(42,"mat-dialog-actions",19)(43,"button",20),u("click",function(){return d(l),g(e.dialogRef.close())}),r(44,"Cancelar"),a(),i(45,"button",21),u("click",function(){return d(l),g(e.saveBanner())}),r(46),a()()}t&2&&(o(),v(e.isEdit?"Editar Banner":"Adicionar Banner"),o(6),O("has-image",e.bannerForm.desktop_image),o(),p("ngIf",e.bannerForm.desktop_image),o(3),v(e.bannerForm.desktop_image?"edit":"add_photo_alternate"),o(2),v(e.bannerForm.desktop_image?"Alterar Imagem Desktop":"Adicionar Imagem Desktop"),o(3),p("ngIf",e.uploadingDesktop),o(4),O("has-image",e.bannerForm.mobile_image),o(),p("ngIf",e.bannerForm.mobile_image),o(3),v(e.bannerForm.mobile_image?"edit":"add_photo_alternate"),o(2),v(e.bannerForm.mobile_image?"Alterar Imagem Mobile":"Adicionar Imagem Mobile"),o(3),p("ngIf",e.uploadingMobile),o(5),h("ngModel",e.bannerForm.link),o(4),h("ngModel",e.bannerForm.order),o(2),h("ngModel",e.bannerForm.is_active),o(5),p("disabled",!e.bannerForm.desktop_image||e.uploadingDesktop||e.uploadingMobile),o(),X(" ",e.isEdit?"Salvar":"Adicionar"," "))},dependencies:[P,y,A,G,ge,z,pe,L,te,De,Ge,We,T,V,k,E,J,H,q,Q,K,Oe,Ie,ee,$,W],styles:[".banner-form[_ngcontent-%COMP%]{min-width:500px}.image-upload-section[_ngcontent-%COMP%]{margin-bottom:24px}.image-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#555}.current-image[_ngcontent-%COMP%]{width:100%;height:200px;border:2px dashed #ccc;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;overflow:hidden;background-color:#f9f9f9}.current-image.has-image[_ngcontent-%COMP%]{border-style:solid;border-color:#4caf50}.current-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:opacity .2s;color:#fff}.current-image[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;margin-bottom:8px}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.form-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.checkbox-container[_ngcontent-%COMP%]{margin-top:8px}mat-progress-bar[_ngcontent-%COMP%]{margin-top:8px}@media (max-width: 600px){.banner-form[_ngcontent-%COMP%]{min-width:300px}.current-image[_ngcontent-%COMP%]{height:150px}}"]})};function tt(s,n){if(s&1&&M(0,"img",30),s&2){let t=f();p("src",t.getLogoUrl(t.settings.logo_url),B)}}function nt(s,n){s&1&&(i(0,"mat-icon"),r(1,"image"),a())}function it(s,n){if(s&1){let t=x();i(0,"div",31)(1,"button",32),u("click",function(){d(t);let l=f();return g(l.removeLogo())}),i(2,"mat-icon"),r(3,"delete"),a()()()}}function at(s,n){s&1&&M(0,"mat-progress-bar",33)}function rt(s,n){if(s&1&&M(0,"img",34),s&2){let t=f();p("src",t.getFaviconUrl(t.settings.favicon_url),B)}}function ot(s,n){s&1&&(i(0,"mat-icon"),r(1,"favicon"),a())}function st(s,n){if(s&1){let t=x();i(0,"div",35)(1,"button",36),u("click",function(){d(t);let l=f();return g(l.removeFavicon())}),i(2,"mat-icon"),r(3,"delete"),a()()()}}function lt(s,n){s&1&&M(0,"mat-progress-bar",33)}function ct(s,n){if(s&1&&(i(0,"p"),r(1),a()),s&2){let t=f().$implicit;o(),v(t.subtitle)}}function mt(s,n){if(s&1){let t=x();i(0,"mat-card",39)(1,"div",40),M(2,"img",41),i(3,"div",42)(4,"mat-chip"),r(5),a()()(),i(6,"mat-card-content")(7,"h3"),r(8),a(),_(9,ct,2,1,"p",6),i(10,"p",43),r(11),a()(),i(12,"mat-card-actions")(13,"button",44),u("click",function(){let l=d(t).$implicit,m=f(2);return g(m.editBanner(l))}),i(14,"mat-icon"),r(15,"edit"),a()(),i(16,"button",45),u("click",function(){let l=d(t).$implicit,m=f(2);return g(m.deleteBanner(l))}),i(17,"mat-icon"),r(18,"delete"),a()(),i(19,"button",46),u("click",function(){let l=d(t).index,m=f(2);return g(m.moveBanner(l,"up"))}),i(20,"mat-icon"),r(21,"keyboard_arrow_up"),a()(),i(22,"button",47),u("click",function(){let l=d(t).index,m=f(2);return g(m.moveBanner(l,"down"))}),i(23,"mat-icon"),r(24,"keyboard_arrow_down"),a()()()()}if(s&2){let t=n.$implicit,e=n.index,l=f(2);o(2),p("src",l.getBannerImageUrl(t),B)("alt",t.title||"Banner"),o(2),ce(t.is_active?"status-active":"status-inactive"),o(),X(" ",t.is_active?"Ativo":"Inativo"," "),o(3),v(t.title||"Sem t\xEDtulo"),o(),p("ngIf",t.subtitle),o(2),X("Ordem: ",t.order,""),o(8),p("disabled",e===0),o(3),p("disabled",e===l.banners.length-1)}}function dt(s,n){if(s&1&&(i(0,"div",37),_(1,mt,25,10,"mat-card",38),a()),s&2){let t=f();o(),p("ngForOf",t.banners)}}function gt(s,n){if(s&1){let t=x();i(0,"div",48)(1,"mat-icon"),r(2,"image"),a(),i(3,"p"),r(4,"Nenhum banner cadastrado"),a(),i(5,"button",24),u("click",function(){d(t);let l=f();return g(l.addBanner())}),r(6," Adicionar Primeiro Banner "),a()()}}var ie=class s{constructor(n,t,e,l){this.settingsService=n;this.bannerService=t;this.dialog=e;this.snackBar=l}settings;settingsChange=new Z;uploading=!1;uploadingFavicon=!1;hasChanges=!1;banners=[];loadingBanners=!1;originalSettings={};ngOnInit(){this.originalSettings=I({},this.settings),this.loadBanners()}onLogoSelected(n){let t=n.target.files?.[0];t&&(this.uploading=!0,this.settingsService.uploadLogo(t).subscribe({next:e=>{this.settings.logo_url=e.logo_url,this.settingsChange.emit({logo_url:e.logo_url}),this.uploading=!1},error:e=>{console.error("Erro ao fazer upload do logo:",e),this.snackBar.open("Erro ao fazer upload do logo","Fechar",{duration:3e3}),this.uploading=!1}}))}onFaviconSelected(n){let t=n.target.files?.[0];t&&(this.uploadingFavicon=!0,this.settingsService.uploadFavicon(t).subscribe({next:e=>{this.settings.favicon_url=e.favicon_url,this.settingsChange.emit({favicon_url:e.favicon_url}),this.uploadingFavicon=!1},error:e=>{console.error("Erro ao fazer upload do favicon:",e),this.snackBar.open("Erro ao fazer upload do favicon","Fechar",{duration:3e3}),this.uploadingFavicon=!1}}))}removeLogo(){confirm("Tem certeza que deseja remover o logo?")&&(this.settings.logo_url=void 0,this.settingsChange.emit({logo_url:void 0}))}removeFavicon(){confirm("Tem certeza que deseja remover o favicon?")&&(this.settings.favicon_url=void 0,this.settingsChange.emit({favicon_url:void 0}))}onFieldChange(){this.hasChanges=!this.isEqual(this.settings,this.originalSettings),console.log("Field changed, hasChanges:",this.hasChanges)}saveChanges(){let n=this.getChanges();console.log("Saving changes:",n),this.settingsChange.emit(n),this.originalSettings=I({},this.settings),this.hasChanges=!1}resetChanges(){Object.assign(this.settings,this.originalSettings),this.hasChanges=!1}isEqual(n,t){return JSON.stringify(n)===JSON.stringify(t)}getChanges(){let n={};return Object.keys(this.settings).forEach(t=>{this.settings[t]!==this.originalSettings[t]&&(n[t]=this.settings[t])}),console.log("Changes to be sent:",n),console.log("Current settings:",this.settings),console.log("Original settings:",this.originalSettings),n}getLogoUrl(n){return n?n.startsWith("http://")||n.startsWith("https://")?n:n.startsWith("/storage/")?"http://localhost:8000"+n:n:""}getFaviconUrl(n){return n?n.startsWith("http://")||n.startsWith("https://")?n:n.startsWith("/storage/")?"http://localhost:8000"+n:n:""}loadBanners(){this.loadingBanners=!0,this.bannerService.getAllBanners().subscribe({next:n=>{this.banners=n.sort((t,e)=>t.order-e.order),this.loadingBanners=!1},error:n=>{console.error("Erro ao carregar banners:",n),this.snackBar.open("Erro ao carregar banners","Fechar",{duration:3e3}),this.loadingBanners=!1}})}getBannerImageUrl(n){let t=n.desktop_image||n.mobile_image||"";return t?t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/storage/")?"http://localhost:8000"+t:t.startsWith("storage/")?"http://localhost:8000/"+t:"http://localhost:8000/storage/"+t:""}addBanner(){this.dialog.open(Y,{width:"600px",data:{uploadImage:t=>this.bannerService.uploadBannerImage(t),createBanner:t=>this.bannerService.createBanner(t),updateBanner:t=>this.bannerService.updateBanner(t)}}).afterClosed().subscribe(t=>{t&&this.loadBanners()})}editBanner(n){this.dialog.open(Y,{width:"600px",data:{banner:n,uploadImage:e=>this.bannerService.uploadBannerImage(e),createBanner:e=>this.bannerService.createBanner(e),updateBanner:e=>this.bannerService.updateBanner(e)}}).afterClosed().subscribe(e=>{e&&this.loadBanners()})}deleteBanner(n){confirm(`Tem certeza que deseja excluir o banner "${n.title||"Sem t\xEDtulo"}"?`)&&this.bannerService.deleteBanner(n.id).subscribe({next:()=>{this.snackBar.open("Banner exclu\xEDdo com sucesso","Fechar",{duration:3e3}),this.loadBanners()},error:t=>{console.error("Erro ao excluir banner:",t),this.snackBar.open("Erro ao excluir banner","Fechar",{duration:3e3})}})}moveBanner(n,t){let e=t==="up"?n-1:n+1;if(e<0||e>=this.banners.length)return;let l=this.banners[n];this.banners[n]=this.banners[e],this.banners[e]=l;let m=this.banners.map(c=>c.id);this.bannerService.reorderBanners(m).subscribe({next:()=>{this.snackBar.open("Ordem dos banners atualizada","Fechar",{duration:3e3})},error:c=>{console.error("Erro ao reordenar banners:",c),this.snackBar.open("Erro ao reordenar banners","Fechar",{duration:3e3}),this.loadBanners()}})}static \u0275fac=function(t){return new(t||s)(S(ne),S(_e),S(Te),S(D))};static \u0275cmp=w({type:s,selectors:[["app-general-settings"]],inputs:{settings:"settings"},outputs:{settingsChange:"settingsChange"},decls:82,vars:24,consts:[["logoInput",""],["faviconInput",""],[1,"settings-section"],[1,"logo-section"],[1,"current-logo",3,"click"],["alt","Logo",3,"src",4,"ngIf"],[4,"ngIf"],[1,"overlay"],["type","file","accept","image/*",2,"display","none",3,"change"],["class","logo-actions",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"favicon-section"],[1,"current-favicon",3,"click"],["alt","Favicon",3,"src",4,"ngIf"],["type","file","accept","image/x-icon,image/png",2,"display","none",3,"change"],["class","favicon-actions",4,"ngIf"],[1,"form-grid"],["appearance","outline"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","rows","3",3,"ngModelChange","ngModel"],["matInput","","type","email",3,"ngModelChange","ngModel"],["matInput","","rows","3","placeholder","Palavras-chave separadas por v\xEDrgula",3,"ngModelChange","ngModel"],[1,"banners-section"],[1,"banners-header"],["mat-raised-button","","color","primary",3,"click"],["class","banners-grid",4,"ngIf"],["class","no-banners",4,"ngIf"],[1,"actions"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-stroked-button","",3,"click","disabled"],["alt","Logo",3,"src"],[1,"logo-actions"],["mat-icon-button","","color","warn","matTooltip","Remover Logo",3,"click"],["mode","indeterminate"],["alt","Favicon",3,"src"],[1,"favicon-actions"],["mat-icon-button","","color","warn","matTooltip","Remover Favicon",3,"click"],[1,"banners-grid"],["class","banner-card",4,"ngFor","ngForOf"],[1,"banner-card"],[1,"banner-image"],[3,"src","alt"],[1,"banner-overlay"],[1,"banner-order"],["mat-icon-button","","matTooltip","Editar",3,"click"],["mat-icon-button","","color","warn","matTooltip","Excluir",3,"click"],["mat-icon-button","","matTooltip","Mover para cima",3,"click","disabled"],["mat-icon-button","","matTooltip","Mover para baixo",3,"click","disabled"],[1,"no-banners"]],template:function(t,e){if(t&1){let l=x();i(0,"div",2)(1,"h2"),r(2,"Informa\xE7\xF5es do Site"),a(),i(3,"div",3)(4,"div",4),u("click",function(){d(l);let c=F(11);return g(c.click())}),_(5,tt,1,1,"img",5)(6,nt,2,0,"mat-icon",6),i(7,"div",7)(8,"mat-icon"),r(9,"edit"),a()()(),i(10,"input",8,0),u("change",function(c){return d(l),g(e.onLogoSelected(c))}),a(),_(12,it,4,0,"div",9)(13,at,1,0,"mat-progress-bar",10),a(),i(14,"div",11)(15,"div",12),u("click",function(){d(l);let c=F(22);return g(c.click())}),_(16,rt,1,1,"img",13)(17,ot,2,0,"mat-icon",6),i(18,"div",7)(19,"mat-icon"),r(20,"edit"),a()()(),i(21,"input",14,1),u("change",function(c){return d(l),g(e.onFaviconSelected(c))}),a(),_(23,st,4,0,"div",15)(24,lt,1,0,"mat-progress-bar",10),a(),i(25,"div",16)(26,"mat-form-field",17)(27,"mat-label"),r(28,"Nome do Site"),a(),i(29,"input",18),C("ngModelChange",function(c){return d(l),b(e.settings.site_name,c)||(e.settings.site_name=c),g(c)}),u("ngModelChange",function(){return d(l),g(e.onFieldChange())}),a()(),i(30,"mat-form-field",17)(31,"mat-label"),r(32,"Descri\xE7\xE3o"),a(),i(33,"textarea",19),C("ngModelChange",function(c){return d(l),b(e.settings.site_description,c)||(e.settings.site_description=c),g(c)}),u("ngModelChange",function(){return d(l),g(e.onFieldChange())}),r(34,"          "),a()(),i(35,"mat-form-field",17)(36,"mat-label"),r(37,"E-mail de Contato"),a(),i(38,"input",20),C("ngModelChange",function(c){return d(l),b(e.settings.contact_email,c)||(e.settings.contact_email=c),g(c)}),u("ngModelChange",function(){return d(l),g(e.onFieldChange())}),a()(),i(39,"mat-form-field",17)(40,"mat-label"),r(41,"Telefone de Contato"),a(),i(42,"input",18),C("ngModelChange",function(c){return d(l),b(e.settings.contact_phone,c)||(e.settings.contact_phone=c),g(c)}),u("ngModelChange",function(){return d(l),g(e.onFieldChange())}),a()(),i(43,"mat-form-field",17)(44,"mat-label"),r(45,"Endere\xE7o"),a(),i(46,"textarea",19),C("ngModelChange",function(c){return d(l),b(e.settings.address,c)||(e.settings.address=c),g(c)}),u("ngModelChange",function(){return d(l),g(e.onFieldChange())}),r(47,"          "),a()()(),i(48,"h2"),r(49,"SEO"),a(),i(50,"div",16)(51,"mat-form-field",17)(52,"mat-label"),r(53,"Meta Keywords"),a(),i(54,"textarea",21),C("ngModelChange",function(c){return d(l),b(e.settings.meta_keywords,c)||(e.settings.meta_keywords=c),g(c)}),u("ngModelChange",function(){return d(l),g(e.onFieldChange())}),r(55,"          "),a()(),i(56,"mat-form-field",17)(57,"mat-label"),r(58,"Meta Description"),a(),i(59,"textarea",19),C("ngModelChange",function(c){return d(l),b(e.settings.meta_description,c)||(e.settings.meta_description=c),g(c)}),u("ngModelChange",function(){return d(l),g(e.onFieldChange())}),r(60,"          "),a()(),i(61,"mat-form-field",17)(62,"mat-label"),r(63,"ID do Google Analytics"),a(),i(64,"input",18),C("ngModelChange",function(c){return d(l),b(e.settings.google_analytics_id,c)||(e.settings.google_analytics_id=c),g(c)}),u("ngModelChange",function(){return d(l),g(e.onFieldChange())}),a()()(),i(65,"h2"),r(66,"Banners do Carrossel"),a(),i(67,"div",22)(68,"div",23)(69,"p"),r(70,"Gerencie os banners que aparecem no carrossel da p\xE1gina inicial"),a(),i(71,"button",24),u("click",function(){return d(l),g(e.addBanner())}),i(72,"mat-icon"),r(73,"add"),a(),r(74," Adicionar Banner "),a()(),_(75,dt,2,1,"div",25)(76,gt,7,0,"div",26),a(),i(77,"div",27)(78,"button",28),u("click",function(){return d(l),g(e.saveChanges())}),r(79," Salvar Altera\xE7\xF5es "),a(),i(80,"button",29),u("click",function(){return d(l),g(e.resetChanges())}),r(81," Cancelar "),a()()()}t&2&&(o(4),O("has-logo",e.settings.logo_url),o(),p("ngIf",e.settings.logo_url),o(),p("ngIf",!e.settings.logo_url),o(6),p("ngIf",e.settings.logo_url),o(),p("ngIf",e.uploading),o(2),O("has-favicon",e.settings.favicon_url),o(),p("ngIf",e.settings.favicon_url),o(),p("ngIf",!e.settings.favicon_url),o(6),p("ngIf",e.settings.favicon_url),o(),p("ngIf",e.uploadingFavicon),o(5),h("ngModel",e.settings.site_name),o(4),h("ngModel",e.settings.site_description),o(5),h("ngModel",e.settings.contact_email),o(4),h("ngModel",e.settings.contact_phone),o(4),h("ngModel",e.settings.address),o(8),h("ngModel",e.settings.meta_keywords),o(5),h("ngModel",e.settings.meta_description),o(5),h("ngModel",e.settings.google_analytics_id),o(11),p("ngIf",e.banners.length>0),o(),p("ngIf",e.banners.length===0),o(2),p("disabled",!e.hasChanges),o(2),p("disabled",!e.hasChanges))},dependencies:[P,me,y,A,G,z,L,J,H,q,Q,K,T,V,de,k,E,W,ee,$,R,j,U,N,Ee,Pe,xe,Se,te],styles:[".settings-section[_ngcontent-%COMP%]{padding:20px 0}h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px;color:#333}.logo-section[_ngcontent-%COMP%], .favicon-section[_ngcontent-%COMP%]{margin-bottom:24px}.current-logo[_ngcontent-%COMP%], .current-favicon[_ngcontent-%COMP%]{width:150px;height:150px;border:2px dashed #ccc;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;overflow:hidden}.current-favicon[_ngcontent-%COMP%]{width:64px;height:64px}.current-logo.has-logo[_ngcontent-%COMP%], .current-favicon.has-favicon[_ngcontent-%COMP%]{border-style:solid}.current-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.current-favicon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.current-logo[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .current-favicon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ccc}.current-favicon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s}.current-logo[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%], .current-favicon[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px;width:24px;height:24px}.logo-actions[_ngcontent-%COMP%], .favicon-actions[_ngcontent-%COMP%]{margin-top:8px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin-bottom:24px}.actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:flex-end;margin-top:24px}mat-progress-bar[_ngcontent-%COMP%]{margin-top:8px}.banners-section[_ngcontent-%COMP%]{margin-bottom:32px}.banners-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.banners-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.banners-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.banner-card[_ngcontent-%COMP%]{position:relative}.banner-image[_ngcontent-%COMP%]{position:relative;height:150px;overflow:hidden}.banner-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.banner-overlay[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.status-active[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.status-inactive[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.banner-order[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin:8px 0 0}.no-banners[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-banners[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}@media (max-width: 600px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.banners-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.banners-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.actions[_ngcontent-%COMP%]{flex-direction:column}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};function pt(s,n){if(s&1&&(i(0,"div",14)(1,"mat-icon",15),r(2,"error"),a(),i(3,"span"),r(4),a()()),s&2){let t=f();o(4),v(t.passwordError)}}function ut(s,n){if(s&1&&(i(0,"div",16)(1,"mat-icon",17),r(2,"check_circle"),a(),i(3,"span"),r(4),a()()),s&2){let t=f();o(4),v(t.passwordSuccess)}}var ae=class s{settings=null;settingsChange=new Z;newPassword="";confirmPassword="";passwordError="";passwordSuccess="";canSavePassword(){return this.newPassword.length>=4&&this.newPassword===this.confirmPassword&&this.newPassword.trim()!==""}savePassword(){if(this.passwordError="",this.passwordSuccess="",!this.canSavePassword()){this.newPassword.length<4?this.passwordError="A senha deve ter pelo menos 4 caracteres.":this.newPassword!==this.confirmPassword&&(this.passwordError="As senhas n\xE3o coincidem.");return}localStorage.setItem("admin_cash_password",this.newPassword),this.passwordSuccess="Senha do caixa atualizada com sucesso!",setTimeout(()=>{this.resetForm()},2e3)}resetForm(){this.newPassword="",this.confirmPassword="",this.passwordError="",this.passwordSuccess=""}getCurrentPasswordDisplay(){let n=localStorage.getItem("admin_cash_password")||"admin123";return"\u2022".repeat(n.length)+" ("+n.length+" caracteres)"}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=w({type:s,selectors:[["app-security-settings"]],inputs:{settings:"settings"},outputs:{settingsChange:"settingsChange"},decls:52,vars:6,consts:[[1,"security-settings"],[1,"password-section"],[1,"info-text"],["appearance","outline",1,"full-width"],["matInput","","type","password","placeholder","Digite a nova senha","minlength","4","required","",3,"ngModelChange","ngModel"],["matSuffix",""],["matInput","","type","password","placeholder","Confirme a nova senha","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"current-password-section"],[1,"current-password-info"],[1,"password-note"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-stroked-button","",3,"click"],[1,"error-message"],["color","warn"],[1,"success-message"],["color","primary"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),r(5,"security"),a(),r(6," Senha do Caixa "),a(),i(7,"mat-card-subtitle"),r(8," Configure a senha necess\xE1ria para abrir o caixa "),a()(),i(9,"mat-card-content")(10,"div",1)(11,"div",2)(12,"mat-icon"),r(13,"info"),a(),i(14,"p"),r(15,"Esta senha ser\xE1 solicitada sempre que um funcion\xE1rio tentar abrir o caixa."),a()(),i(16,"mat-form-field",3)(17,"mat-label"),r(18,"Nova Senha"),a(),i(19,"input",4),C("ngModelChange",function(m){return b(e.newPassword,m)||(e.newPassword=m),m}),a(),i(20,"mat-icon",5),r(21,"lock"),a(),i(22,"mat-hint"),r(23,"M\xEDnimo de 4 caracteres"),a()(),i(24,"mat-form-field",3)(25,"mat-label"),r(26,"Confirmar Senha"),a(),i(27,"input",6),C("ngModelChange",function(m){return b(e.confirmPassword,m)||(e.confirmPassword=m),m}),a(),i(28,"mat-icon",5),r(29,"lock_outline"),a()(),_(30,pt,5,1,"div",7)(31,ut,5,1,"div",8),a(),M(32,"mat-divider"),i(33,"div",9)(34,"h3"),r(35,"Senha Atual"),a(),i(36,"div",10)(37,"mat-icon"),r(38,"vpn_key"),a(),i(39,"span"),r(40),a()(),i(41,"p",11),r(42," A senha atual est\xE1 armazenada de forma segura e s\xF3 pode ser alterada aqui. "),a()()(),i(43,"mat-card-actions")(44,"button",12),u("click",function(){return e.savePassword()}),i(45,"mat-icon"),r(46,"save"),a(),r(47," Salvar Senha "),a(),i(48,"button",13),u("click",function(){return e.resetForm()}),i(49,"mat-icon"),r(50,"refresh"),a(),r(51," Cancelar "),a()()()()),t&2&&(o(19),h("ngModel",e.newPassword),o(8),h("ngModel",e.confirmPassword),o(3),p("ngIf",e.passwordError),o(),p("ngIf",e.passwordSuccess),o(9),v(e.getCurrentPasswordDisplay()),o(4),p("disabled",!e.canSavePassword()))},dependencies:[P,y,A,G,z,ue,fe,L,J,H,q,Me,ve,Q,K,T,V,k,E,R,j,U,N,Ce,be,he,Be,ke],styles:[".security-settings[_ngcontent-%COMP%]{max-width:600px}.full-width[_ngcontent-%COMP%]{width:100%;margin:8px 0}mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.password-section[_ngcontent-%COMP%]{margin:24px 0}.info-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:16px;padding:12px;background-color:#e3f2fd;border-radius:4px;border-left:4px solid #1976d2}.info-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#1565c0;font-size:14px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px;padding:12px;background-color:#ffebee;border:1px solid #f44336;border-radius:4px;color:#c62828}.success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px;padding:12px;background-color:#e8f5e8;border:1px solid #4caf50;border-radius:4px;color:#2e7d32}.current-password-section[_ngcontent-%COMP%]{margin:24px 0}.current-password-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;color:#000000de}.current-password-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:8px 0;padding:12px;background-color:#f5f5f5;border-radius:4px}.current-password-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.current-password-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:14px;color:#666}.password-note[_ngcontent-%COMP%]{margin:8px 0 0;font-size:12px;color:#0009}mat-card-actions[_ngcontent-%COMP%]{justify-content:flex-end;gap:8px}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}"]})};function ft(s,n){s&1&&(i(0,"div",4),M(1,"mat-spinner",5),i(2,"p"),r(3,"Carregando configura\xE7\xF5es..."),a()())}function _t(s,n){if(s&1){let t=x();i(0,"mat-card")(1,"mat-card-content")(2,"mat-tab-group")(3,"mat-tab",6)(4,"app-general-settings",7),u("settingsChange",function(l){d(t);let m=f();return g(m.onSettingsChange(l))}),a()(),i(5,"mat-tab",8)(6,"app-security-settings",7),u("settingsChange",function(l){d(t);let m=f();return g(m.onSettingsChange(l))}),a()()()()()}if(s&2){let t=f();o(4),p("settings",t.settings),o(2),p("settings",t.settings)}}function ht(s,n){if(s&1){let t=x();i(0,"div",9)(1,"mat-icon",10),r(2,"error"),a(),i(3,"p"),r(4,"Erro ao carregar configura\xE7\xF5es"),a(),i(5,"button",11),u("click",function(){d(t);let l=f();return g(l.loadSettings())}),r(6," Tentar Novamente "),a()()}}var Ke=class s{constructor(n,t){this.settingsService=n;this.snackBar=t}loading=!0;settings=null;ngOnInit(){this.loadSettings()}loadSettings(){this.loading=!0,this.settingsService.getSettings().subscribe({next:n=>{this.settings=n,this.loading=!1},error:n=>{console.error("Erro ao carregar configura\xE7\xF5es:",n),this.snackBar.open("Erro ao carregar configura\xE7\xF5es","Fechar",{duration:3e3}),this.loading=!1}})}onSettingsChange(n){this.settings&&(console.log("Updating settings:",n),this.settingsService.updateSettings(n).subscribe({next:t=>{console.log("Settings updated successfully:",t),this.settings=t,this.snackBar.open("Configura\xE7\xF5es atualizadas com sucesso!","Fechar",{duration:3e3})},error:t=>{console.error("Erro ao atualizar configura\xE7\xF5es:",t),console.error("Error details:",t),this.snackBar.open("Erro ao atualizar configura\xE7\xF5es","Fechar",{duration:3e3})}}))}static \u0275fac=function(t){return new(t||s)(S(ne),S(D))};static \u0275cmp=w({type:s,selectors:[["app-configuracoes"]],decls:6,vars:3,consts:[[1,"settings-container"],["class","loading-container",4,"ngIf"],[4,"ngIf"],["class","error-container",4,"ngIf"],[1,"loading-container"],["diameter","50"],["label","Geral"],[3,"settingsChange","settings"],["label","Seguran\xE7a"],[1,"error-container"],["color","warn"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"h1"),r(2,"Configura\xE7\xF5es do Sistema"),a(),_(3,ft,4,0,"div",1)(4,_t,7,2,"mat-card",2)(5,ht,7,0,"div",3),a()),t&2&&(o(3),p("ngIf",e.loading),o(),p("ngIf",!e.loading&&e.settings),o(),p("ngIf",!e.loading&&!e.settings))},dependencies:[P,y,Ae,ze,Le,R,j,N,ye,we,W,k,E,ie,ae],styles:[".settings-container[_ngcontent-%COMP%]{padding:24px;background:var(--background);min-height:100vh}h1[_ngcontent-%COMP%]{margin:0 0 24px;font-size:28px;font-weight:600;color:#2c3e50}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:16px 0;color:#666}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}mat-card[_ngcontent-%COMP%]{margin-bottom:20px;background:#fff!important;border-radius:12px!important;box-shadow:0 2px 10px #0000000d!important;border-top:4px solid var(--primary)!important;overflow:hidden}mat-card-content[_ngcontent-%COMP%]{background:#fff!important;padding:24px!important}  .mat-mdc-tab-group{background:transparent!important}  .mat-mdc-tab-header{background:transparent!important;border-bottom:1px solid #e0e0e0}  .mat-mdc-tab-label{background:transparent!important;color:#666!important}  .mat-mdc-tab-label-active{color:var(--primary)!important}  .mat-mdc-tab-body-wrapper{padding:24px 0;background:transparent!important}  .mat-mdc-tab-body-content{background:transparent!important}  .mat-mdc-form-field{background:transparent!important}  .mat-mdc-text-field-wrapper{background:#fff!important}  .mat-mdc-form-field-input-control{color:#333!important}  .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#fff!important}  .mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple:before{border-bottom-color:#0000006b!important}  .mdc-text-field--filled:not(.mdc-text-field--disabled):hover .mdc-line-ripple:before{border-bottom-color:#000000de!important}  .mdc-text-field--focused:not(.mdc-text-field--disabled) .mdc-line-ripple:after{border-bottom-color:var(--primary)!important}  .settings-section mat-card{background:#fff!important;border-radius:12px!important;box-shadow:0 2px 8px #0000001a!important;border-top:4px solid var(--primary)!important}  .settings-section mat-card-content{background:#fff!important}  .settings-section h2{color:#2c3e50!important}  .settings-section p,   .settings-section label{color:#333!important}"]})};export{Ke as ConfiguracoesComponent};
