import{Zc as g,a as n,cd as p,ga as o,la as u,w as a}from"./chunk-AFGHNMPW.js";var c=class i{constructor(t){this.http=t}apiUrl=p.apiUrl;getProducts(t){let e=n(n({},{per_page:50}),t);return this.http.get(`${this.apiUrl}/products`,{params:e})}getProduct(t){return this.http.get(`${this.apiUrl}/products/${t}`)}getCategories(){return this.http.get(`${this.apiUrl}/categories`)}getFeaturedProducts(){return this.getProducts({featured:!0,per_page:8}).pipe(a(t=>t.data))}getPopularProducts(){return this.getProducts({popular:!0,per_page:8}).pipe(a(t=>t.data))}getOffers(){return this.getProducts({per_page:50}).pipe(a(t=>t.data.filter(r=>this.hasDiscount(r))))}getImageUrl(t){return t.image_url?t.image_url.startsWith("http")?t.image_url:`${this.apiUrl}/storage/${t.image_url}`:"/assets/images/no-image.png"}hasOffer(t){return this.hasDiscount(t)}hasDiscount(t){return!!t.original_price&&t.original_price>t.price&&t.original_price>0&&t.price>0}getOriginalPrice(t){return t.original_price||t.price}getDiscountPercentage(t){if(!this.hasDiscount(t))return 0;let r=t.original_price,e=(r-t.price)/r*100;return Math.round(e)}getLowStock(t){return t.current_stock<=t.min_stock}getSuggestions(t,r=6){let e=t.map(s=>`cart_ids[]=${s}`).join("&"),l=`${this.apiUrl}/products/suggestions?${e}&limit=${r}`;return this.http.get(l).pipe(a(s=>s.suggestions))}static \u0275fac=function(r){return new(r||i)(u(g))};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{c as a};
