import{a as B}from"./chunk-QKFIFL5Q.js";import"./chunk-LKPJNKVD.js";import"./chunk-6CSLPSMF.js";import{c as N}from"./chunk-4CKO2N7V.js";import{$a as v,Bb as i,Cb as n,Db as h,Eb as w,Fb as k,Hb as C,Hc as j,Ic as U,Kb as u,Kc as W,Lb as m,Oc as R,Rc as F,Ua as S,Vb as $,Wa as c,Wb as r,Xb as _,Yb as T,cd as I,gb as E,hc as g,ic as y,jc as f,lb as b,mc as V,sb as x,ta as p,ua as d}from"./chunk-AFGHNMPW.js";function q(l,e){if(l&1){let t=C();i(0,"div",17)(1,"div",18),h(2,"img",19),i(3,"div",20)(4,"h3",21),r(5),n(),i(6,"p",22),r(7),g(8,"number"),n()(),i(9,"div",23)(10,"button",24),u("click",function(){let o=p(t).$implicit,s=m(2);return d(s.updateQuantity(o,o.quantity-1))}),r(11," - "),n(),i(12,"span",25),r(13),n(),i(14,"button",26),u("click",function(){let o=p(t).$implicit,s=m(2);return d(s.updateQuantity(o,o.quantity+1))}),r(15," + "),n()(),i(16,"div",27)(17,"p",21),r(18),g(19,"number"),n(),i(20,"button",28),u("click",function(){let o=p(t).$implicit,s=m(2);return d(s.removeItem(o))}),r(21," Remover "),n()()()()}if(l&2){let t=e.$implicit,a=m(2);c(2),x("src",a.getImageUrl(t),S)("alt",a.getItemName(t)),c(3),_(a.getItemName(t)),c(2),_(f(8,7,t.price,"1.2-2")),c(6),_(t.quantity),c(),x("disabled",!a.canIncreaseQuantity(t)),c(4),T(" ",f(19,10,t.quantity*t.price,"1.2-2")," ")}}function D(l,e){if(l&1){let t=C();w(0),i(1,"div",4)(2,"div",5),b(3,q,22,13,"div",6),g(4,"async"),n(),i(5,"div",7)(6,"div",8)(7,"h2",9),r(8,"Resumo do Pedido"),n(),i(9,"div",10)(10,"span"),r(11,"Subtotal"),n(),i(12,"span"),r(13),g(14,"number"),n()(),i(15,"div",10)(16,"span"),r(17,"Frete"),n(),i(18,"span",11),r(19,"Gr\xE1tis"),n()(),h(20,"hr",12),i(21,"div",13)(22,"span",14),r(23,"Total"),n(),i(24,"span",14),r(25),g(26,"number"),n()(),i(27,"button",15),u("click",function(){p(t);let o=m();return d(o.checkout())}),r(28," Finalizar Compra "),n(),i(29,"button",16),u("click",function(){p(t);let o=m();return d(o.continueShopping())}),r(30," Continuar Comprando "),n()()()(),k()}if(l&2){let t=m();c(3),x("ngForOf",y(4,3,t.cartItems$)),c(10),_(f(14,5,t.getTotal(),"1.2-2")),c(12),_(f(26,8,t.getTotal(),"1.2-2"))}}function Q(l,e){if(l&1){let t=C();i(0,"div",29)(1,"h2",30),r(2,"Seu carrinho est\xE1 vazio"),n(),i(3,"p",31),r(4,"Adicione alguns produtos para come\xE7ar suas compras"),n(),i(5,"button",32),u("click",function(){p(t);let o=m();return d(o.continueShopping())}),r(6," Explorar Produtos "),n()()}}var P=class l{constructor(e,t){this.cartService=e;this.router=t}get cartItems$(){return this.cartService.cartItems$}updateQuantity(e,t){t>0&&(e.isCombo?this.cartService.updateQuantity(e.id,t):e.product&&t<=e.product.current_stock&&this.cartService.updateQuantity(e.product.id,t))}canIncreaseQuantity(e){return e.isCombo||!e.product?!0:e.quantity<e.product.current_stock}removeItem(e){this.cartService.removeItem(e.id)}isCombo(e){return e.isCombo||!1}getTotal(){return this.cartService.getTotal()}checkout(){this.router.navigate(["/loja/checkout"])}continueShopping(){this.router.navigate(["/loja"])}getImageUrl(e){if(e.isCombo&&e.combo){if(e.combo.images&&e.combo.images.length>0){let t=e.combo.images[0];if(t.startsWith("http://")||t.startsWith("https://"))return t;if(t.startsWith("/storage/")||t.startsWith("storage/")){let a=I.apiUrl.replace(/\/api$/,""),o=t.startsWith("/")?t:`/${t}`;return`${a}${o}`}return t}return"assets/images/default-combo.jpg"}else if(e.product){let t=e.product.image_url;if(!t)return"assets/images/no-image.png";if(t.startsWith("http://")||t.startsWith("https://"))return`${t}?v=${encodeURIComponent(e.product.updated_at||"")}`;if(t.startsWith("/storage/")||t.startsWith("storage/")){let a=I.apiUrl.replace(/\/api$/,""),o=t.startsWith("/")?t:`/${t}`;return`${a}${o}?v=${encodeURIComponent(e.product.updated_at||"")}`}return`${t}?v=${encodeURIComponent(e.product.updated_at||"")}`}return"assets/images/no-image.png"}getItemName(e){return e.isCombo&&e.combo?e.combo.name:e.product?e.product.name:"Item"}static \u0275fac=function(t){return new(t||l)(v(B),v(N))};static \u0275cmp=E({type:l,selectors:[["app-cart"]],decls:7,vars:4,consts:[["emptyCart",""],[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-8"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2"],["class","bg-white rounded-lg shadow-md p-6 mb-4",4,"ngFor","ngForOf"],[1,"lg:col-span-1"],[1,"bg-white","rounded-lg","shadow-md","p-6","sticky","top-4"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","justify-between","mb-2"],[1,"text-green-600"],[1,"my-4"],[1,"flex","justify-between","mb-6"],[1,"font-semibold"],[1,"w-full","py-3","bg-primary-600","text-white","rounded-lg","hover:bg-primary-700","transition-colors","mb-4",3,"click"],[1,"w-full","py-3","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-4"],[1,"flex","items-center"],[1,"w-20","h-20","object-cover","rounded",3,"src","alt"],[1,"flex-1","ml-4"],[1,"text-lg","font-semibold"],[1,"text-gray-600"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","rounded-full","bg-gray-100","flex","items-center","justify-center",3,"click"],[1,"w-12","text-center"],[1,"w-8","h-8","rounded-full","bg-gray-100","flex","items-center","justify-center",3,"click","disabled"],[1,"ml-8","text-right"],[1,"text-red-600","text-sm","mt-2",3,"click"],[1,"text-center","py-12"],[1,"text-2xl","font-semibold","mb-4"],[1,"text-gray-600","mb-8"],[1,"px-8","py-3","bg-primary-600","text-white","rounded-lg","hover:bg-primary-700","transition-colors",3,"click"]],template:function(t,a){if(t&1&&(i(0,"div",1)(1,"h1",2),r(2,"Carrinho de Compras"),n(),b(3,D,31,11,"ng-container",3),g(4,"async"),b(5,Q,7,0,"ng-template",null,0,V),n()),t&2){let o,s=$(6);c(3),x("ngIf",(o=y(4,2,a.cartItems$))==null?null:o.length)("ngIfElse",s)}},dependencies:[F,j,U,W,R],encapsulation:2})};export{P as CartComponent};
