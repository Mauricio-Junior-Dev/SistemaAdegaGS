<div class="product-card" 
     [routerLink]="(isBundle() || isCombo()) ? ['/combos', product.id.toString()] : null"
     [style.cursor]="(isBundle() || isCombo()) ? 'pointer' : 'default'">
  <!-- Tag de Desconto -->
  <div class="discount-tag" *ngIf="product.has_discount && product.discount_percentage">
    {{ product.discount_percentage }}% OFF
  </div>

  <!-- Conteúdo do Card (Imagem e Título) -->
  <div class="card-content">
    <!-- Imagem do Produto -->
    <div class="card-image-container">
      <img [src]="getImageUrl(product)"
           [alt]="product.name"
           class="card-img">
    </div>

    <!-- Título do Produto -->
    <h3 class="product-title" [title]="product.name">{{ product.name }}</h3>
  </div>

  <!-- Footer com Preços e Botão -->
  <div class="card-footer">
    <div class="price-block">
      <span class="old-price" *ngIf="product.has_discount && product.original_price && !showPriceFrom()">
        {{ product.original_price | currency:'BRL' }}
      </span>
      <span class="price-from" *ngIf="showPriceFrom()">A partir de </span>
      <span class="current-price">
        {{ (product.type === 'bundle' ? (product.base_price ?? 0) : (product.price ?? 0)) | currency:'BRL' }}
      </span>
    </div>
    <button mat-icon-button 
            class="btn-quick-add" 
            (click)="onAddToCart($event)"
            [attr.aria-label]="isBundle() || isCombo() ? 'Ver combo e escolher opções' : 'Adicionar ao carrinho'">
      <mat-icon>add_shopping_cart</mat-icon>
    </button>
  </div>
</div>
