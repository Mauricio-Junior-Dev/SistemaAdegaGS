<div class="profile-page">
  <div class="container">
    <div class="profile-header">
      <h1>Meu Perfil</h1>
      <p class="subtitle">Gerencie suas informações pessoais</p>
    </div>

    <!-- Cards de Navegação -->
    <div class="profile-nav-cards">
      <a routerLink="/perfil" routerLinkActive="active" class="nav-card">
        <mat-icon>account_circle</mat-icon>
        <div class="nav-card-content">
          <h3>Dados Pessoais</h3>
          <p>Gerencie suas informações pessoais</p>
        </div>
      </a>

      <a routerLink="/pedidos" class="nav-card">
        <mat-icon>receipt_long</mat-icon>
        <div class="nav-card-content">
          <h3>Meus Pedidos</h3>
          <p>Visualize seus pedidos e histórico</p>
        </div>
      </a>

      <a routerLink="/enderecos" class="nav-card">
        <mat-icon>location_on</mat-icon>
        <div class="nav-card-content">
          <h3>Meus Endereços</h3>
          <p>Gerencie seus endereços de entrega</p>
        </div>
      </a>
    </div>

    <div class="profile-content">
      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
        <!-- Informações Pessoais -->
        <div class="form-section">
          <h2>Informações Pessoais</h2>
          
          <mat-form-field appearance="outline">
            <mat-label>Nome Completo</mat-label>
            <input matInput formControlName="name" placeholder="Seu nome">
            <mat-icon matPrefix>person</mat-icon>
            <mat-error *ngIf="profileForm.get('name')?.errors?.['required']">
              Nome é obrigatório
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" placeholder="seu@email.com">
            <mat-icon matPrefix>email</mat-icon>
            <mat-error *ngIf="profileForm.get('email')?.errors?.['required']">
              Email é obrigatório
            </mat-error>
            <mat-error *ngIf="profileForm.get('email')?.errors?.['email']">
              Email inválido
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Telefone</mat-label>
            <input matInput formControlName="phone" placeholder="(00) 00000-0000">
            <mat-icon matPrefix>phone</mat-icon>
            <mat-error *ngIf="profileForm.get('phone')?.errors?.['required']">
              Telefone é obrigatório
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Alterar Senha -->
        <div class="form-section">
          <h2>Alterar Senha</h2>
          <p class="section-description">Deixe em branco se não quiser alterar</p>

          <mat-form-field appearance="outline">
            <mat-label>Senha Atual</mat-label>
            <input matInput formControlName="current_password" type="password" placeholder="Sua senha atual">
            <mat-icon matPrefix>lock</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Nova Senha</mat-label>
            <input matInput formControlName="new_password" type="password" placeholder="Nova senha">
            <mat-icon matPrefix>lock_open</mat-icon>
            <mat-error *ngIf="profileForm.get('new_password')?.errors?.['minlength']">
              Senha deve ter no mínimo 8 caracteres
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Confirmar Nova Senha</mat-label>
            <input matInput formControlName="new_password_confirmation" type="password" placeholder="Confirme a nova senha">
            <mat-icon matPrefix>lock_open</mat-icon>
          </mat-form-field>
        </div>

        <!-- Mensagens de Feedback -->
        <div *ngIf="success" class="alert alert-success">
          <mat-icon>check_circle</mat-icon>
          <span>Perfil atualizado com sucesso!</span>
        </div>

        <div *ngIf="error" class="alert alert-error">
          <mat-icon>error</mat-icon>
          <span>{{ error }}</span>
        </div>

        <!-- Botões de Ação -->
        <div class="form-actions">
          <button mat-raised-button color="primary" type="submit" [disabled]="loading || profileForm.invalid">
            <mat-icon *ngIf="!loading">save</mat-icon>
            <span *ngIf="!loading">Salvar Alterações</span>
            <span *ngIf="loading">Salvando...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

